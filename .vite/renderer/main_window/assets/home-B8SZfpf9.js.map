{"version":3,"file":"home-B8SZfpf9.js","sources":["../../../../src/renderer/WebHomepage.tsx","../../../../src/renderer/web-homepage.tsx"],"sourcesContent":["import { useCallback, useEffect, useMemo, useState, type FormEvent } from 'react';\nimport type {\n  ActivitySummary,\n  AnalyticsOverview,\n  DailyOnboardingState,\n  LibraryItem,\n  LibraryPurpose,\n  TimeOfDayStats,\n  WalletSnapshot\n} from '@shared/types';\n\ntype Pane = 'home' | 'library' | 'capture';\n\ntype ReadingAttractor = {\n  id: string;\n  source: 'zotero' | 'books';\n  title: string;\n  subtitle?: string;\n  updatedAt: number;\n  progress?: number;\n  action: { kind: 'deeplink' | 'file'; url?: string; path?: string; app?: 'Books' | 'Zotero' };\n};\n\nconst DEFAULT_API_BASE = 'http://127.0.0.1:17600';\nconst DAILY_START_HOUR = 4;\n\nfunction normalizeApiBase(value: string) {\n  const trimmed = value.trim();\n  if (!trimmed) return DEFAULT_API_BASE;\n  return trimmed.endsWith('/') ? trimmed.slice(0, -1) : trimmed;\n}\n\nfunction loadStoredApiBase() {\n  try {\n    return normalizeApiBase(window.localStorage.getItem('tws-web-api-base') ?? DEFAULT_API_BASE);\n  } catch {\n    return DEFAULT_API_BASE;\n  }\n}\n\nfunction formatHours(seconds: number) {\n  const hours = seconds / 3600;\n  if (hours >= 10) return `${Math.round(hours)}h`;\n  return `${hours.toFixed(1)}h`;\n}\n\nfunction formatDuration(seconds: number) {\n  const totalMinutes = Math.max(0, Math.round(seconds / 60));\n  const hours = Math.floor(totalMinutes / 60);\n  const minutes = totalMinutes % 60;\n  if (hours > 0) return `${hours}h ${minutes}m`;\n  return `${minutes}m`;\n}\n\nfunction formatDayLabel(day: string) {\n  const date = new Date(`${day}T00:00:00`);\n  return date.toLocaleDateString([], { weekday: 'short', month: 'short', day: 'numeric' });\n}\n\nfunction dayKeyFor(date: Date) {\n  const local = new Date(date);\n  if (local.getHours() < DAILY_START_HOUR) {\n    local.setDate(local.getDate() - 1);\n  }\n  const year = local.getFullYear();\n  const month = String(local.getMonth() + 1).padStart(2, '0');\n  const day = String(local.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\nfunction purposeLabel(purpose: LibraryPurpose) {\n  switch (purpose) {\n    case 'replace':\n      return 'Replace';\n    case 'productive':\n      return 'Productive';\n    case 'allow':\n      return 'Allow';\n    case 'temptation':\n      return 'Temptation';\n    default:\n      return purpose;\n  }\n}\n\nfunction safeDate(value: string | undefined) {\n  if (!value) return 0;\n  const parsed = Date.parse(value);\n  return Number.isFinite(parsed) ? parsed : 0;\n}\n\nasync function fetchJson<T>(apiBase: string, path: string, init?: RequestInit): Promise<T> {\n  const response = await fetch(`${apiBase}${path}`, {\n    ...init,\n    headers: {\n      'Content-Type': 'application/json',\n      ...(init?.headers ?? {})\n    }\n  });\n  if (!response.ok) {\n    const payload = await response.json().catch(() => null);\n    const message =\n      payload && typeof payload === 'object' && 'error' in payload && typeof payload.error === 'string'\n        ? payload.error\n        : `Request failed (${response.status})`;\n    throw new Error(message);\n  }\n  return response.json() as Promise<T>;\n}\n\nfunction normalizeUrl(raw: string) {\n  const trimmed = raw.trim();\n  if (!trimmed) return null;\n  if (trimmed.startsWith('http://') || trimmed.startsWith('https://')) return trimmed;\n  return `https://${trimmed}`;\n}\n\nfunction toPercent(value: number, total: number) {\n  if (!Number.isFinite(total) || total <= 0) return 0;\n  return Math.max(0, Math.min(100, Math.round((value / total) * 100)));\n}\n\nexport default function WebHomepage() {\n  const [pane, setPane] = useState<Pane>('home');\n  const [apiBaseInput, setApiBaseInput] = useState(loadStoredApiBase);\n  const [apiBase, setApiBase] = useState(loadStoredApiBase);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [connected, setConnected] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [now, setNow] = useState(Date.now());\n\n  const [wallet, setWallet] = useState<WalletSnapshot>({ balance: 0 });\n  const [summary, setSummary] = useState<ActivitySummary | null>(null);\n  const [overview, setOverview] = useState<AnalyticsOverview | null>(null);\n  const [timeOfDay, setTimeOfDay] = useState<TimeOfDayStats[]>([]);\n  const [libraryItems, setLibraryItems] = useState<LibraryItem[]>([]);\n  const [readingItems, setReadingItems] = useState<ReadingAttractor[]>([]);\n  const [dailyState, setDailyState] = useState<DailyOnboardingState | null>(null);\n\n  const [captureUrl, setCaptureUrl] = useState('');\n  const [captureTitle, setCaptureTitle] = useState('');\n  const [captureNote, setCaptureNote] = useState('');\n  const [capturePurpose, setCapturePurpose] = useState<LibraryPurpose>('replace');\n  const [savingCapture, setSavingCapture] = useState(false);\n  const [captureError, setCaptureError] = useState<string | null>(null);\n\n  const [dailyNote, setDailyNote] = useState('');\n  const [savingNote, setSavingNote] = useState(false);\n  const [noteSavedAt, setNoteSavedAt] = useState<number | null>(null);\n\n  const loadHomepage = useCallback(\n    async (silent = false) => {\n      if (!silent) setLoading(true);\n      setRefreshing(true);\n      setError(null);\n      try {\n        await fetchJson<{ status: string }>(apiBase, '/health');\n        const [walletData, summaryData, overviewData, timeData, libraryData, readingData, onboardingData] = await Promise.all([\n          fetchJson<WalletSnapshot>(apiBase, '/wallet'),\n          fetchJson<ActivitySummary>(apiBase, '/activities/summary?windowHours=24'),\n          fetchJson<AnalyticsOverview>(apiBase, '/analytics/overview?days=7'),\n          fetchJson<TimeOfDayStats[]>(apiBase, '/analytics/time-of-day?days=7'),\n          fetchJson<LibraryItem[]>(apiBase, '/library'),\n          fetchJson<{ items: ReadingAttractor[] }>(apiBase, '/integrations/reading?limit=8'),\n          fetchJson<DailyOnboardingState>(apiBase, '/settings/daily-onboarding')\n        ]);\n        setWallet(walletData);\n        setSummary(summaryData);\n        setOverview(overviewData);\n        setTimeOfDay(timeData);\n        setLibraryItems(libraryData);\n        setReadingItems(readingData.items ?? []);\n        setDailyState(onboardingData);\n        setDailyNote(onboardingData.note?.message ?? '');\n        setConnected(true);\n      } catch (loadError) {\n        setConnected(false);\n        setError((loadError as Error).message || 'Failed to load homepage data.');\n      } finally {\n        setLoading(false);\n        setRefreshing(false);\n      }\n    },\n    [apiBase]\n  );\n\n  useEffect(() => {\n    loadHomepage();\n  }, [loadHomepage]);\n\n  useEffect(() => {\n    const clockId = window.setInterval(() => setNow(Date.now()), 60_000);\n    return () => window.clearInterval(clockId);\n  }, []);\n\n  useEffect(() => {\n    const refreshId = window.setInterval(() => loadHomepage(true), 45_000);\n    return () => window.clearInterval(refreshId);\n  }, [loadHomepage]);\n\n  useEffect(() => {\n    try {\n      window.localStorage.setItem('tws-web-api-base', apiBase);\n    } catch {\n      // ignore persistence failures in strict browser contexts.\n    }\n  }, [apiBase]);\n\n  const topContexts = useMemo(() => summary?.topContexts?.slice(0, 6) ?? [], [summary]);\n  const activeSeconds = useMemo(() => {\n    const breakdown = overview?.categoryBreakdown;\n    if (!breakdown) return 0;\n    return breakdown.productive + breakdown.neutral + breakdown.frivolity + breakdown.draining + breakdown.idle;\n  }, [overview]);\n\n  const bestHour = useMemo(() => {\n    if (!timeOfDay.length) return null;\n    return [...timeOfDay].sort((a, b) => b.productive - a.productive)[0] ?? null;\n  }, [timeOfDay]);\n\n  const shelfItems = useMemo(() => {\n    const candidates = libraryItems\n      .filter((item) => item.kind === 'url' && !item.consumedAt)\n      .sort((a, b) => safeDate(a.lastUsedAt ?? a.createdAt) - safeDate(b.lastUsedAt ?? b.createdAt))\n      .slice(0, 6)\n      .map((item) => ({\n        id: `library-${item.id}`,\n        type: 'library' as const,\n        title: item.title ?? item.domain,\n        subtitle: item.note ?? item.url ?? item.domain,\n        url: item.url,\n        purpose: item.purpose,\n        libraryId: item.id\n      }));\n\n    const reading = readingItems.slice(0, 6).map((item) => ({\n      id: `reading-${item.id}`,\n      type: 'reading' as const,\n      title: item.title,\n      subtitle: item.subtitle ?? item.source.toUpperCase(),\n      url: item.action.kind === 'deeplink' ? item.action.url : undefined,\n      source: item.source,\n      progress: item.progress\n    }));\n\n    const merged: Array<(typeof candidates)[number] | (typeof reading)[number]> = [];\n    const max = Math.max(candidates.length, reading.length);\n    for (let idx = 0; idx < max; idx += 1) {\n      if (candidates[idx]) merged.push(candidates[idx]);\n      if (reading[idx]) merged.push(reading[idx]);\n    }\n    return merged.slice(0, 8);\n  }, [libraryItems, readingItems]);\n\n  const handleApplyApiBase = () => {\n    setApiBase(normalizeApiBase(apiBaseInput));\n  };\n\n  const handleCaptureSubmit = async (event: FormEvent) => {\n    event.preventDefault();\n    setCaptureError(null);\n    const normalized = normalizeUrl(captureUrl);\n    if (!normalized) {\n      setCaptureError('Enter a valid URL.');\n      return;\n    }\n    setSavingCapture(true);\n    try {\n      await fetchJson<LibraryItem>(apiBase, '/library', {\n        method: 'POST',\n        body: JSON.stringify({\n          kind: 'url',\n          url: normalized,\n          title: captureTitle.trim() || undefined,\n          note: captureNote.trim() || undefined,\n          purpose: capturePurpose\n        })\n      });\n      setCaptureUrl('');\n      setCaptureTitle('');\n      setCaptureNote('');\n      setCapturePurpose('replace');\n      await loadHomepage(true);\n      setPane('library');\n    } catch (submitError) {\n      setCaptureError((submitError as Error).message || 'Unable to save.');\n    } finally {\n      setSavingCapture(false);\n    }\n  };\n\n  const handleMarkDone = async (item: LibraryItem) => {\n    if (!item.id || item.consumedAt) return;\n    try {\n      const updated = await fetchJson<LibraryItem>(apiBase, `/library/${item.id}`, {\n        method: 'PATCH',\n        body: JSON.stringify({\n          consumedAt: new Date().toISOString()\n        })\n      });\n      setLibraryItems((prev) => prev.map((entry) => (entry.id === updated.id ? updated : entry)));\n    } catch (markError) {\n      setError((markError as Error).message || 'Unable to mark item complete.');\n    }\n  };\n\n  const handleSaveNote = async (event: FormEvent) => {\n    event.preventDefault();\n    setSavingNote(true);\n    try {\n      const day = dayKeyFor(new Date());\n      const message = dailyNote.trim();\n      const nextState = await fetchJson<DailyOnboardingState>(apiBase, '/settings/daily-onboarding', {\n        method: 'POST',\n        body: JSON.stringify({\n          lastPromptedDay: day,\n          note: message\n            ? {\n                day,\n                message,\n                deliveredAt: null,\n                acknowledged: false\n              }\n            : null\n        })\n      });\n      setDailyState(nextState);\n      setDailyNote(nextState.note?.message ?? '');\n      setNoteSavedAt(Date.now());\n    } catch (saveError) {\n      setError((saveError as Error).message || 'Unable to save note.');\n    } finally {\n      setSavingNote(false);\n    }\n  };\n\n  const noteDayLabel = dailyState?.note?.day ? formatDayLabel(dailyState.note.day) : null;\n\n  return (\n    <div className=\"app-shell web-home-shell\">\n      <div className=\"window-chrome\">\n        <div className=\"window-chrome-title\" aria-hidden>\n          <div className=\"title-dot\" />\n          <span>TimeWellSpent Web Home</span>\n        </div>\n        <div className=\"window-chrome-meta\">\n          <span className={`pill ${connected ? 'success' : 'danger'}`}>{connected ? 'API connected' : 'API offline'}</span>\n          <span className=\"pill ghost big\">{wallet.balance} f-coins</span>\n        </div>\n      </div>\n\n      <aside className=\"sidebar\">\n        <div className=\"brand\">\n          <div className=\"logo\">‚è≥</div>\n          <span>Homepage</span>\n        </div>\n\n        <nav className=\"nav-menu\">\n          <button className={pane === 'home' ? 'active' : ''} onClick={() => setPane('home')}>\n            Home\n          </button>\n          <button className={pane === 'library' ? 'active' : ''} onClick={() => setPane('library')}>\n            Library\n          </button>\n          <button className={pane === 'capture' ? 'active' : ''} onClick={() => setPane('capture')}>\n            Capture\n          </button>\n        </nav>\n\n        <div className=\"wallet-summary\">\n          <div className=\"balance\">\n            <span className=\"coin\">ü™ô</span>\n            <span className=\"amount\">{wallet.balance}</span>\n          </div>\n          <div className=\"rate\">{overview ? `${overview.productivityScore} focus score` : 'Focus score unavailable'}</div>\n        </div>\n\n        <div className=\"web-api-config\">\n          <label htmlFor=\"api-base\">Local API</label>\n          <input\n            id=\"api-base\"\n            value={apiBaseInput}\n            onChange={(event) => setApiBaseInput(event.target.value)}\n            placeholder={DEFAULT_API_BASE}\n          />\n          <button className=\"primary\" type=\"button\" onClick={handleApplyApiBase}>\n            Connect\n          </button>\n        </div>\n      </aside>\n\n      <main className=\"content web-home-main\">\n        <section className=\"panel\">\n          <header className=\"panel-header\">\n            <div>\n              <h1>Safe Landing</h1>\n              <p className=\"subtle\">Orient, choose your next move, and keep the day intentional.</p>\n            </div>\n            <div className=\"web-header-actions\">\n              <span className=\"pill ghost\">{new Date(now).toLocaleString([], { dateStyle: 'medium', timeStyle: 'short' })}</span>\n              <button type=\"button\" onClick={() => loadHomepage()}>\n                {refreshing ? 'Refreshing...' : 'Refresh'}\n              </button>\n            </div>\n          </header>\n\n          {error && <div className=\"card web-inline-error\">{error}</div>}\n          {loading ? <div className=\"card\">Loading homepage...</div> : null}\n\n          {!loading && pane === 'home' && (\n            <div className=\"panel-body web-home-grid\">\n              <article className=\"card\">\n                <div className=\"card-header-row\">\n                  <h2>Today Compass</h2>\n                  <span className=\"pill ghost\">{overview ? `${overview.periodDays}d lens` : 'Local view'}</span>\n                </div>\n                <div className=\"web-stat-grid\">\n                  <div className=\"web-stat\">\n                    <span className=\"subtle\">Active</span>\n                    <strong>{summary ? formatDuration(summary.totalSeconds) : '0m'}</strong>\n                  </div>\n                  <div className=\"web-stat\">\n                    <span className=\"subtle\">Deep Work</span>\n                    <strong>{summary ? formatDuration(summary.deepWorkSeconds) : '0m'}</strong>\n                  </div>\n                  <div className=\"web-stat\">\n                    <span className=\"subtle\">Focus Score</span>\n                    <strong>{overview ? overview.productivityScore : 0}</strong>\n                  </div>\n                  <div className=\"web-stat\">\n                    <span className=\"subtle\">Sessions</span>\n                    <strong>{overview ? overview.totalSessions : 0}</strong>\n                  </div>\n                </div>\n                <div className=\"web-pill-row\">\n                  <span className=\"pill success\">Peak {overview ? `${overview.peakProductiveHour}:00` : '--'}</span>\n                  <span className=\"pill warning\">Risk {overview ? `${overview.riskHour}:00` : '--'}</span>\n                  <span className=\"pill ghost\">{bestHour ? `Best block ${bestHour.hour}:00` : 'No block yet'}</span>\n                </div>\n              </article>\n\n              <article className=\"card\">\n                <h2>Attention Mix</h2>\n                <div className=\"web-category-list\">\n                  <div className=\"web-category-row\">\n                    <div>\n                      <span>Productive</span>\n                      <strong>{formatHours(overview?.categoryBreakdown.productive ?? 0)}</strong>\n                    </div>\n                    <div className=\"web-category-bar\">\n                      <span style={{ width: `${toPercent(overview?.categoryBreakdown.productive ?? 0, activeSeconds)}%` }} />\n                    </div>\n                  </div>\n                  <div className=\"web-category-row\">\n                    <div>\n                      <span>Neutral</span>\n                      <strong>{formatHours(overview?.categoryBreakdown.neutral ?? 0)}</strong>\n                    </div>\n                    <div className=\"web-category-bar neutral\">\n                      <span style={{ width: `${toPercent(overview?.categoryBreakdown.neutral ?? 0, activeSeconds)}%` }} />\n                    </div>\n                  </div>\n                  <div className=\"web-category-row\">\n                    <div>\n                      <span>Frivolity</span>\n                      <strong>{formatHours(overview?.categoryBreakdown.frivolity ?? 0)}</strong>\n                    </div>\n                    <div className=\"web-category-bar frivolity\">\n                      <span style={{ width: `${toPercent(overview?.categoryBreakdown.frivolity ?? 0, activeSeconds)}%` }} />\n                    </div>\n                  </div>\n                </div>\n              </article>\n\n              <article className=\"card\">\n                <h2>Top Contexts</h2>\n                {topContexts.length ? (\n                  <ul className=\"web-list\">\n                    {topContexts.map((context) => (\n                      <li key={`${context.label}-${context.seconds}`}>\n                        <div>\n                          <strong>{context.label}</strong>\n                          <span className=\"subtle\">{context.category ?? 'uncategorized'}</span>\n                        </div>\n                        <span>{formatDuration(context.seconds)}</span>\n                      </li>\n                    ))}\n                  </ul>\n                ) : (\n                  <p className=\"subtle\">No context data yet.</p>\n                )}\n              </article>\n\n              <article className=\"card\">\n                <h2>Refresh Shelf</h2>\n                {shelfItems.length ? (\n                  <ul className=\"web-list\">\n                    {shelfItems.map((item) => (\n                      <li key={item.id}>\n                        <div>\n                          <strong>{item.title}</strong>\n                          <span className=\"subtle\">{item.subtitle}</span>\n                        </div>\n                        <div className=\"web-item-actions\">\n                          {item.type === 'library' ? <span className=\"pill ghost\">{purposeLabel(item.purpose)}</span> : null}\n                          {item.type === 'reading' && typeof item.progress === 'number' ? (\n                            <span className=\"pill ghost\">{Math.round(item.progress * 100)}%</span>\n                          ) : null}\n                          {item.url ? (\n                            <a href={item.url} target=\"_blank\" rel=\"noreferrer\">\n                              Open\n                            </a>\n                          ) : (\n                            <span className=\"subtle\">Desktop only</span>\n                          )}\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                ) : (\n                  <p className=\"subtle\">No items in your shelf yet.</p>\n                )}\n              </article>\n\n              <article className=\"card web-full-width\">\n                <h2>Current Insight Feed</h2>\n                {overview?.insights?.length ? (\n                  <ul className=\"web-insight-list\">\n                    {overview.insights.map((insight) => (\n                      <li key={insight}>{insight}</li>\n                    ))}\n                  </ul>\n                ) : (\n                  <p className=\"subtle\">Insights will appear once enough activity is collected.</p>\n                )}\n              </article>\n            </div>\n          )}\n\n          {!loading && pane === 'library' && (\n            <div className=\"card\">\n              <div className=\"card-header-row\">\n                <h2>Library</h2>\n                <span className=\"pill ghost\">{libraryItems.length} items</span>\n              </div>\n              {libraryItems.length ? (\n                <ul className=\"web-list\">\n                  {libraryItems.slice(0, 40).map((item) => (\n                    <li key={item.id}>\n                      <div>\n                        <strong>{item.title ?? item.domain}</strong>\n                        <span className=\"subtle\">\n                          {purposeLabel(item.purpose)}\n                          {item.consumedAt ? ` ‚Ä¢ done ${new Date(item.consumedAt).toLocaleDateString()}` : ''}\n                        </span>\n                      </div>\n                      <div className=\"web-item-actions\">\n                        {item.url ? (\n                          <a href={item.url} target=\"_blank\" rel=\"noreferrer\">\n                            Open\n                          </a>\n                        ) : null}\n                        {!item.consumedAt ? (\n                          <button type=\"button\" onClick={() => handleMarkDone(item)}>\n                            Done\n                          </button>\n                        ) : null}\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              ) : (\n                <p className=\"subtle\">Your library is empty. Capture a few URLs to start.</p>\n              )}\n            </div>\n          )}\n\n          {!loading && pane === 'capture' && (\n            <div className=\"web-capture-grid\">\n              <form className=\"card\" onSubmit={handleCaptureSubmit}>\n                <h2>Quick Capture</h2>\n                <div className=\"form-group\">\n                  <label htmlFor=\"capture-url\">URL</label>\n                  <input\n                    id=\"capture-url\"\n                    value={captureUrl}\n                    onChange={(event) => setCaptureUrl(event.target.value)}\n                    placeholder=\"https://...\"\n                  />\n                </div>\n                <div className=\"form-row\">\n                  <div className=\"form-group\">\n                    <label htmlFor=\"capture-title\">Title (optional)</label>\n                    <input\n                      id=\"capture-title\"\n                      value={captureTitle}\n                      onChange={(event) => setCaptureTitle(event.target.value)}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"capture-purpose\">Purpose</label>\n                    <select\n                      id=\"capture-purpose\"\n                      value={capturePurpose}\n                      onChange={(event) => setCapturePurpose(event.target.value as LibraryPurpose)}\n                    >\n                      <option value=\"replace\">Replace</option>\n                      <option value=\"productive\">Productive</option>\n                      <option value=\"allow\">Allow</option>\n                      <option value=\"temptation\">Temptation</option>\n                    </select>\n                  </div>\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"capture-note\">Note (optional)</label>\n                  <textarea\n                    id=\"capture-note\"\n                    rows={4}\n                    value={captureNote}\n                    onChange={(event) => setCaptureNote(event.target.value)}\n                  />\n                </div>\n                {captureError ? <p className=\"subtle\">{captureError}</p> : null}\n                <div className=\"form-actions\">\n                  <button className=\"primary\" type=\"submit\" disabled={savingCapture}>\n                    {savingCapture ? 'Saving...' : 'Save to Library'}\n                  </button>\n                </div>\n              </form>\n\n              <form className=\"card\" onSubmit={handleSaveNote}>\n                <h2>Daily Orientation Note</h2>\n                <p className=\"subtle\">\n                  {noteDayLabel ? `Current note for ${noteDayLabel}.` : 'Set the note you want to see later today.'}\n                </p>\n                <div className=\"form-group\">\n                  <label htmlFor=\"daily-note\">Note</label>\n                  <textarea id=\"daily-note\" rows={8} value={dailyNote} onChange={(event) => setDailyNote(event.target.value)} />\n                </div>\n                <div className=\"form-actions\">\n                  {noteSavedAt ? <span className=\"pill success\">Saved {new Date(noteSavedAt).toLocaleTimeString()}</span> : null}\n                  <button className=\"primary\" type=\"submit\" disabled={savingNote}>\n                    {savingNote ? 'Saving...' : 'Save Note'}\n                  </button>\n                </div>\n              </form>\n            </div>\n          )}\n        </section>\n      </main>\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport WebHomepage from './WebHomepage';\nimport './styles.css';\n\nReactDOM.createRoot(document.getElementById('root') as HTMLElement).render(\n  <React.StrictMode>\n    <WebHomepage />\n  </React.StrictMode>\n);\n"],"names":["DEFAULT_API_BASE","DAILY_START_HOUR","normalizeApiBase","value","trimmed","loadStoredApiBase","formatHours","seconds","hours","formatDuration","totalMinutes","minutes","formatDayLabel","day","dayKeyFor","date","local","year","month","purposeLabel","purpose","safeDate","parsed","fetchJson","apiBase","path","init","response","payload","message","normalizeUrl","raw","toPercent","total","WebHomepage","pane","setPane","useState","apiBaseInput","setApiBaseInput","setApiBase","loading","setLoading","refreshing","setRefreshing","connected","setConnected","error","setError","now","setNow","wallet","setWallet","summary","setSummary","overview","setOverview","timeOfDay","setTimeOfDay","libraryItems","setLibraryItems","readingItems","setReadingItems","dailyState","setDailyState","captureUrl","setCaptureUrl","captureTitle","setCaptureTitle","captureNote","setCaptureNote","capturePurpose","setCapturePurpose","savingCapture","setSavingCapture","captureError","setCaptureError","dailyNote","setDailyNote","savingNote","setSavingNote","noteSavedAt","setNoteSavedAt","loadHomepage","useCallback","silent","walletData","summaryData","overviewData","timeData","libraryData","readingData","onboardingData","loadError","useEffect","clockId","refreshId","topContexts","useMemo","activeSeconds","breakdown","bestHour","a","b","shelfItems","candidates","item","reading","merged","max","idx","handleApplyApiBase","handleCaptureSubmit","event","normalized","submitError","handleMarkDone","updated","prev","entry","markError","handleSaveNote","nextState","saveError","noteDayLabel","jsxs","jsx","context","insight","ReactDOM","React"],"mappings":"2DAuBA,MAAMA,EAAmB,yBACnBC,GAAmB,EAEzB,SAASC,GAAiBC,EAAe,CACvC,MAAMC,EAAUD,EAAM,KAAA,EACtB,OAAKC,EACEA,EAAQ,SAAS,GAAG,EAAIA,EAAQ,MAAM,EAAG,EAAE,EAAIA,EADjCJ,CAEvB,CAEA,SAASK,IAAoB,CAC3B,GAAI,CACF,OAAOH,GAAiB,OAAO,aAAa,QAAQ,kBAAkB,GAAKF,CAAgB,CAC7F,MAAQ,CACN,OAAOA,CACT,CACF,CAEA,SAASM,EAAYC,EAAiB,CACpC,MAAMC,EAAQD,EAAU,KACxB,OAAIC,GAAS,GAAW,GAAG,KAAK,MAAMA,CAAK,CAAC,IACrC,GAAGA,EAAM,QAAQ,CAAC,CAAC,GAC5B,CAEA,SAASC,EAAeF,EAAiB,CACvC,MAAMG,EAAe,KAAK,IAAI,EAAG,KAAK,MAAMH,EAAU,EAAE,CAAC,EACnDC,EAAQ,KAAK,MAAME,EAAe,EAAE,EACpCC,EAAUD,EAAe,GAC/B,OAAIF,EAAQ,EAAU,GAAGA,CAAK,KAAKG,CAAO,IACnC,GAAGA,CAAO,GACnB,CAEA,SAASC,GAAeC,EAAa,CAEnC,OADa,IAAI,KAAK,GAAGA,CAAG,WAAW,EAC3B,mBAAmB,CAAA,EAAI,CAAE,QAAS,QAAS,MAAO,QAAS,IAAK,UAAW,CACzF,CAEA,SAASC,GAAUC,EAAY,CAC7B,MAAMC,EAAQ,IAAI,KAAKD,CAAI,EACvBC,EAAM,SAAA,EAAaf,IACrBe,EAAM,QAAQA,EAAM,QAAA,EAAY,CAAC,EAEnC,MAAMC,EAAOD,EAAM,YAAA,EACbE,EAAQ,OAAOF,EAAM,SAAA,EAAa,CAAC,EAAE,SAAS,EAAG,GAAG,EACpDH,EAAM,OAAOG,EAAM,QAAA,CAAS,EAAE,SAAS,EAAG,GAAG,EACnD,MAAO,GAAGC,CAAI,IAAIC,CAAK,IAAIL,CAAG,EAChC,CAEA,SAASM,GAAaC,EAAyB,CAC7C,OAAQA,EAAA,CACN,IAAK,UACH,MAAO,UACT,IAAK,aACH,MAAO,aACT,IAAK,QACH,MAAO,QACT,IAAK,aACH,MAAO,aACT,QACE,OAAOA,CAAA,CAEb,CAEA,SAASC,GAASlB,EAA2B,CAC3C,GAAI,CAACA,EAAO,MAAO,GACnB,MAAMmB,EAAS,KAAK,MAAMnB,CAAK,EAC/B,OAAO,OAAO,SAASmB,CAAM,EAAIA,EAAS,CAC5C,CAEA,eAAeC,EAAaC,EAAiBC,EAAcC,EAAgC,CACzF,MAAMC,EAAW,MAAM,MAAM,GAAGH,CAAO,GAAGC,CAAI,GAAI,CAChD,GAAGC,EACH,QAAS,CACP,eAAgB,mBAChB,GAAIA,GAAM,SAAW,CAAA,CAAC,CACxB,CACD,EACD,GAAI,CAACC,EAAS,GAAI,CAChB,MAAMC,EAAU,MAAMD,EAAS,OAAO,MAAM,IAAM,IAAI,EAChDE,EACJD,GAAW,OAAOA,GAAY,UAAY,UAAWA,GAAW,OAAOA,EAAQ,OAAU,SACrFA,EAAQ,MACR,mBAAmBD,EAAS,MAAM,IACxC,MAAM,IAAI,MAAME,CAAO,CACzB,CACA,OAAOF,EAAS,KAAA,CAClB,CAEA,SAASG,GAAaC,EAAa,CACjC,MAAM3B,EAAU2B,EAAI,KAAA,EACpB,OAAK3B,EACDA,EAAQ,WAAW,SAAS,GAAKA,EAAQ,WAAW,UAAU,EAAUA,EACrE,WAAWA,CAAO,GAFJ,IAGvB,CAEA,SAAS4B,EAAU7B,EAAe8B,EAAe,CAC/C,MAAI,CAAC,OAAO,SAASA,CAAK,GAAKA,GAAS,EAAU,EAC3C,KAAK,IAAI,EAAG,KAAK,IAAI,IAAK,KAAK,MAAO9B,EAAQ8B,EAAS,GAAG,CAAC,CAAC,CACrE,CAEA,SAAwBC,IAAc,CACpC,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAe,MAAM,EACvC,CAACC,EAAcC,CAAe,EAAIF,EAAAA,SAAShC,EAAiB,EAC5D,CAACmB,EAASgB,CAAU,EAAIH,EAAAA,SAAShC,EAAiB,EAClD,CAACoC,EAASC,CAAU,EAAIL,EAAAA,SAAS,EAAI,EACrC,CAACM,GAAYC,CAAa,EAAIP,EAAAA,SAAS,EAAK,EAC5C,CAACQ,EAAWC,CAAY,EAAIT,EAAAA,SAAS,EAAK,EAC1C,CAACU,EAAOC,CAAQ,EAAIX,EAAAA,SAAwB,IAAI,EAChD,CAACY,GAAKC,EAAM,EAAIb,EAAAA,SAAS,KAAK,KAAK,EAEnC,CAACc,EAAQC,EAAS,EAAIf,EAAAA,SAAyB,CAAE,QAAS,EAAG,EAC7D,CAACgB,EAASC,EAAU,EAAIjB,EAAAA,SAAiC,IAAI,EAC7D,CAACkB,EAAUC,EAAW,EAAInB,EAAAA,SAAmC,IAAI,EACjE,CAACoB,EAAWC,EAAY,EAAIrB,EAAAA,SAA2B,CAAA,CAAE,EACzD,CAACsB,EAAcC,CAAe,EAAIvB,EAAAA,SAAwB,CAAA,CAAE,EAC5D,CAACwB,EAAcC,EAAe,EAAIzB,EAAAA,SAA6B,CAAA,CAAE,EACjE,CAAC0B,EAAYC,CAAa,EAAI3B,EAAAA,SAAsC,IAAI,EAExE,CAAC4B,EAAYC,CAAa,EAAI7B,EAAAA,SAAS,EAAE,EACzC,CAAC8B,EAAcC,CAAe,EAAI/B,EAAAA,SAAS,EAAE,EAC7C,CAACgC,EAAaC,CAAc,EAAIjC,EAAAA,SAAS,EAAE,EAC3C,CAACkC,EAAgBC,CAAiB,EAAInC,EAAAA,SAAyB,SAAS,EACxE,CAACoC,EAAeC,CAAgB,EAAIrC,EAAAA,SAAS,EAAK,EAClD,CAACsC,EAAcC,CAAe,EAAIvC,EAAAA,SAAwB,IAAI,EAE9D,CAACwC,EAAWC,CAAY,EAAIzC,EAAAA,SAAS,EAAE,EACvC,CAAC0C,EAAYC,CAAa,EAAI3C,EAAAA,SAAS,EAAK,EAC5C,CAAC4C,EAAaC,EAAc,EAAI7C,EAAAA,SAAwB,IAAI,EAE5D8C,EAAeC,EAAAA,YACnB,MAAOC,EAAS,KAAU,CACnBA,GAAQ3C,EAAW,EAAI,EAC5BE,EAAc,EAAI,EAClBI,EAAS,IAAI,EACb,GAAI,CACF,MAAMzB,EAA8BC,EAAS,SAAS,EACtD,KAAM,CAAC8D,EAAYC,EAAaC,EAAcC,EAAUC,EAAaC,GAAaC,EAAc,EAAI,MAAM,QAAQ,IAAI,CACpHrE,EAA0BC,EAAS,SAAS,EAC5CD,EAA2BC,EAAS,oCAAoC,EACxED,EAA6BC,EAAS,4BAA4B,EAClED,EAA4BC,EAAS,+BAA+B,EACpED,EAAyBC,EAAS,UAAU,EAC5CD,EAAyCC,EAAS,+BAA+B,EACjFD,EAAgCC,EAAS,4BAA4B,CAAA,CACtE,EACD4B,GAAUkC,CAAU,EACpBhC,GAAWiC,CAAW,EACtB/B,GAAYgC,CAAY,EACxB9B,GAAa+B,CAAQ,EACrB7B,EAAgB8B,CAAW,EAC3B5B,GAAgB6B,GAAY,OAAS,EAAE,EACvC3B,EAAc4B,EAAc,EAC5Bd,EAAac,GAAe,MAAM,SAAW,EAAE,EAC/C9C,EAAa,EAAI,CACnB,OAAS+C,EAAW,CAClB/C,EAAa,EAAK,EAClBE,EAAU6C,EAAoB,SAAW,+BAA+B,CAC1E,QAAA,CACEnD,EAAW,EAAK,EAChBE,EAAc,EAAK,CACrB,CACF,EACA,CAACpB,CAAO,CAAA,EAGVsE,EAAAA,UAAU,IAAM,CACdX,EAAA,CACF,EAAG,CAACA,CAAY,CAAC,EAEjBW,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAU,OAAO,YAAY,IAAM7C,GAAO,KAAK,KAAK,EAAG,GAAM,EACnE,MAAO,IAAM,OAAO,cAAc6C,CAAO,CAC3C,EAAG,CAAA,CAAE,EAELD,EAAAA,UAAU,IAAM,CACd,MAAME,EAAY,OAAO,YAAY,IAAMb,EAAa,EAAI,EAAG,IAAM,EACrE,MAAO,IAAM,OAAO,cAAca,CAAS,CAC7C,EAAG,CAACb,CAAY,CAAC,EAEjBW,EAAAA,UAAU,IAAM,CACd,GAAI,CACF,OAAO,aAAa,QAAQ,mBAAoBtE,CAAO,CACzD,MAAQ,CAER,CACF,EAAG,CAACA,CAAO,CAAC,EAEZ,MAAMyE,GAAcC,EAAAA,QAAQ,IAAM7C,GAAS,aAAa,MAAM,EAAG,CAAC,GAAK,GAAI,CAACA,CAAO,CAAC,EAC9E8C,EAAgBD,EAAAA,QAAQ,IAAM,CAClC,MAAME,EAAY7C,GAAU,kBAC5B,OAAK6C,EACEA,EAAU,WAAaA,EAAU,QAAUA,EAAU,UAAYA,EAAU,SAAWA,EAAU,KADhF,CAEzB,EAAG,CAAC7C,CAAQ,CAAC,EAEP8C,GAAWH,EAAAA,QAAQ,IAClBzC,EAAU,OACR,CAAC,GAAGA,CAAS,EAAE,KAAK,CAAC6C,EAAGC,IAAMA,EAAE,WAAaD,EAAE,UAAU,EAAE,CAAC,GAAK,KAD1C,KAE7B,CAAC7C,CAAS,CAAC,EAER+C,GAAaN,EAAAA,QAAQ,IAAM,CAC/B,MAAMO,EAAa9C,EAChB,OAAQ+C,GAASA,EAAK,OAAS,OAAS,CAACA,EAAK,UAAU,EACxD,KAAK,CAACJ,EAAGC,IAAMlF,GAASiF,EAAE,YAAcA,EAAE,SAAS,EAAIjF,GAASkF,EAAE,YAAcA,EAAE,SAAS,CAAC,EAC5F,MAAM,EAAG,CAAC,EACV,IAAKG,IAAU,CACd,GAAI,WAAWA,EAAK,EAAE,GACtB,KAAM,UACN,MAAOA,EAAK,OAASA,EAAK,OAC1B,SAAUA,EAAK,MAAQA,EAAK,KAAOA,EAAK,OACxC,IAAKA,EAAK,IACV,QAASA,EAAK,QACd,UAAWA,EAAK,EAAA,EAChB,EAEEC,EAAU9C,EAAa,MAAM,EAAG,CAAC,EAAE,IAAK6C,IAAU,CACtD,GAAI,WAAWA,EAAK,EAAE,GACtB,KAAM,UACN,MAAOA,EAAK,MACZ,SAAUA,EAAK,UAAYA,EAAK,OAAO,YAAA,EACvC,IAAKA,EAAK,OAAO,OAAS,WAAaA,EAAK,OAAO,IAAM,OACzD,OAAQA,EAAK,OACb,SAAUA,EAAK,QAAA,EACf,EAEIE,EAAwE,CAAA,EACxEC,EAAM,KAAK,IAAIJ,EAAW,OAAQE,EAAQ,MAAM,EACtD,QAASG,EAAM,EAAGA,EAAMD,EAAKC,GAAO,EAC9BL,EAAWK,CAAG,KAAU,KAAKL,EAAWK,CAAG,CAAC,EAC5CH,EAAQG,CAAG,KAAU,KAAKH,EAAQG,CAAG,CAAC,EAE5C,OAAOF,EAAO,MAAM,EAAG,CAAC,CAC1B,EAAG,CAACjD,EAAcE,CAAY,CAAC,EAEzBkD,GAAqB,IAAM,CAC/BvE,EAAWtC,GAAiBoC,CAAY,CAAC,CAC3C,EAEM0E,GAAsB,MAAOC,GAAqB,CACtDA,EAAM,eAAA,EACNrC,EAAgB,IAAI,EACpB,MAAMsC,EAAapF,GAAamC,CAAU,EAC1C,GAAI,CAACiD,EAAY,CACftC,EAAgB,oBAAoB,EACpC,MACF,CACAF,EAAiB,EAAI,EACrB,GAAI,CACF,MAAMnD,EAAuBC,EAAS,WAAY,CAChD,OAAQ,OACR,KAAM,KAAK,UAAU,CACnB,KAAM,MACN,IAAK0F,EACL,MAAO/C,EAAa,KAAA,GAAU,OAC9B,KAAME,EAAY,KAAA,GAAU,OAC5B,QAASE,CAAA,CACV,CAAA,CACF,EACDL,EAAc,EAAE,EAChBE,EAAgB,EAAE,EAClBE,EAAe,EAAE,EACjBE,EAAkB,SAAS,EAC3B,MAAMW,EAAa,EAAI,EACvB/C,EAAQ,SAAS,CACnB,OAAS+E,EAAa,CACpBvC,EAAiBuC,EAAsB,SAAW,iBAAiB,CACrE,QAAA,CACEzC,EAAiB,EAAK,CACxB,CACF,EAEM0C,GAAiB,MAAOV,GAAsB,CAClD,GAAI,GAACA,EAAK,IAAMA,EAAK,YACrB,GAAI,CACF,MAAMW,EAAU,MAAM9F,EAAuBC,EAAS,YAAYkF,EAAK,EAAE,GAAI,CAC3E,OAAQ,QACR,KAAM,KAAK,UAAU,CACnB,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,CACpC,CAAA,CACF,EACD9C,EAAiB0D,GAASA,EAAK,IAAKC,GAAWA,EAAM,KAAOF,EAAQ,GAAKA,EAAUE,CAAM,CAAC,CAC5F,OAASC,EAAW,CAClBxE,EAAUwE,EAAoB,SAAW,+BAA+B,CAC1E,CACF,EAEMC,GAAiB,MAAOR,GAAqB,CACjDA,EAAM,eAAA,EACNjC,EAAc,EAAI,EAClB,GAAI,CACF,MAAMnE,EAAMC,GAAU,IAAI,IAAM,EAC1Be,EAAUgD,EAAU,KAAA,EACpB6C,EAAY,MAAMnG,EAAgCC,EAAS,6BAA8B,CAC7F,OAAQ,OACR,KAAM,KAAK,UAAU,CACnB,gBAAiBX,EACjB,KAAMgB,EACF,CACE,IAAAhB,EACA,QAAAgB,EACA,YAAa,KACb,aAAc,EAAA,EAEhB,IAAA,CACL,CAAA,CACF,EACDmC,EAAc0D,CAAS,EACvB5C,EAAa4C,EAAU,MAAM,SAAW,EAAE,EAC1CxC,GAAe,KAAK,KAAK,CAC3B,OAASyC,EAAW,CAClB3E,EAAU2E,EAAoB,SAAW,sBAAsB,CACjE,QAAA,CACE3C,EAAc,EAAK,CACrB,CACF,EAEM4C,GAAe7D,GAAY,MAAM,IAAMnD,GAAemD,EAAW,KAAK,GAAG,EAAI,KAEnF,OACE8D,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,sBAAsB,cAAW,GAC9C,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,WAAA,CAAY,EAC3BA,EAAAA,IAAC,QAAK,SAAA,wBAAA,CAAsB,CAAA,EAC9B,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAW,QAAQjF,EAAY,UAAY,QAAQ,GAAK,SAAAA,EAAY,gBAAkB,aAAA,CAAc,EAC1GgF,EAAAA,KAAC,OAAA,CAAK,UAAU,iBAAkB,SAAA,CAAA1E,EAAO,QAAQ,UAAA,CAAA,CAAQ,CAAA,CAAA,CAC3D,CAAA,EACF,EAEA0E,EAAAA,KAAC,QAAA,CAAM,UAAU,UACf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,QACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,OAAO,SAAA,IAAC,EACvBA,EAAAA,IAAC,QAAK,SAAA,UAAA,CAAQ,CAAA,EAChB,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAO,UAAW3F,IAAS,OAAS,SAAW,GAAI,QAAS,IAAMC,EAAQ,MAAM,EAAG,SAAA,MAAA,CAEpF,EACA0F,EAAAA,IAAC,SAAA,CAAO,UAAW3F,IAAS,UAAY,SAAW,GAAI,QAAS,IAAMC,EAAQ,SAAS,EAAG,SAAA,SAAA,CAE1F,EACA0F,EAAAA,IAAC,SAAA,CAAO,UAAW3F,IAAS,UAAY,SAAW,GAAI,QAAS,IAAMC,EAAQ,SAAS,EAAG,SAAA,SAAA,CAE1F,CAAA,EACF,EAEAyF,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,UACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,KAAE,EACzBA,EAAAA,IAAC,OAAA,CAAK,UAAU,SAAU,WAAO,OAAA,CAAQ,CAAA,EAC3C,EACAA,EAAAA,IAAC,OAAI,UAAU,OAAQ,WAAW,GAAGvE,EAAS,iBAAiB,eAAiB,yBAAA,CAA0B,CAAA,EAC5G,EAEAsE,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,QAAQ,WAAW,SAAA,YAAS,EACnCA,EAAAA,IAAC,QAAA,CACC,GAAG,WACH,MAAOxF,EACP,SAAW2E,GAAU1E,EAAgB0E,EAAM,OAAO,KAAK,EACvD,YAAajH,CAAA,CAAA,EAEf8H,EAAAA,IAAC,UAAO,UAAU,UAAU,KAAK,SAAS,QAASf,GAAoB,SAAA,SAAA,CAEvE,CAAA,CAAA,CACF,CAAA,EACF,QAEC,OAAA,CAAK,UAAU,wBACd,SAAAc,EAAAA,KAAC,UAAA,CAAQ,UAAU,QACjB,SAAA,CAAAA,EAAAA,KAAC,SAAA,CAAO,UAAU,eAChB,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,cAAA,CAAY,EAChBA,EAAAA,IAAC,IAAA,CAAE,UAAU,SAAS,SAAA,8DAAA,CAA4D,CAAA,EACpF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qBACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,UAAU,aAAc,SAAA,IAAI,KAAK7E,EAAG,EAAE,eAAe,CAAA,EAAI,CAAE,UAAW,SAAU,UAAW,OAAA,CAAS,EAAE,EAC5G6E,EAAAA,IAAC,SAAA,CAAO,KAAK,SAAS,QAAS,IAAM3C,EAAA,EAClC,SAAAxC,GAAa,gBAAkB,SAAA,CAClC,CAAA,CAAA,CACF,CAAA,EACF,EAECI,GAAS+E,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAyB,SAAA/E,EAAM,EACvDN,EAAUqF,EAAAA,IAAC,MAAA,CAAI,UAAU,OAAO,+BAAmB,EAAS,KAE5D,CAACrF,GAAWN,IAAS,QACpB0F,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAA,EAAAA,KAAC,UAAA,CAAQ,UAAU,OACjB,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,eAAA,CAAa,EACjBA,EAAAA,IAAC,QAAK,UAAU,aAAc,WAAW,GAAGvE,EAAS,UAAU,SAAW,YAAA,CAAa,CAAA,EACzF,EACAsE,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,SAAS,SAAA,SAAM,QAC9B,SAAA,CAAQ,SAAAzE,EAAU5C,EAAe4C,EAAQ,YAAY,EAAI,IAAA,CAAK,CAAA,EACjE,EACAwE,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,SAAS,SAAA,YAAS,QACjC,SAAA,CAAQ,SAAAzE,EAAU5C,EAAe4C,EAAQ,eAAe,EAAI,IAAA,CAAK,CAAA,EACpE,EACAwE,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,SAAS,SAAA,cAAW,EACpCA,EAAAA,IAAC,SAAA,CAAQ,SAAAvE,EAAWA,EAAS,kBAAoB,CAAA,CAAE,CAAA,EACrD,EACAsE,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,SAAS,SAAA,WAAQ,EACjCA,EAAAA,IAAC,SAAA,CAAQ,SAAAvE,EAAWA,EAAS,cAAgB,CAAA,CAAE,CAAA,CAAA,CACjD,CAAA,EACF,EACAsE,EAAAA,KAAC,MAAA,CAAI,UAAU,eACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,eAAe,SAAA,CAAA,QAAMtE,EAAW,GAAGA,EAAS,kBAAkB,MAAQ,IAAA,EAAK,EAC3FsE,EAAAA,KAAC,OAAA,CAAK,UAAU,eAAe,SAAA,CAAA,QAAMtE,EAAW,GAAGA,EAAS,QAAQ,MAAQ,IAAA,EAAK,EACjFuE,EAAAA,IAAC,QAAK,UAAU,aAAc,YAAW,cAAczB,GAAS,IAAI,MAAQ,cAAA,CAAe,CAAA,CAAA,CAC7F,CAAA,EACF,EAEAwB,EAAAA,KAAC,UAAA,CAAQ,UAAU,OACjB,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,eAAA,CAAa,EACjBD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,YAAA,CAAU,QACf,SAAA,CAAQ,SAAAxH,EAAYiD,GAAU,kBAAkB,YAAc,CAAC,CAAA,CAAE,CAAA,EACpE,QACC,MAAA,CAAI,UAAU,mBACb,SAAAuE,MAAC,OAAA,CAAK,MAAO,CAAE,MAAO,GAAG9F,EAAUuB,GAAU,kBAAkB,YAAc,EAAG4C,CAAa,CAAC,GAAA,EAAO,CAAA,CACvG,CAAA,EACF,EACA0B,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,SAAA,CAAO,QACZ,SAAA,CAAQ,SAAAxH,EAAYiD,GAAU,kBAAkB,SAAW,CAAC,CAAA,CAAE,CAAA,EACjE,QACC,MAAA,CAAI,UAAU,2BACb,SAAAuE,MAAC,OAAA,CAAK,MAAO,CAAE,MAAO,GAAG9F,EAAUuB,GAAU,kBAAkB,SAAW,EAAG4C,CAAa,CAAC,GAAA,EAAO,CAAA,CACpG,CAAA,EACF,EACA0B,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,WAAA,CAAS,QACd,SAAA,CAAQ,SAAAxH,EAAYiD,GAAU,kBAAkB,WAAa,CAAC,CAAA,CAAE,CAAA,EACnE,QACC,MAAA,CAAI,UAAU,6BACb,SAAAuE,MAAC,OAAA,CAAK,MAAO,CAAE,MAAO,GAAG9F,EAAUuB,GAAU,kBAAkB,WAAa,EAAG4C,CAAa,CAAC,GAAA,EAAO,CAAA,CACtG,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEA0B,EAAAA,KAAC,UAAA,CAAQ,UAAU,OACjB,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,cAAA,CAAY,EACf7B,GAAY,OACX6B,EAAAA,IAAC,KAAA,CAAG,UAAU,WACX,SAAA7B,GAAY,IAAK8B,GAChBF,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAQ,WAAQ,KAAA,CAAM,QACtB,OAAA,CAAK,UAAU,SAAU,SAAAC,EAAQ,UAAY,eAAA,CAAgB,CAAA,EAChE,EACAD,EAAAA,IAAC,OAAA,CAAM,SAAArH,EAAesH,EAAQ,OAAO,CAAA,CAAE,CAAA,CAAA,EALhC,GAAGA,EAAQ,KAAK,IAAIA,EAAQ,OAAO,EAM5C,CACD,CAAA,CACH,EAEAD,EAAAA,IAAC,IAAA,CAAE,UAAU,SAAS,SAAA,sBAAA,CAAoB,CAAA,EAE9C,EAEAD,EAAAA,KAAC,UAAA,CAAQ,UAAU,OACjB,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,eAAA,CAAa,EAChBtB,GAAW,OACVsB,EAAAA,IAAC,KAAA,CAAG,UAAU,WACX,SAAAtB,GAAW,IAAKE,GACfmB,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAQ,WAAK,KAAA,CAAM,EACpBA,EAAAA,IAAC,OAAA,CAAK,UAAU,SAAU,WAAK,QAAA,CAAS,CAAA,EAC1C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACZ,SAAA,CAAAnB,EAAK,OAAS,UAAYoB,EAAAA,IAAC,OAAA,CAAK,UAAU,aAAc,SAAA3G,GAAauF,EAAK,OAAO,CAAA,CAAE,EAAU,KAC7FA,EAAK,OAAS,WAAa,OAAOA,EAAK,UAAa,SACnDmB,EAAAA,KAAC,OAAA,CAAK,UAAU,aAAc,SAAA,CAAA,KAAK,MAAMnB,EAAK,SAAW,GAAG,EAAE,GAAA,CAAA,CAAC,EAC7D,KACHA,EAAK,IACJoB,EAAAA,IAAC,IAAA,CAAE,KAAMpB,EAAK,IAAK,OAAO,SAAS,IAAI,aAAa,SAAA,MAAA,CAEpD,QAEC,OAAA,CAAK,UAAU,SAAS,SAAA,cAAA,CAAY,CAAA,CAAA,CAEzC,CAAA,CAAA,EAjBOA,EAAK,EAkBd,CACD,CAAA,CACH,EAEAoB,EAAAA,IAAC,IAAA,CAAE,UAAU,SAAS,SAAA,6BAAA,CAA2B,CAAA,EAErD,EAEAD,EAAAA,KAAC,UAAA,CAAQ,UAAU,sBACjB,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,sBAAA,CAAoB,EACvBvE,GAAU,UAAU,OACnBuE,EAAAA,IAAC,MAAG,UAAU,mBACX,SAAAvE,EAAS,SAAS,IAAKyE,GACtBF,EAAAA,IAAC,KAAA,CAAkB,SAAAE,GAAVA,CAAkB,CAC5B,CAAA,CACH,EAEAF,EAAAA,IAAC,IAAA,CAAE,UAAU,SAAS,SAAA,yDAAA,CAAuD,CAAA,CAAA,CAEjF,CAAA,EACF,EAGD,CAACrF,GAAWN,IAAS,WACpB0F,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,SAAA,CAAO,EACXD,EAAAA,KAAC,OAAA,CAAK,UAAU,aAAc,SAAA,CAAAlE,EAAa,OAAO,QAAA,CAAA,CAAM,CAAA,EAC1D,EACCA,EAAa,OACZmE,MAAC,KAAA,CAAG,UAAU,WACX,SAAAnE,EAAa,MAAM,EAAG,EAAE,EAAE,IAAK+C,UAC7B,KAAA,CACC,SAAA,CAAAmB,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAQ,SAAApB,EAAK,OAASA,EAAK,OAAO,EACnCmB,EAAAA,KAAC,OAAA,CAAK,UAAU,SACb,SAAA,CAAA1G,GAAauF,EAAK,OAAO,EACzBA,EAAK,WAAa,WAAW,IAAI,KAAKA,EAAK,UAAU,EAAE,mBAAA,CAAoB,GAAK,EAAA,CAAA,CACnF,CAAA,EACF,EACAmB,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACZ,SAAA,CAAAnB,EAAK,IACJoB,EAAAA,IAAC,IAAA,CAAE,KAAMpB,EAAK,IAAK,OAAO,SAAS,IAAI,aAAa,SAAA,MAAA,CAEpD,EACE,KACFA,EAAK,WAIH,KAHFoB,EAAAA,IAAC,SAAA,CAAO,KAAK,SAAS,QAAS,IAAMV,GAAeV,CAAI,EAAG,gBAE3D,CACE,CAAA,CACN,CAAA,CAAA,EAnBOA,EAAK,EAoBd,CACD,CAAA,CACH,EAEAoB,EAAAA,IAAC,IAAA,CAAE,UAAU,SAAS,SAAA,qDAAA,CAAmD,CAAA,EAE7E,EAGD,CAACrF,GAAWN,IAAS,WACpB0F,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,OAAO,SAAUb,GAC/B,SAAA,CAAAc,EAAAA,IAAC,MAAG,SAAA,eAAA,CAAa,EACjBD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,QAAQ,cAAc,SAAA,MAAG,EAChCA,EAAAA,IAAC,QAAA,CACC,GAAG,cACH,MAAO7D,EACP,SAAWgD,GAAU/C,EAAc+C,EAAM,OAAO,KAAK,EACrD,YAAY,aAAA,CAAA,CACd,EACF,EACAY,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,QAAQ,gBAAgB,SAAA,mBAAgB,EAC/CA,EAAAA,IAAC,QAAA,CACC,GAAG,gBACH,MAAO3D,EACP,SAAW8C,GAAU7C,EAAgB6C,EAAM,OAAO,KAAK,CAAA,CAAA,CACzD,EACF,EACAY,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,QAAQ,kBAAkB,SAAA,UAAO,EACxCD,EAAAA,KAAC,SAAA,CACC,GAAG,kBACH,MAAOtD,EACP,SAAW0C,GAAUzC,EAAkByC,EAAM,OAAO,KAAuB,EAE3E,SAAA,CAAAa,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,UAAO,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,aAAa,SAAA,aAAU,EACrCA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,QAAK,EAC3BA,EAAAA,IAAC,SAAA,CAAO,MAAM,aAAa,SAAA,YAAA,CAAU,CAAA,CAAA,CAAA,CACvC,CAAA,CACF,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,QAAQ,eAAe,SAAA,kBAAe,EAC7CA,EAAAA,IAAC,WAAA,CACC,GAAG,eACH,KAAM,EACN,MAAOzD,EACP,SAAW4C,GAAU3C,EAAe2C,EAAM,OAAO,KAAK,CAAA,CAAA,CACxD,EACF,EACCtC,EAAemD,EAAAA,IAAC,IAAA,CAAE,UAAU,SAAU,WAAa,EAAO,KAC3DA,MAAC,MAAA,CAAI,UAAU,eACb,eAAC,SAAA,CAAO,UAAU,UAAU,KAAK,SAAS,SAAUrD,EACjD,SAAAA,EAAgB,YAAc,kBACjC,CAAA,CACF,CAAA,EACF,EAEAoD,EAAAA,KAAC,OAAA,CAAK,UAAU,OAAO,SAAUJ,GAC/B,SAAA,CAAAK,EAAAA,IAAC,MAAG,SAAA,wBAAA,CAAsB,EAC1BA,EAAAA,IAAC,KAAE,UAAU,SACV,YAAe,oBAAoBF,EAAY,IAAM,2CAAA,CACxD,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,QAAQ,aAAa,SAAA,OAAI,EAChCA,EAAAA,IAAC,WAAA,CAAS,GAAG,aAAa,KAAM,EAAG,MAAOjD,EAAW,SAAWoC,GAAUnC,EAAamC,EAAM,OAAO,KAAK,CAAA,CAAG,CAAA,EAC9G,EACAY,EAAAA,KAAC,MAAA,CAAI,UAAU,eACZ,SAAA,CAAA5C,EAAc4C,EAAAA,KAAC,OAAA,CAAK,UAAU,eAAe,SAAA,CAAA,SAAO,IAAI,KAAK5C,CAAW,EAAE,mBAAA,CAAmB,CAAA,CAAE,EAAU,KAC1G6C,EAAAA,IAAC,SAAA,CAAO,UAAU,UAAU,KAAK,SAAS,SAAU/C,EACjD,SAAAA,EAAa,YAAc,WAAA,CAC9B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,EACF,CAEJ,CCxoBAkD,GAAS,WAAW,SAAS,eAAe,MAAM,CAAgB,EAAE,aACjEC,GAAM,WAAN,CACC,SAAAJ,MAAC5F,KAAY,CAAA,CACf,CACF"}