{"version":3,"file":"preload.js","sources":["../../src/main/preload.ts"],"sourcesContent":["import { contextBridge, ipcRenderer } from 'electron';\nimport type { IpcRendererEvent } from 'electron';\nimport type { RendererApi } from '@shared/types';\n\nconst api: RendererApi = {\n  wallet: {\n    get: () => ipcRenderer.invoke('wallet:get'),\n    earn: (amount, meta) => ipcRenderer.invoke('wallet:earn', { amount, meta }),\n    spend: (amount, meta) => ipcRenderer.invoke('wallet:spend', { amount, meta })\n  },\n  focus: {\n    start: (duration) => ipcRenderer.invoke('focus:start', { duration }),\n    stop: (completed) => ipcRenderer.invoke('focus:stop', { completed }),\n    onTick: (callback) => {\n      const listener = (_event: IpcRendererEvent, payload: { remaining: number; progress: number }) => {\n        callback(payload);\n      };\n      ipcRenderer.on('focus:tick', listener);\n      return () => {\n        ipcRenderer.removeListener('focus:tick', listener);\n      };\n    }\n  },\n  activities: {\n    recent: (limit) => ipcRenderer.invoke('activities:recent', { limit }),\n    summary: (windowHours) => ipcRenderer.invoke('activities:summary', { windowHours })\n  },\n  market: {\n    list: () => ipcRenderer.invoke('market:list'),\n    upsert: (rate) => ipcRenderer.invoke('market:update', rate),\n    delete: (domain) => ipcRenderer.invoke('market:delete', { domain })\n  },\n  intentions: {\n    list: (date) => ipcRenderer.invoke('intentions:list', { date }),\n    add: (payload) => ipcRenderer.invoke('intentions:add', payload),\n    toggle: (id, completed) => ipcRenderer.invoke('intentions:toggle', { id, completed }),\n    remove: (id) => ipcRenderer.invoke('intentions:remove', { id })\n  },\n  budgets: {\n    list: () => ipcRenderer.invoke('budgets:list'),\n    add: (payload) => ipcRenderer.invoke('budgets:add', payload),\n    remove: (id) => ipcRenderer.invoke('budgets:remove', { id })\n  },\n  economy: {\n    state: () => ipcRenderer.invoke('economy:state'),\n    setNeutralClock: (enabled) => ipcRenderer.invoke('economy:neutral-clock', { enabled })\n  },\n  paywall: {\n    startMetered: (domain) => ipcRenderer.invoke('paywall:start-metered', { domain }),\n    buyPack: (domain, minutes) => ipcRenderer.invoke('paywall:buy-pack', { domain, minutes }),\n    decline: (domain) => ipcRenderer.invoke('paywall:decline', { domain }),\n    cancelPack: (domain) => ipcRenderer.invoke('paywall:cancel-pack', { domain }),\n    end: (domain, options) => ipcRenderer.invoke('paywall:end', { domain, refundUnused: options?.refundUnused }),\n    sessions: () => ipcRenderer.invoke('paywall:sessions'),\n    pause: (domain) => ipcRenderer.invoke('paywall:pause', { domain }),\n    resume: (domain) => ipcRenderer.invoke('paywall:resume', { domain })\n  },\n  settings: {\n    categorisation: () => ipcRenderer.invoke('settings:categorisation'),\n    updateCategorisation: (value) => ipcRenderer.invoke('settings:update-categorisation', value),\n    idleThreshold: () => ipcRenderer.invoke('settings:idle-threshold'),\n    updateIdleThreshold: (value) => ipcRenderer.invoke('settings:update-idle-threshold', value)\n  },\n  events: {\n    on: (channel, callback) => {\n      const listener = (_event: IpcRendererEvent, payload: unknown) => callback(payload);\n      ipcRenderer.on(channel, listener);\n      return () => ipcRenderer.removeListener(channel, listener);\n    }\n  }\n};\n\ncontextBridge.exposeInMainWorld('twsp', api);\n"],"names":["ipcRenderer","contextBridge"],"mappings":";;AAIA,MAAM,MAAmB;AAAA,EACvB,QAAQ;AAAA,IACN,KAAK,MAAMA,SAAAA,YAAY,OAAO,YAAY;AAAA,IAC1C,MAAM,CAAC,QAAQ,SAASA,SAAAA,YAAY,OAAO,eAAe,EAAE,QAAQ,MAAM;AAAA,IAC1E,OAAO,CAAC,QAAQ,SAASA,SAAAA,YAAY,OAAO,gBAAgB,EAAE,QAAQ,KAAA,CAAM;AAAA,EAAA;AAAA,EAE9E,OAAO;AAAA,IACL,OAAO,CAAC,aAAaA,SAAAA,YAAY,OAAO,eAAe,EAAE,UAAU;AAAA,IACnE,MAAM,CAAC,cAAcA,SAAAA,YAAY,OAAO,cAAc,EAAE,WAAW;AAAA,IACnE,QAAQ,CAAC,aAAa;AACpB,YAAM,WAAW,CAAC,QAA0B,YAAqD;AAC/F,iBAAS,OAAO;AAAA,MAClB;AACAA,2BAAY,GAAG,cAAc,QAAQ;AACrC,aAAO,MAAM;AACXA,6BAAY,eAAe,cAAc,QAAQ;AAAA,MACnD;AAAA,IACF;AAAA,EAAA;AAAA,EAEF,YAAY;AAAA,IACV,QAAQ,CAAC,UAAUA,SAAAA,YAAY,OAAO,qBAAqB,EAAE,OAAO;AAAA,IACpE,SAAS,CAAC,gBAAgBA,SAAAA,YAAY,OAAO,sBAAsB,EAAE,aAAa;AAAA,EAAA;AAAA,EAEpF,QAAQ;AAAA,IACN,MAAM,MAAMA,SAAAA,YAAY,OAAO,aAAa;AAAA,IAC5C,QAAQ,CAAC,SAASA,SAAAA,YAAY,OAAO,iBAAiB,IAAI;AAAA,IAC1D,QAAQ,CAAC,WAAWA,SAAAA,YAAY,OAAO,iBAAiB,EAAE,QAAQ;AAAA,EAAA;AAAA,EAEpE,YAAY;AAAA,IACV,MAAM,CAAC,SAASA,SAAAA,YAAY,OAAO,mBAAmB,EAAE,MAAM;AAAA,IAC9D,KAAK,CAAC,YAAYA,SAAAA,YAAY,OAAO,kBAAkB,OAAO;AAAA,IAC9D,QAAQ,CAAC,IAAI,cAAcA,SAAAA,YAAY,OAAO,qBAAqB,EAAE,IAAI,WAAW;AAAA,IACpF,QAAQ,CAAC,OAAOA,SAAAA,YAAY,OAAO,qBAAqB,EAAE,IAAI;AAAA,EAAA;AAAA,EAEhE,SAAS;AAAA,IACP,MAAM,MAAMA,SAAAA,YAAY,OAAO,cAAc;AAAA,IAC7C,KAAK,CAAC,YAAYA,SAAAA,YAAY,OAAO,eAAe,OAAO;AAAA,IAC3D,QAAQ,CAAC,OAAOA,SAAAA,YAAY,OAAO,kBAAkB,EAAE,IAAI;AAAA,EAAA;AAAA,EAE7D,SAAS;AAAA,IACP,OAAO,MAAMA,SAAAA,YAAY,OAAO,eAAe;AAAA,IAC/C,iBAAiB,CAAC,YAAYA,SAAAA,YAAY,OAAO,yBAAyB,EAAE,SAAS;AAAA,EAAA;AAAA,EAEvF,SAAS;AAAA,IACP,cAAc,CAAC,WAAWA,SAAAA,YAAY,OAAO,yBAAyB,EAAE,QAAQ;AAAA,IAChF,SAAS,CAAC,QAAQ,YAAYA,SAAAA,YAAY,OAAO,oBAAoB,EAAE,QAAQ,SAAS;AAAA,IACxF,SAAS,CAAC,WAAWA,SAAAA,YAAY,OAAO,mBAAmB,EAAE,QAAQ;AAAA,IACrE,YAAY,CAAC,WAAWA,SAAAA,YAAY,OAAO,uBAAuB,EAAE,QAAQ;AAAA,IAC5E,KAAK,CAAC,QAAQ,YAAYA,SAAAA,YAAY,OAAO,eAAe,EAAE,QAAQ,cAAc,mCAAS,aAAA,CAAc;AAAA,IAC3G,UAAU,MAAMA,SAAAA,YAAY,OAAO,kBAAkB;AAAA,IACrD,OAAO,CAAC,WAAWA,SAAAA,YAAY,OAAO,iBAAiB,EAAE,QAAQ;AAAA,IACjE,QAAQ,CAAC,WAAWA,SAAAA,YAAY,OAAO,kBAAkB,EAAE,QAAQ;AAAA,EAAA;AAAA,EAErE,UAAU;AAAA,IACR,gBAAgB,MAAMA,SAAAA,YAAY,OAAO,yBAAyB;AAAA,IAClE,sBAAsB,CAAC,UAAUA,SAAAA,YAAY,OAAO,kCAAkC,KAAK;AAAA,IAC3F,eAAe,MAAMA,SAAAA,YAAY,OAAO,yBAAyB;AAAA,IACjE,qBAAqB,CAAC,UAAUA,SAAAA,YAAY,OAAO,kCAAkC,KAAK;AAAA,EAAA;AAAA,EAE5F,QAAQ;AAAA,IACN,IAAI,CAAC,SAAS,aAAa;AACzB,YAAM,WAAW,CAAC,QAA0B,YAAqB,SAAS,OAAO;AACjFA,2BAAY,GAAG,SAAS,QAAQ;AAChC,aAAO,MAAMA,SAAAA,YAAY,eAAe,SAAS,QAAQ;AAAA,IAC3D;AAAA,EAAA;AAEJ;AAEAC,SAAAA,cAAc,kBAAkB,QAAQ,GAAG;"}