(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function Ph(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nu={exports:{}},bl={},su={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ur=Symbol.for("react.element"),Mh=Symbol.for("react.portal"),Th=Symbol.for("react.fragment"),Dh=Symbol.for("react.strict_mode"),_h=Symbol.for("react.profiler"),Lh=Symbol.for("react.provider"),$h=Symbol.for("react.context"),Rh=Symbol.for("react.forward_ref"),Fh=Symbol.for("react.suspense"),Ih=Symbol.for("react.memo"),Ah=Symbol.for("react.lazy"),No=Symbol.iterator;function zh(e){return e===null||typeof e!="object"?null:(e=No&&e[No]||e["@@iterator"],typeof e=="function"?e:null)}var ru={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lu=Object.assign,iu={};function gs(e,t,n){this.props=e,this.context=t,this.refs=iu,this.updater=n||ru}gs.prototype.isReactComponent={};gs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function au(){}au.prototype=gs.prototype;function ga(e,t,n){this.props=e,this.context=t,this.refs=iu,this.updater=n||ru}var ya=ga.prototype=new au;ya.constructor=ga;lu(ya,gs.prototype);ya.isPureReactComponent=!0;var So=Array.isArray,ou=Object.prototype.hasOwnProperty,xa={current:null},cu={key:!0,ref:!0,__self:!0,__source:!0};function uu(e,t,n){var r,l={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)ou.call(t,r)&&!cu.hasOwnProperty(r)&&(l[r]=t[r]);var o=arguments.length-2;if(o===1)l.children=n;else if(1<o){for(var c=Array(o),m=0;m<o;m++)c[m]=arguments[m+2];l.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)l[r]===void 0&&(l[r]=o[r]);return{$$typeof:ur,type:e,key:i,ref:a,props:l,_owner:xa.current}}function Oh(e,t){return{$$typeof:ur,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ja(e){return typeof e=="object"&&e!==null&&e.$$typeof===ur}function Hh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ko=/\/+/g;function Vl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Hh(""+e.key):t.toString(36)}function Br(e,t,n,r,l){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ur:case Mh:a=!0}}if(a)return a=e,l=l(a),e=r===""?"."+Vl(a,0):r,So(l)?(n="",e!=null&&(n=e.replace(ko,"$&/")+"/"),Br(l,t,n,"",function(m){return m})):l!=null&&(ja(l)&&(l=Oh(l,n+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(ko,"$&/")+"/")+e)),t.push(l)),1;if(a=0,r=r===""?".":r+":",So(e))for(var o=0;o<e.length;o++){i=e[o];var c=r+Vl(i,o);a+=Br(i,t,n,c,l)}else if(c=zh(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=r+Vl(i,o++),a+=Br(i,t,n,c,l);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function wr(e,t,n){if(e==null)return e;var r=[],l=0;return Br(e,r,"","",function(i){return t.call(n,i,l++)}),r}function Bh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tt={current:null},Ur={transition:null},Uh={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:Ur,ReactCurrentOwner:xa};function du(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:wr,forEach:function(e,t,n){wr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wr(e,function(){t++}),t},toArray:function(e){return wr(e,function(t){return t})||[]},only:function(e){if(!ja(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=gs;re.Fragment=Th;re.Profiler=_h;re.PureComponent=ga;re.StrictMode=Dh;re.Suspense=Fh;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uh;re.act=du;re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=lu({},e.props),l=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=xa.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)ou.call(t,c)&&!cu.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var m=0;m<c;m++)o[m]=arguments[m+2];r.children=o}return{$$typeof:ur,type:e.type,key:l,ref:i,props:r,_owner:a}};re.createContext=function(e){return e={$$typeof:$h,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Lh,_context:e},e.Consumer=e};re.createElement=uu;re.createFactory=function(e){var t=uu.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:Rh,render:e}};re.isValidElement=ja;re.lazy=function(e){return{$$typeof:Ah,_payload:{_status:-1,_result:e},_init:Bh}};re.memo=function(e,t){return{$$typeof:Ih,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=Ur.transition;Ur.transition={};try{e()}finally{Ur.transition=t}};re.unstable_act=du;re.useCallback=function(e,t){return tt.current.useCallback(e,t)};re.useContext=function(e){return tt.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return tt.current.useDeferredValue(e)};re.useEffect=function(e,t){return tt.current.useEffect(e,t)};re.useId=function(){return tt.current.useId()};re.useImperativeHandle=function(e,t,n){return tt.current.useImperativeHandle(e,t,n)};re.useInsertionEffect=function(e,t){return tt.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return tt.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return tt.current.useMemo(e,t)};re.useReducer=function(e,t,n){return tt.current.useReducer(e,t,n)};re.useRef=function(e){return tt.current.useRef(e)};re.useState=function(e){return tt.current.useState(e)};re.useSyncExternalStore=function(e,t,n){return tt.current.useSyncExternalStore(e,t,n)};re.useTransition=function(){return tt.current.useTransition()};re.version="18.3.1";su.exports=re;var d=su.exports;const Wh=Ph(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh=d,Qh=Symbol.for("react.element"),Kh=Symbol.for("react.fragment"),Gh=Object.prototype.hasOwnProperty,Yh=Vh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xh={key:!0,ref:!0,__self:!0,__source:!0};function hu(e,t,n){var r,l={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Gh.call(t,r)&&!Xh.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Qh,type:e,key:i,ref:a,props:l,_owner:Yh.current}}bl.Fragment=Kh;bl.jsx=hu;bl.jsxs=hu;nu.exports=bl;var s=nu.exports,Si={},fu={exports:{}},mt={},mu={exports:{}},pu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,M){var I=T.length;T.push(M);e:for(;0<I;){var O=I-1>>>1,ee=T[O];if(0<l(ee,M))T[O]=M,T[I]=ee,I=O;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var M=T[0],I=T.pop();if(I!==M){T[0]=I;e:for(var O=0,ee=T.length,le=ee>>>1;O<le;){var U=2*(O+1)-1,te=T[U],ne=U+1,se=T[ne];if(0>l(te,I))ne<ee&&0>l(se,te)?(T[O]=se,T[ne]=I,O=ne):(T[O]=te,T[U]=I,O=U);else if(ne<ee&&0>l(se,I))T[O]=se,T[ne]=I,O=ne;else break e}}return M}function l(T,M){var I=T.sortIndex-M.sortIndex;return I!==0?I:T.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],m=[],x=1,j=null,p=3,N=!1,g=!1,w=!1,F=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function u(T){for(var M=n(m);M!==null;){if(M.callback===null)r(m);else if(M.startTime<=T)r(m),M.sortIndex=M.expirationTime,t(c,M);else break;M=n(m)}}function y(T){if(w=!1,u(T),!g)if(n(c)!==null)g=!0,Q(b);else{var M=n(m);M!==null&&X(y,M.startTime-T)}}function b(T,M){g=!1,w&&(w=!1,f(S),S=-1),N=!0;var I=p;try{for(u(M),j=n(c);j!==null&&(!(j.expirationTime>M)||T&&!W());){var O=j.callback;if(typeof O=="function"){j.callback=null,p=j.priorityLevel;var ee=O(j.expirationTime<=M);M=e.unstable_now(),typeof ee=="function"?j.callback=ee:j===n(c)&&r(c),u(M)}else r(c);j=n(c)}if(j!==null)var le=!0;else{var U=n(m);U!==null&&X(y,U.startTime-M),le=!1}return le}finally{j=null,p=I,N=!1}}var C=!1,v=null,S=-1,D=5,L=-1;function W(){return!(e.unstable_now()-L<D)}function Y(){if(v!==null){var T=e.unstable_now();L=T;var M=!0;try{M=v(!0,T)}finally{M?$():(C=!1,v=null)}}else C=!1}var $;if(typeof h=="function")$=function(){h(Y)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Z=H.port2;H.port1.onmessage=Y,$=function(){Z.postMessage(null)}}else $=function(){F(Y,0)};function Q(T){v=T,C||(C=!0,$())}function X(T,M){S=F(function(){T(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){g||N||(g=!0,Q(b))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var I=p;p=M;try{return T()}finally{p=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,M){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var I=p;p=T;try{return M()}finally{p=I}},e.unstable_scheduleCallback=function(T,M,I){var O=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?O+I:O):I=O,T){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=I+ee,T={id:x++,callback:M,priorityLevel:T,startTime:I,expirationTime:ee,sortIndex:-1},I>O?(T.sortIndex=I,t(m,T),n(c)===null&&T===n(m)&&(w?(f(S),S=-1):w=!0,X(y,I-O))):(T.sortIndex=ee,t(c,T),g||N||(g=!0,Q(b))),T},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(T){var M=p;return function(){var I=p;p=M;try{return T.apply(this,arguments)}finally{p=I}}}})(pu);mu.exports=pu;var Zh=mu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jh=d,ft=Zh;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vu=new Set,Ks={};function On(e,t){us(e,t),us(e+"Capture",t)}function us(e,t){for(Ks[e]=t,e=0;e<t.length;e++)vu.add(t[e])}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ki=Object.prototype.hasOwnProperty,qh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bo={},Co={};function ef(e){return ki.call(Co,e)?!0:ki.call(bo,e)?!1:qh.test(e)?Co[e]=!0:(bo[e]=!0,!1)}function tf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nf(e,t,n,r){if(t===null||typeof t>"u"||tf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nt(e,t,n,r,l,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qe[e]=new nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qe[t]=new nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qe[e]=new nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qe[e]=new nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qe[e]=new nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qe[e]=new nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qe[e]=new nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qe[e]=new nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qe[e]=new nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var wa=/[\-:]([a-z])/g;function Na(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wa,Na);Qe[t]=new nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wa,Na);Qe[t]=new nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wa,Na);Qe[t]=new nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qe[e]=new nt(e,1,!1,e.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qe[e]=new nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sa(e,t,n,r){var l=Qe.hasOwnProperty(t)?Qe[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nf(t,n,l,r)&&(n=null),r||l===null?ef(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var tn=Jh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nr=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Kn=Symbol.for("react.fragment"),ka=Symbol.for("react.strict_mode"),bi=Symbol.for("react.profiler"),gu=Symbol.for("react.provider"),yu=Symbol.for("react.context"),ba=Symbol.for("react.forward_ref"),Ci=Symbol.for("react.suspense"),Ei=Symbol.for("react.suspense_list"),Ca=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),xu=Symbol.for("react.offscreen"),Eo=Symbol.iterator;function ws(e){return e===null||typeof e!="object"?null:(e=Eo&&e[Eo]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,Ql;function $s(e){if(Ql===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ql=t&&t[1]||""}return`
`+Ql+e}var Kl=!1;function Gl(e,t){if(!e||Kl)return"";Kl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var r=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){r=m}e.call(t.prototype)}else{try{throw Error()}catch(m){r=m}e()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var l=m.stack.split(`
`),i=r.stack.split(`
`),a=l.length-1,o=i.length-1;1<=a&&0<=o&&l[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(l[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||l[a]!==i[o]){var c=`
`+l[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{Kl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$s(e):""}function sf(e){switch(e.tag){case 5:return $s(e.type);case 16:return $s("Lazy");case 13:return $s("Suspense");case 19:return $s("SuspenseList");case 0:case 2:case 15:return e=Gl(e.type,!1),e;case 11:return e=Gl(e.type.render,!1),e;case 1:return e=Gl(e.type,!0),e;default:return""}}function Pi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Kn:return"Fragment";case Qn:return"Portal";case bi:return"Profiler";case ka:return"StrictMode";case Ci:return"Suspense";case Ei:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yu:return(e.displayName||"Context")+".Consumer";case gu:return(e._context.displayName||"Context")+".Provider";case ba:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ca:return t=e.displayName||null,t!==null?t:Pi(e.type)||"Memo";case an:t=e._payload,e=e._init;try{return Pi(e(t))}catch{}}return null}function rf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pi(t);case 8:return t===ka?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ju(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lf(e){var t=ju(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sr(e){e._valueTracker||(e._valueTracker=lf(e))}function wu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ju(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function el(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mi(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Po(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=wn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nu(e,t){t=t.checked,t!=null&&Sa(e,"checked",t,!1)}function Ti(e,t){Nu(e,t);var n=wn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Di(e,t.type,n):t.hasOwnProperty("defaultValue")&&Di(e,t.type,wn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Mo(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Di(e,t,n){(t!=="number"||el(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Rs=Array.isArray;function rs(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+wn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function _i(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function To(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(Rs(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:wn(n)}}function Su(e,t){var n=wn(t.value),r=wn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Do(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ku(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Li(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ku(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kr,bu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kr=kr||document.createElement("div"),kr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},af=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(e){af.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),As[t]=As[e]})});function Cu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||As.hasOwnProperty(e)&&As[e]?(""+t).trim():t+"px"}function Eu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Cu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var of=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $i(e,t){if(t){if(of[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function Ri(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fi=null;function Ea(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ii=null,ls=null,is=null;function _o(e){if(e=fr(e)){if(typeof Ii!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Tl(t),Ii(e.stateNode,e.type,t))}}function Pu(e){ls?is?is.push(e):is=[e]:ls=e}function Mu(){if(ls){var e=ls,t=is;if(is=ls=null,_o(e),t)for(e=0;e<t.length;e++)_o(t[e])}}function Tu(e,t){return e(t)}function Du(){}var Yl=!1;function _u(e,t,n){if(Yl)return e(t,n);Yl=!0;try{return Tu(e,t,n)}finally{Yl=!1,(ls!==null||is!==null)&&(Du(),Mu())}}function Ys(e,t){var n=e.stateNode;if(n===null)return null;var r=Tl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var Ai=!1;if(Zt)try{var Ns={};Object.defineProperty(Ns,"passive",{get:function(){Ai=!0}}),window.addEventListener("test",Ns,Ns),window.removeEventListener("test",Ns,Ns)}catch{Ai=!1}function cf(e,t,n,r,l,i,a,o,c){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(x){this.onError(x)}}var zs=!1,tl=null,nl=!1,zi=null,uf={onError:function(e){zs=!0,tl=e}};function df(e,t,n,r,l,i,a,o,c){zs=!1,tl=null,cf.apply(uf,arguments)}function hf(e,t,n,r,l,i,a,o,c){if(df.apply(this,arguments),zs){if(zs){var m=tl;zs=!1,tl=null}else throw Error(R(198));nl||(nl=!0,zi=m)}}function Hn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Lu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lo(e){if(Hn(e)!==e)throw Error(R(188))}function ff(e){var t=e.alternate;if(!t){if(t=Hn(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var i=l.alternate;if(i===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===n)return Lo(l),e;if(i===r)return Lo(l),t;i=i.sibling}throw Error(R(188))}if(n.return!==r.return)n=l,r=i;else{for(var a=!1,o=l.child;o;){if(o===n){a=!0,n=l,r=i;break}if(o===r){a=!0,r=l,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=l;break}if(o===r){a=!0,r=i,n=l;break}o=o.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function $u(e){return e=ff(e),e!==null?Ru(e):null}function Ru(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ru(e);if(t!==null)return t;e=e.sibling}return null}var Fu=ft.unstable_scheduleCallback,$o=ft.unstable_cancelCallback,mf=ft.unstable_shouldYield,pf=ft.unstable_requestPaint,Ae=ft.unstable_now,vf=ft.unstable_getCurrentPriorityLevel,Pa=ft.unstable_ImmediatePriority,Iu=ft.unstable_UserBlockingPriority,sl=ft.unstable_NormalPriority,gf=ft.unstable_LowPriority,Au=ft.unstable_IdlePriority,Cl=null,zt=null;function yf(e){if(zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Cl,e,void 0,(e.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:wf,xf=Math.log,jf=Math.LN2;function wf(e){return e>>>=0,e===0?32:31-(xf(e)/jf|0)|0}var br=64,Cr=4194304;function Fs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function rl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~l;o!==0?r=Fs(o):(i&=a,i!==0&&(r=Fs(i)))}else a=n&~l,a!==0?r=Fs(a):i!==0&&(r=Fs(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,i=t&-t,l>=i||l===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Dt(t),l=1<<n,r|=e[n],t&=~l;return r}function Nf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Dt(i),o=1<<a,c=l[a];c===-1?(!(o&n)||o&r)&&(l[a]=Nf(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function Oi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zu(){var e=br;return br<<=1,!(br&4194240)&&(br=64),e}function Xl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function dr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Dt(t),e[t]=n}function kf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Dt(n),i=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~i}}function Ma(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Dt(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var me=0;function Ou(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hu,Ta,Bu,Uu,Wu,Hi=!1,Er=[],fn=null,mn=null,pn=null,Xs=new Map,Zs=new Map,cn=[],bf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ro(e,t){switch(e){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":mn=null;break;case"mouseover":case"mouseout":pn=null;break;case"pointerover":case"pointerout":Xs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(t.pointerId)}}function Ss(e,t,n,r,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[l]},t!==null&&(t=fr(t),t!==null&&Ta(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Cf(e,t,n,r,l){switch(t){case"focusin":return fn=Ss(fn,e,t,n,r,l),!0;case"dragenter":return mn=Ss(mn,e,t,n,r,l),!0;case"mouseover":return pn=Ss(pn,e,t,n,r,l),!0;case"pointerover":var i=l.pointerId;return Xs.set(i,Ss(Xs.get(i)||null,e,t,n,r,l)),!0;case"gotpointercapture":return i=l.pointerId,Zs.set(i,Ss(Zs.get(i)||null,e,t,n,r,l)),!0}return!1}function Vu(e){var t=Tn(e.target);if(t!==null){var n=Hn(t);if(n!==null){if(t=n.tag,t===13){if(t=Lu(n),t!==null){e.blockedOn=t,Wu(e.priority,function(){Bu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Fi=r,n.target.dispatchEvent(r),Fi=null}else return t=fr(n),t!==null&&Ta(t),e.blockedOn=n,!1;t.shift()}return!0}function Fo(e,t,n){Wr(e)&&n.delete(t)}function Ef(){Hi=!1,fn!==null&&Wr(fn)&&(fn=null),mn!==null&&Wr(mn)&&(mn=null),pn!==null&&Wr(pn)&&(pn=null),Xs.forEach(Fo),Zs.forEach(Fo)}function ks(e,t){e.blockedOn===t&&(e.blockedOn=null,Hi||(Hi=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,Ef)))}function Js(e){function t(l){return ks(l,e)}if(0<Er.length){ks(Er[0],e);for(var n=1;n<Er.length;n++){var r=Er[n];r.blockedOn===e&&(r.blockedOn=null)}}for(fn!==null&&ks(fn,e),mn!==null&&ks(mn,e),pn!==null&&ks(pn,e),Xs.forEach(t),Zs.forEach(t),n=0;n<cn.length;n++)r=cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<cn.length&&(n=cn[0],n.blockedOn===null);)Vu(n),n.blockedOn===null&&cn.shift()}var as=tn.ReactCurrentBatchConfig,ll=!0;function Pf(e,t,n,r){var l=me,i=as.transition;as.transition=null;try{me=1,Da(e,t,n,r)}finally{me=l,as.transition=i}}function Mf(e,t,n,r){var l=me,i=as.transition;as.transition=null;try{me=4,Da(e,t,n,r)}finally{me=l,as.transition=i}}function Da(e,t,n,r){if(ll){var l=Bi(e,t,n,r);if(l===null)ii(e,t,r,il,n),Ro(e,r);else if(Cf(l,e,t,n,r))r.stopPropagation();else if(Ro(e,r),t&4&&-1<bf.indexOf(e)){for(;l!==null;){var i=fr(l);if(i!==null&&Hu(i),i=Bi(e,t,n,r),i===null&&ii(e,t,r,il,n),i===l)break;l=i}l!==null&&r.stopPropagation()}else ii(e,t,r,null,n)}}var il=null;function Bi(e,t,n,r){if(il=null,e=Ea(r),e=Tn(e),e!==null)if(t=Hn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Lu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return il=e,null}function Qu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vf()){case Pa:return 1;case Iu:return 4;case sl:case gf:return 16;case Au:return 536870912;default:return 16}default:return 16}}var dn=null,_a=null,Vr=null;function Ku(){if(Vr)return Vr;var e,t=_a,n=t.length,r,l="value"in dn?dn.value:dn.textContent,i=l.length;for(e=0;e<n&&t[e]===l[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===l[i-r];r++);return Vr=l.slice(e,1<r?1-r:void 0)}function Qr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pr(){return!0}function Io(){return!1}function pt(e){function t(n,r,l,i,a){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pr:Io,this.isPropagationStopped=Io,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pr)},persist:function(){},isPersistent:Pr}),t}var ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=pt(ys),hr=_e({},ys,{view:0,detail:0}),Tf=pt(hr),Zl,Jl,bs,El=_e({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bs&&(bs&&e.type==="mousemove"?(Zl=e.screenX-bs.screenX,Jl=e.screenY-bs.screenY):Jl=Zl=0,bs=e),Zl)},movementY:function(e){return"movementY"in e?e.movementY:Jl}}),Ao=pt(El),Df=_e({},El,{dataTransfer:0}),_f=pt(Df),Lf=_e({},hr,{relatedTarget:0}),ql=pt(Lf),$f=_e({},ys,{animationName:0,elapsedTime:0,pseudoElement:0}),Rf=pt($f),Ff=_e({},ys,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),If=pt(Ff),Af=_e({},ys,{data:0}),zo=pt(Af),zf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Of={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hf[e])?!!t[e]:!1}function $a(){return Bf}var Uf=_e({},hr,{key:function(e){if(e.key){var t=zf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Of[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(e){return e.type==="keypress"?Qr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wf=pt(Uf),Vf=_e({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oo=pt(Vf),Qf=_e({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),Kf=pt(Qf),Gf=_e({},ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yf=pt(Gf),Xf=_e({},El,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zf=pt(Xf),Jf=[9,13,27,32],Ra=Zt&&"CompositionEvent"in window,Os=null;Zt&&"documentMode"in document&&(Os=document.documentMode);var qf=Zt&&"TextEvent"in window&&!Os,Gu=Zt&&(!Ra||Os&&8<Os&&11>=Os),Ho=" ",Bo=!1;function Yu(e,t){switch(e){case"keyup":return Jf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gn=!1;function em(e,t){switch(e){case"compositionend":return Xu(t);case"keypress":return t.which!==32?null:(Bo=!0,Ho);case"textInput":return e=t.data,e===Ho&&Bo?null:e;default:return null}}function tm(e,t){if(Gn)return e==="compositionend"||!Ra&&Yu(e,t)?(e=Ku(),Vr=_a=dn=null,Gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gu&&t.locale!=="ko"?null:t.data;default:return null}}var nm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nm[e.type]:t==="textarea"}function Zu(e,t,n,r){Pu(r),t=al(t,"onChange"),0<t.length&&(n=new La("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hs=null,qs=null;function sm(e){od(e,0)}function Pl(e){var t=Zn(e);if(wu(t))return e}function rm(e,t){if(e==="change")return t}var Ju=!1;if(Zt){var ei;if(Zt){var ti="oninput"in document;if(!ti){var Wo=document.createElement("div");Wo.setAttribute("oninput","return;"),ti=typeof Wo.oninput=="function"}ei=ti}else ei=!1;Ju=ei&&(!document.documentMode||9<document.documentMode)}function Vo(){Hs&&(Hs.detachEvent("onpropertychange",qu),qs=Hs=null)}function qu(e){if(e.propertyName==="value"&&Pl(qs)){var t=[];Zu(t,qs,e,Ea(e)),_u(sm,t)}}function lm(e,t,n){e==="focusin"?(Vo(),Hs=t,qs=n,Hs.attachEvent("onpropertychange",qu)):e==="focusout"&&Vo()}function im(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pl(qs)}function am(e,t){if(e==="click")return Pl(t)}function om(e,t){if(e==="input"||e==="change")return Pl(t)}function cm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:cm;function er(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!ki.call(t,l)||!Lt(e[l],t[l]))return!1}return!0}function Qo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ko(e,t){var n=Qo(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qo(n)}}function ed(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ed(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function td(){for(var e=window,t=el();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=el(e.document)}return t}function Fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function um(e){var t=td(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ed(n.ownerDocument.documentElement,n)){if(r!==null&&Fa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,i=Math.min(r.start,l);r=r.end===void 0?i:Math.min(r.end,l),!e.extend&&i>r&&(l=r,r=i,i=l),l=Ko(n,i);var a=Ko(n,r);l&&a&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dm=Zt&&"documentMode"in document&&11>=document.documentMode,Yn=null,Ui=null,Bs=null,Wi=!1;function Go(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wi||Yn==null||Yn!==el(r)||(r=Yn,"selectionStart"in r&&Fa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bs&&er(Bs,r)||(Bs=r,r=al(Ui,"onSelect"),0<r.length&&(t=new La("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Yn)))}function Mr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xn={animationend:Mr("Animation","AnimationEnd"),animationiteration:Mr("Animation","AnimationIteration"),animationstart:Mr("Animation","AnimationStart"),transitionend:Mr("Transition","TransitionEnd")},ni={},nd={};Zt&&(nd=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function Ml(e){if(ni[e])return ni[e];if(!Xn[e])return e;var t=Xn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nd)return ni[e]=t[n];return e}var sd=Ml("animationend"),rd=Ml("animationiteration"),ld=Ml("animationstart"),id=Ml("transitionend"),ad=new Map,Yo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(e,t){ad.set(e,t),On(t,[e])}for(var si=0;si<Yo.length;si++){var ri=Yo[si],hm=ri.toLowerCase(),fm=ri[0].toUpperCase()+ri.slice(1);Sn(hm,"on"+fm)}Sn(sd,"onAnimationEnd");Sn(rd,"onAnimationIteration");Sn(ld,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(id,"onTransitionEnd");us("onMouseEnter",["mouseout","mouseover"]);us("onMouseLeave",["mouseout","mouseover"]);us("onPointerEnter",["pointerout","pointerover"]);us("onPointerLeave",["pointerout","pointerover"]);On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));On("onBeforeInput",["compositionend","keypress","textInput","paste"]);On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Is));function Xo(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,hf(r,t,void 0,e),e.currentTarget=null}function od(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,m=o.currentTarget;if(o=o.listener,c!==i&&l.isPropagationStopped())break e;Xo(l,o,m),i=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,m=o.currentTarget,o=o.listener,c!==i&&l.isPropagationStopped())break e;Xo(l,o,m),i=c}}}if(nl)throw e=zi,nl=!1,zi=null,e}function ke(e,t){var n=t[Yi];n===void 0&&(n=t[Yi]=new Set);var r=e+"__bubble";n.has(r)||(cd(t,e,2,!1),n.add(r))}function li(e,t,n){var r=0;t&&(r|=4),cd(n,e,r,t)}var Tr="_reactListening"+Math.random().toString(36).slice(2);function tr(e){if(!e[Tr]){e[Tr]=!0,vu.forEach(function(n){n!=="selectionchange"&&(mm.has(n)||li(n,!1,e),li(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tr]||(t[Tr]=!0,li("selectionchange",!1,t))}}function cd(e,t,n,r){switch(Qu(t)){case 1:var l=Pf;break;case 4:l=Mf;break;default:l=Da}n=l.bind(null,t,n,e),l=void 0,!Ai||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function ii(e,t,n,r,l){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===l||o.nodeType===8&&o.parentNode===l)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===l||c.nodeType===8&&c.parentNode===l))return;a=a.return}for(;o!==null;){if(a=Tn(o),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}o=o.parentNode}}r=r.return}_u(function(){var m=i,x=Ea(n),j=[];e:{var p=ad.get(e);if(p!==void 0){var N=La,g=e;switch(e){case"keypress":if(Qr(n)===0)break e;case"keydown":case"keyup":N=Wf;break;case"focusin":g="focus",N=ql;break;case"focusout":g="blur",N=ql;break;case"beforeblur":case"afterblur":N=ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=_f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=Kf;break;case sd:case rd:case ld:N=Rf;break;case id:N=Yf;break;case"scroll":N=Tf;break;case"wheel":N=Zf;break;case"copy":case"cut":case"paste":N=If;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Oo}var w=(t&4)!==0,F=!w&&e==="scroll",f=w?p!==null?p+"Capture":null:p;w=[];for(var h=m,u;h!==null;){u=h;var y=u.stateNode;if(u.tag===5&&y!==null&&(u=y,f!==null&&(y=Ys(h,f),y!=null&&w.push(nr(h,y,u)))),F)break;h=h.return}0<w.length&&(p=new N(p,g,null,n,x),j.push({event:p,listeners:w}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",p&&n!==Fi&&(g=n.relatedTarget||n.fromElement)&&(Tn(g)||g[Jt]))break e;if((N||p)&&(p=x.window===x?x:(p=x.ownerDocument)?p.defaultView||p.parentWindow:window,N?(g=n.relatedTarget||n.toElement,N=m,g=g?Tn(g):null,g!==null&&(F=Hn(g),g!==F||g.tag!==5&&g.tag!==6)&&(g=null)):(N=null,g=m),N!==g)){if(w=Ao,y="onMouseLeave",f="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(w=Oo,y="onPointerLeave",f="onPointerEnter",h="pointer"),F=N==null?p:Zn(N),u=g==null?p:Zn(g),p=new w(y,h+"leave",N,n,x),p.target=F,p.relatedTarget=u,y=null,Tn(x)===m&&(w=new w(f,h+"enter",g,n,x),w.target=u,w.relatedTarget=F,y=w),F=y,N&&g)t:{for(w=N,f=g,h=0,u=w;u;u=Bn(u))h++;for(u=0,y=f;y;y=Bn(y))u++;for(;0<h-u;)w=Bn(w),h--;for(;0<u-h;)f=Bn(f),u--;for(;h--;){if(w===f||f!==null&&w===f.alternate)break t;w=Bn(w),f=Bn(f)}w=null}else w=null;N!==null&&Zo(j,p,N,w,!1),g!==null&&F!==null&&Zo(j,F,g,w,!0)}}e:{if(p=m?Zn(m):window,N=p.nodeName&&p.nodeName.toLowerCase(),N==="select"||N==="input"&&p.type==="file")var b=rm;else if(Uo(p))if(Ju)b=om;else{b=im;var C=lm}else(N=p.nodeName)&&N.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=am);if(b&&(b=b(e,m))){Zu(j,b,n,x);break e}C&&C(e,p,m),e==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&Di(p,"number",p.value)}switch(C=m?Zn(m):window,e){case"focusin":(Uo(C)||C.contentEditable==="true")&&(Yn=C,Ui=m,Bs=null);break;case"focusout":Bs=Ui=Yn=null;break;case"mousedown":Wi=!0;break;case"contextmenu":case"mouseup":case"dragend":Wi=!1,Go(j,n,x);break;case"selectionchange":if(dm)break;case"keydown":case"keyup":Go(j,n,x)}var v;if(Ra)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Gn?Yu(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Gu&&n.locale!=="ko"&&(Gn||S!=="onCompositionStart"?S==="onCompositionEnd"&&Gn&&(v=Ku()):(dn=x,_a="value"in dn?dn.value:dn.textContent,Gn=!0)),C=al(m,S),0<C.length&&(S=new zo(S,e,null,n,x),j.push({event:S,listeners:C}),v?S.data=v:(v=Xu(n),v!==null&&(S.data=v)))),(v=qf?em(e,n):tm(e,n))&&(m=al(m,"onBeforeInput"),0<m.length&&(x=new zo("onBeforeInput","beforeinput",null,n,x),j.push({event:x,listeners:m}),x.data=v))}od(j,t)})}function nr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function al(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=Ys(e,n),i!=null&&r.unshift(nr(e,i,l)),i=Ys(e,t),i!=null&&r.push(nr(e,i,l))),e=e.return}return r}function Bn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zo(e,t,n,r,l){for(var i=t._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,m=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&m!==null&&(o=m,l?(c=Ys(n,i),c!=null&&a.unshift(nr(n,c,o))):l||(c=Ys(n,i),c!=null&&a.push(nr(n,c,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var pm=/\r\n?/g,vm=/\u0000|\uFFFD/g;function Jo(e){return(typeof e=="string"?e:""+e).replace(pm,`
`).replace(vm,"")}function Dr(e,t,n){if(t=Jo(t),Jo(e)!==t&&n)throw Error(R(425))}function ol(){}var Vi=null,Qi=null;function Ki(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gi=typeof setTimeout=="function"?setTimeout:void 0,gm=typeof clearTimeout=="function"?clearTimeout:void 0,qo=typeof Promise=="function"?Promise:void 0,ym=typeof queueMicrotask=="function"?queueMicrotask:typeof qo<"u"?function(e){return qo.resolve(null).then(e).catch(xm)}:Gi;function xm(e){setTimeout(function(){throw e})}function ai(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),Js(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);Js(t)}function vn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ec(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xs=Math.random().toString(36).slice(2),At="__reactFiber$"+xs,sr="__reactProps$"+xs,Jt="__reactContainer$"+xs,Yi="__reactEvents$"+xs,jm="__reactListeners$"+xs,wm="__reactHandles$"+xs;function Tn(e){var t=e[At];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jt]||n[At]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ec(e);e!==null;){if(n=e[At])return n;e=ec(e)}return t}e=n,n=e.parentNode}return null}function fr(e){return e=e[At]||e[Jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Tl(e){return e[sr]||null}var Xi=[],Jn=-1;function kn(e){return{current:e}}function be(e){0>Jn||(e.current=Xi[Jn],Xi[Jn]=null,Jn--)}function Ne(e,t){Jn++,Xi[Jn]=e.current,e.current=t}var Nn={},Xe=kn(Nn),it=kn(!1),Rn=Nn;function ds(e,t){var n=e.type.contextTypes;if(!n)return Nn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in n)l[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function at(e){return e=e.childContextTypes,e!=null}function cl(){be(it),be(Xe)}function tc(e,t,n){if(Xe.current!==Nn)throw Error(R(168));Ne(Xe,t),Ne(it,n)}function ud(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(R(108,rf(e)||"Unknown",l));return _e({},n,r)}function ul(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nn,Rn=Xe.current,Ne(Xe,e),Ne(it,it.current),!0}function nc(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=ud(e,t,Rn),r.__reactInternalMemoizedMergedChildContext=e,be(it),be(Xe),Ne(Xe,e)):be(it),Ne(it,n)}var Kt=null,Dl=!1,oi=!1;function dd(e){Kt===null?Kt=[e]:Kt.push(e)}function Nm(e){Dl=!0,dd(e)}function bn(){if(!oi&&Kt!==null){oi=!0;var e=0,t=me;try{var n=Kt;for(me=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Kt=null,Dl=!1}catch(l){throw Kt!==null&&(Kt=Kt.slice(e+1)),Fu(Pa,bn),l}finally{me=t,oi=!1}}return null}var qn=[],es=0,dl=null,hl=0,xt=[],jt=0,Fn=null,Gt=1,Yt="";function Pn(e,t){qn[es++]=hl,qn[es++]=dl,dl=e,hl=t}function hd(e,t,n){xt[jt++]=Gt,xt[jt++]=Yt,xt[jt++]=Fn,Fn=e;var r=Gt;e=Yt;var l=32-Dt(r)-1;r&=~(1<<l),n+=1;var i=32-Dt(t)+l;if(30<i){var a=l-l%5;i=(r&(1<<a)-1).toString(32),r>>=a,l-=a,Gt=1<<32-Dt(t)+l|n<<l|r,Yt=i+e}else Gt=1<<i|n<<l|r,Yt=e}function Ia(e){e.return!==null&&(Pn(e,1),hd(e,1,0))}function Aa(e){for(;e===dl;)dl=qn[--es],qn[es]=null,hl=qn[--es],qn[es]=null;for(;e===Fn;)Fn=xt[--jt],xt[jt]=null,Yt=xt[--jt],xt[jt]=null,Gt=xt[--jt],xt[jt]=null}var ht=null,dt=null,Pe=!1,Tt=null;function fd(e,t){var n=wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function sc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,dt=vn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fn!==null?{id:Gt,overflow:Yt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ht=e,dt=null,!0):!1;default:return!1}}function Zi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ji(e){if(Pe){var t=dt;if(t){var n=t;if(!sc(e,t)){if(Zi(e))throw Error(R(418));t=vn(n.nextSibling);var r=ht;t&&sc(e,t)?fd(r,n):(e.flags=e.flags&-4097|2,Pe=!1,ht=e)}}else{if(Zi(e))throw Error(R(418));e.flags=e.flags&-4097|2,Pe=!1,ht=e}}}function rc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function _r(e){if(e!==ht)return!1;if(!Pe)return rc(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ki(e.type,e.memoizedProps)),t&&(t=dt)){if(Zi(e))throw md(),Error(R(418));for(;t;)fd(e,t),t=vn(t.nextSibling)}if(rc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){dt=vn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}dt=null}}else dt=ht?vn(e.stateNode.nextSibling):null;return!0}function md(){for(var e=dt;e;)e=vn(e.nextSibling)}function hs(){dt=ht=null,Pe=!1}function za(e){Tt===null?Tt=[e]:Tt.push(e)}var Sm=tn.ReactCurrentBatchConfig;function Cs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var l=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var o=l.refs;a===null?delete o[i]:o[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Lr(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lc(e){var t=e._init;return t(e._payload)}function pd(e){function t(f,h){if(e){var u=f.deletions;u===null?(f.deletions=[h],f.flags|=16):u.push(h)}}function n(f,h){if(!e)return null;for(;h!==null;)t(f,h),h=h.sibling;return null}function r(f,h){for(f=new Map;h!==null;)h.key!==null?f.set(h.key,h):f.set(h.index,h),h=h.sibling;return f}function l(f,h){return f=jn(f,h),f.index=0,f.sibling=null,f}function i(f,h,u){return f.index=u,e?(u=f.alternate,u!==null?(u=u.index,u<h?(f.flags|=2,h):u):(f.flags|=2,h)):(f.flags|=1048576,h)}function a(f){return e&&f.alternate===null&&(f.flags|=2),f}function o(f,h,u,y){return h===null||h.tag!==6?(h=pi(u,f.mode,y),h.return=f,h):(h=l(h,u),h.return=f,h)}function c(f,h,u,y){var b=u.type;return b===Kn?x(f,h,u.props.children,y,u.key):h!==null&&(h.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===an&&lc(b)===h.type)?(y=l(h,u.props),y.ref=Cs(f,h,u),y.return=f,y):(y=qr(u.type,u.key,u.props,null,f.mode,y),y.ref=Cs(f,h,u),y.return=f,y)}function m(f,h,u,y){return h===null||h.tag!==4||h.stateNode.containerInfo!==u.containerInfo||h.stateNode.implementation!==u.implementation?(h=vi(u,f.mode,y),h.return=f,h):(h=l(h,u.children||[]),h.return=f,h)}function x(f,h,u,y,b){return h===null||h.tag!==7?(h=$n(u,f.mode,y,b),h.return=f,h):(h=l(h,u),h.return=f,h)}function j(f,h,u){if(typeof h=="string"&&h!==""||typeof h=="number")return h=pi(""+h,f.mode,u),h.return=f,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Nr:return u=qr(h.type,h.key,h.props,null,f.mode,u),u.ref=Cs(f,null,h),u.return=f,u;case Qn:return h=vi(h,f.mode,u),h.return=f,h;case an:var y=h._init;return j(f,y(h._payload),u)}if(Rs(h)||ws(h))return h=$n(h,f.mode,u,null),h.return=f,h;Lr(f,h)}return null}function p(f,h,u,y){var b=h!==null?h.key:null;if(typeof u=="string"&&u!==""||typeof u=="number")return b!==null?null:o(f,h,""+u,y);if(typeof u=="object"&&u!==null){switch(u.$$typeof){case Nr:return u.key===b?c(f,h,u,y):null;case Qn:return u.key===b?m(f,h,u,y):null;case an:return b=u._init,p(f,h,b(u._payload),y)}if(Rs(u)||ws(u))return b!==null?null:x(f,h,u,y,null);Lr(f,u)}return null}function N(f,h,u,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return f=f.get(u)||null,o(h,f,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Nr:return f=f.get(y.key===null?u:y.key)||null,c(h,f,y,b);case Qn:return f=f.get(y.key===null?u:y.key)||null,m(h,f,y,b);case an:var C=y._init;return N(f,h,u,C(y._payload),b)}if(Rs(y)||ws(y))return f=f.get(u)||null,x(h,f,y,b,null);Lr(h,y)}return null}function g(f,h,u,y){for(var b=null,C=null,v=h,S=h=0,D=null;v!==null&&S<u.length;S++){v.index>S?(D=v,v=null):D=v.sibling;var L=p(f,v,u[S],y);if(L===null){v===null&&(v=D);break}e&&v&&L.alternate===null&&t(f,v),h=i(L,h,S),C===null?b=L:C.sibling=L,C=L,v=D}if(S===u.length)return n(f,v),Pe&&Pn(f,S),b;if(v===null){for(;S<u.length;S++)v=j(f,u[S],y),v!==null&&(h=i(v,h,S),C===null?b=v:C.sibling=v,C=v);return Pe&&Pn(f,S),b}for(v=r(f,v);S<u.length;S++)D=N(v,f,S,u[S],y),D!==null&&(e&&D.alternate!==null&&v.delete(D.key===null?S:D.key),h=i(D,h,S),C===null?b=D:C.sibling=D,C=D);return e&&v.forEach(function(W){return t(f,W)}),Pe&&Pn(f,S),b}function w(f,h,u,y){var b=ws(u);if(typeof b!="function")throw Error(R(150));if(u=b.call(u),u==null)throw Error(R(151));for(var C=b=null,v=h,S=h=0,D=null,L=u.next();v!==null&&!L.done;S++,L=u.next()){v.index>S?(D=v,v=null):D=v.sibling;var W=p(f,v,L.value,y);if(W===null){v===null&&(v=D);break}e&&v&&W.alternate===null&&t(f,v),h=i(W,h,S),C===null?b=W:C.sibling=W,C=W,v=D}if(L.done)return n(f,v),Pe&&Pn(f,S),b;if(v===null){for(;!L.done;S++,L=u.next())L=j(f,L.value,y),L!==null&&(h=i(L,h,S),C===null?b=L:C.sibling=L,C=L);return Pe&&Pn(f,S),b}for(v=r(f,v);!L.done;S++,L=u.next())L=N(v,f,S,L.value,y),L!==null&&(e&&L.alternate!==null&&v.delete(L.key===null?S:L.key),h=i(L,h,S),C===null?b=L:C.sibling=L,C=L);return e&&v.forEach(function(Y){return t(f,Y)}),Pe&&Pn(f,S),b}function F(f,h,u,y){if(typeof u=="object"&&u!==null&&u.type===Kn&&u.key===null&&(u=u.props.children),typeof u=="object"&&u!==null){switch(u.$$typeof){case Nr:e:{for(var b=u.key,C=h;C!==null;){if(C.key===b){if(b=u.type,b===Kn){if(C.tag===7){n(f,C.sibling),h=l(C,u.props.children),h.return=f,f=h;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===an&&lc(b)===C.type){n(f,C.sibling),h=l(C,u.props),h.ref=Cs(f,C,u),h.return=f,f=h;break e}n(f,C);break}else t(f,C);C=C.sibling}u.type===Kn?(h=$n(u.props.children,f.mode,y,u.key),h.return=f,f=h):(y=qr(u.type,u.key,u.props,null,f.mode,y),y.ref=Cs(f,h,u),y.return=f,f=y)}return a(f);case Qn:e:{for(C=u.key;h!==null;){if(h.key===C)if(h.tag===4&&h.stateNode.containerInfo===u.containerInfo&&h.stateNode.implementation===u.implementation){n(f,h.sibling),h=l(h,u.children||[]),h.return=f,f=h;break e}else{n(f,h);break}else t(f,h);h=h.sibling}h=vi(u,f.mode,y),h.return=f,f=h}return a(f);case an:return C=u._init,F(f,h,C(u._payload),y)}if(Rs(u))return g(f,h,u,y);if(ws(u))return w(f,h,u,y);Lr(f,u)}return typeof u=="string"&&u!==""||typeof u=="number"?(u=""+u,h!==null&&h.tag===6?(n(f,h.sibling),h=l(h,u),h.return=f,f=h):(n(f,h),h=pi(u,f.mode,y),h.return=f,f=h),a(f)):n(f,h)}return F}var fs=pd(!0),vd=pd(!1),fl=kn(null),ml=null,ts=null,Oa=null;function Ha(){Oa=ts=ml=null}function Ba(e){var t=fl.current;be(fl),e._currentValue=t}function qi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function os(e,t){ml=e,Oa=ts=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(Oa!==e)if(e={context:e,memoizedValue:t,next:null},ts===null){if(ml===null)throw Error(R(308));ts=e,ml.dependencies={lanes:0,firstContext:e}}else ts=ts.next=e;return t}var Dn=null;function Ua(e){Dn===null?Dn=[e]:Dn.push(e)}function gd(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,Ua(t)):(n.next=l.next,l.next=n),t.interleaved=n,qt(e,r)}function qt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var on=!1;function Wa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,qt(e,n)}return l=r.interleaved,l===null?(t.next=t,Ua(r)):(t.next=l.next,l.next=t),r.interleaved=t,qt(e,n)}function Kr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ma(e,n)}}function ic(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?l=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?l=i=t:i=i.next=t}else l=i=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pl(e,t,n,r){var l=e.updateQueue;on=!1;var i=l.firstBaseUpdate,a=l.lastBaseUpdate,o=l.shared.pending;if(o!==null){l.shared.pending=null;var c=o,m=c.next;c.next=null,a===null?i=m:a.next=m,a=c;var x=e.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==a&&(o===null?x.firstBaseUpdate=m:o.next=m,x.lastBaseUpdate=c))}if(i!==null){var j=l.baseState;a=0,x=m=c=null,o=i;do{var p=o.lane,N=o.eventTime;if((r&p)===p){x!==null&&(x=x.next={eventTime:N,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,w=o;switch(p=t,N=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){j=g.call(N,j,p);break e}j=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,p=typeof g=="function"?g.call(N,j,p):g,p==null)break e;j=_e({},j,p);break e;case 2:on=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=l.effects,p===null?l.effects=[o]:p.push(o))}else N={eventTime:N,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(m=x=N,c=j):x=x.next=N,a|=p;if(o=o.next,o===null){if(o=l.shared.pending,o===null)break;p=o,o=p.next,p.next=null,l.lastBaseUpdate=p,l.shared.pending=null}}while(!0);if(x===null&&(c=j),l.baseState=c,l.firstBaseUpdate=m,l.lastBaseUpdate=x,t=l.shared.interleaved,t!==null){l=t;do a|=l.lane,l=l.next;while(l!==t)}else i===null&&(l.shared.lanes=0);An|=a,e.lanes=a,e.memoizedState=j}}function ac(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(R(191,l));l.call(r)}}}var mr={},Ot=kn(mr),rr=kn(mr),lr=kn(mr);function _n(e){if(e===mr)throw Error(R(174));return e}function Va(e,t){switch(Ne(lr,t),Ne(rr,e),Ne(Ot,mr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Li(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Li(t,e)}be(Ot),Ne(Ot,t)}function ms(){be(Ot),be(rr),be(lr)}function xd(e){_n(lr.current);var t=_n(Ot.current),n=Li(t,e.type);t!==n&&(Ne(rr,e),Ne(Ot,n))}function Qa(e){rr.current===e&&(be(Ot),be(rr))}var Te=kn(0);function vl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ci=[];function Ka(){for(var e=0;e<ci.length;e++)ci[e]._workInProgressVersionPrimary=null;ci.length=0}var Gr=tn.ReactCurrentDispatcher,ui=tn.ReactCurrentBatchConfig,In=0,De=null,Oe=null,Be=null,gl=!1,Us=!1,ir=0,km=0;function Ke(){throw Error(R(321))}function Ga(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Lt(e[n],t[n]))return!1;return!0}function Ya(e,t,n,r,l,i){if(In=i,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gr.current=e===null||e.memoizedState===null?Pm:Mm,e=n(r,l),Us){i=0;do{if(Us=!1,ir=0,25<=i)throw Error(R(301));i+=1,Be=Oe=null,t.updateQueue=null,Gr.current=Tm,e=n(r,l)}while(Us)}if(Gr.current=yl,t=Oe!==null&&Oe.next!==null,In=0,Be=Oe=De=null,gl=!1,t)throw Error(R(300));return e}function Xa(){var e=ir!==0;return ir=0,e}function It(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?De.memoizedState=Be=e:Be=Be.next=e,Be}function kt(){if(Oe===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Be===null?De.memoizedState:Be.next;if(t!==null)Be=t,Oe=e;else{if(e===null)throw Error(R(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Be===null?De.memoizedState=Be=e:Be=Be.next=e}return Be}function ar(e,t){return typeof t=="function"?t(e):t}function di(e){var t=kt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Oe,l=r.baseQueue,i=n.pending;if(i!==null){if(l!==null){var a=l.next;l.next=i.next,i.next=a}r.baseQueue=l=i,n.pending=null}if(l!==null){i=l.next,r=r.baseState;var o=a=null,c=null,m=i;do{var x=m.lane;if((In&x)===x)c!==null&&(c=c.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:e(r,m.action);else{var j={lane:x,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};c===null?(o=c=j,a=r):c=c.next=j,De.lanes|=x,An|=x}m=m.next}while(m!==null&&m!==i);c===null?a=r:c.next=o,Lt(r,t.memoizedState)||(lt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do i=l.lane,De.lanes|=i,An|=i,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function hi(e){var t=kt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,i=t.memoizedState;if(l!==null){n.pending=null;var a=l=l.next;do i=e(i,a.action),a=a.next;while(a!==l);Lt(i,t.memoizedState)||(lt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function jd(){}function wd(e,t){var n=De,r=kt(),l=t(),i=!Lt(r.memoizedState,l);if(i&&(r.memoizedState=l,lt=!0),r=r.queue,Za(kd.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,or(9,Sd.bind(null,n,r,l,t),void 0,null),Ue===null)throw Error(R(349));In&30||Nd(n,t,l)}return l}function Nd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sd(e,t,n,r){t.value=n,t.getSnapshot=r,bd(t)&&Cd(e)}function kd(e,t,n){return n(function(){bd(t)&&Cd(e)})}function bd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Lt(e,n)}catch{return!0}}function Cd(e){var t=qt(e,1);t!==null&&_t(t,e,1,-1)}function oc(e){var t=It();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:e},t.queue=e,e=e.dispatch=Em.bind(null,De,e),[t.memoizedState,e]}function or(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ed(){return kt().memoizedState}function Yr(e,t,n,r){var l=It();De.flags|=e,l.memoizedState=or(1|t,n,void 0,r===void 0?null:r)}function _l(e,t,n,r){var l=kt();r=r===void 0?null:r;var i=void 0;if(Oe!==null){var a=Oe.memoizedState;if(i=a.destroy,r!==null&&Ga(r,a.deps)){l.memoizedState=or(t,n,i,r);return}}De.flags|=e,l.memoizedState=or(1|t,n,i,r)}function cc(e,t){return Yr(8390656,8,e,t)}function Za(e,t){return _l(2048,8,e,t)}function Pd(e,t){return _l(4,2,e,t)}function Md(e,t){return _l(4,4,e,t)}function Td(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dd(e,t,n){return n=n!=null?n.concat([e]):null,_l(4,4,Td.bind(null,t,e),n)}function Ja(){}function _d(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ld(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $d(e,t,n){return In&21?(Lt(n,t)||(n=zu(),De.lanes|=n,An|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=n)}function bm(e,t){var n=me;me=n!==0&&4>n?n:4,e(!0);var r=ui.transition;ui.transition={};try{e(!1),t()}finally{me=n,ui.transition=r}}function Rd(){return kt().memoizedState}function Cm(e,t,n){var r=xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fd(e))Id(t,n);else if(n=gd(e,t,n,r),n!==null){var l=et();_t(n,e,r,l),Ad(n,t,r)}}function Em(e,t,n){var r=xn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fd(e))Id(t,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,o=i(a,n);if(l.hasEagerState=!0,l.eagerState=o,Lt(o,a)){var c=t.interleaved;c===null?(l.next=l,Ua(t)):(l.next=c.next,c.next=l),t.interleaved=l;return}}catch{}finally{}n=gd(e,t,l,r),n!==null&&(l=et(),_t(n,e,r,l),Ad(n,t,r))}}function Fd(e){var t=e.alternate;return e===De||t!==null&&t===De}function Id(e,t){Us=gl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ad(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ma(e,n)}}var yl={readContext:St,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},Pm={readContext:St,useCallback:function(e,t){return It().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:cc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Yr(4194308,4,Td.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yr(4,2,e,t)},useMemo:function(e,t){var n=It();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=It();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Cm.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=It();return e={current:e},t.memoizedState=e},useState:oc,useDebugValue:Ja,useDeferredValue:function(e){return It().memoizedState=e},useTransition:function(){var e=oc(!1),t=e[0];return e=bm.bind(null,e[1]),It().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,l=It();if(Pe){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),Ue===null)throw Error(R(349));In&30||Nd(r,t,n)}l.memoizedState=n;var i={value:n,getSnapshot:t};return l.queue=i,cc(kd.bind(null,r,i,e),[e]),r.flags|=2048,or(9,Sd.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=It(),t=Ue.identifierPrefix;if(Pe){var n=Yt,r=Gt;n=(r&~(1<<32-Dt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ir++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=km++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mm={readContext:St,useCallback:_d,useContext:St,useEffect:Za,useImperativeHandle:Dd,useInsertionEffect:Pd,useLayoutEffect:Md,useMemo:Ld,useReducer:di,useRef:Ed,useState:function(){return di(ar)},useDebugValue:Ja,useDeferredValue:function(e){var t=kt();return $d(t,Oe.memoizedState,e)},useTransition:function(){var e=di(ar)[0],t=kt().memoizedState;return[e,t]},useMutableSource:jd,useSyncExternalStore:wd,useId:Rd,unstable_isNewReconciler:!1},Tm={readContext:St,useCallback:_d,useContext:St,useEffect:Za,useImperativeHandle:Dd,useInsertionEffect:Pd,useLayoutEffect:Md,useMemo:Ld,useReducer:hi,useRef:Ed,useState:function(){return hi(ar)},useDebugValue:Ja,useDeferredValue:function(e){var t=kt();return Oe===null?t.memoizedState=e:$d(t,Oe.memoizedState,e)},useTransition:function(){var e=hi(ar)[0],t=kt().memoizedState;return[e,t]},useMutableSource:jd,useSyncExternalStore:wd,useId:Rd,unstable_isNewReconciler:!1};function Pt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ea(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ll={isMounted:function(e){return(e=e._reactInternals)?Hn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=et(),l=xn(e),i=Xt(r,l);i.payload=t,n!=null&&(i.callback=n),t=gn(e,i,l),t!==null&&(_t(t,e,l,r),Kr(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=et(),l=xn(e),i=Xt(r,l);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=gn(e,i,l),t!==null&&(_t(t,e,l,r),Kr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=et(),r=xn(e),l=Xt(n,r);l.tag=2,t!=null&&(l.callback=t),t=gn(e,l,r),t!==null&&(_t(t,e,r,n),Kr(t,e,r))}};function uc(e,t,n,r,l,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!er(n,r)||!er(l,i):!0}function zd(e,t,n){var r=!1,l=Nn,i=t.contextType;return typeof i=="object"&&i!==null?i=St(i):(l=at(t)?Rn:Xe.current,r=t.contextTypes,i=(r=r!=null)?ds(e,l):Nn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ll,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=i),t}function dc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ll.enqueueReplaceState(t,t.state,null)}function ta(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Wa(e);var i=t.contextType;typeof i=="object"&&i!==null?l.context=St(i):(i=at(t)?Rn:Xe.current,l.context=ds(e,i)),l.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ea(e,t,i,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Ll.enqueueReplaceState(l,l.state,null),pl(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function ps(e,t){try{var n="",r=t;do n+=sf(r),r=r.return;while(r);var l=n}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:l,digest:null}}function fi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function na(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Dm=typeof WeakMap=="function"?WeakMap:Map;function Od(e,t,n){n=Xt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){jl||(jl=!0,ha=r),na(e,t)},n}function Hd(e,t,n){n=Xt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){na(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){na(e,t),typeof r!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function hc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Dm;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Vm.bind(null,e,t,n),t.then(e,e))}function fc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mc(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xt(-1,1),t.tag=2,gn(n,t,1))),n.lanes|=1),e)}var _m=tn.ReactCurrentOwner,lt=!1;function qe(e,t,n,r){t.child=e===null?vd(t,null,n,r):fs(t,e.child,n,r)}function pc(e,t,n,r,l){n=n.render;var i=t.ref;return os(t,l),r=Ya(e,t,n,r,i,l),n=Xa(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,en(e,t,l)):(Pe&&n&&Ia(t),t.flags|=1,qe(e,t,r,l),t.child)}function vc(e,t,n,r,l){if(e===null){var i=n.type;return typeof i=="function"&&!io(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Bd(e,t,i,r,l)):(e=qr(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&l)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:er,n(a,r)&&e.ref===t.ref)return en(e,t,l)}return t.flags|=1,e=jn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Bd(e,t,n,r,l){if(e!==null){var i=e.memoizedProps;if(er(i,r)&&e.ref===t.ref)if(lt=!1,t.pendingProps=r=i,(e.lanes&l)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,en(e,t,l)}return sa(e,t,n,r,l)}function Ud(e,t,n){var r=t.pendingProps,l=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(ss,ut),ut|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(ss,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne(ss,ut),ut|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ne(ss,ut),ut|=r;return qe(e,t,l,n),t.child}function Wd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sa(e,t,n,r,l){var i=at(n)?Rn:Xe.current;return i=ds(t,i),os(t,l),n=Ya(e,t,n,r,i,l),r=Xa(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,en(e,t,l)):(Pe&&r&&Ia(t),t.flags|=1,qe(e,t,n,l),t.child)}function gc(e,t,n,r,l){if(at(n)){var i=!0;ul(t)}else i=!1;if(os(t,l),t.stateNode===null)Xr(e,t),zd(t,n,r),ta(t,n,r,l),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,m=n.contextType;typeof m=="object"&&m!==null?m=St(m):(m=at(n)?Rn:Xe.current,m=ds(t,m));var x=n.getDerivedStateFromProps,j=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function";j||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==m)&&dc(t,a,r,m),on=!1;var p=t.memoizedState;a.state=p,pl(t,r,a,l),c=t.memoizedState,o!==r||p!==c||it.current||on?(typeof x=="function"&&(ea(t,n,x,r),c=t.memoizedState),(o=on||uc(t,n,o,r,p,c,m))?(j||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=m,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,yd(e,t),o=t.memoizedProps,m=t.type===t.elementType?o:Pt(t.type,o),a.props=m,j=t.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=St(c):(c=at(n)?Rn:Xe.current,c=ds(t,c));var N=n.getDerivedStateFromProps;(x=typeof N=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==j||p!==c)&&dc(t,a,r,c),on=!1,p=t.memoizedState,a.state=p,pl(t,r,a,l);var g=t.memoizedState;o!==j||p!==g||it.current||on?(typeof N=="function"&&(ea(t,n,N,r),g=t.memoizedState),(m=on||uc(t,n,m,r,p,g,c)||!1)?(x||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=m):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return ra(e,t,n,r,i,l)}function ra(e,t,n,r,l,i){Wd(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return l&&nc(t,n,!1),en(e,t,i);r=t.stateNode,_m.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=fs(t,e.child,null,i),t.child=fs(t,null,o,i)):qe(e,t,o,i),t.memoizedState=r.state,l&&nc(t,n,!0),t.child}function Vd(e){var t=e.stateNode;t.pendingContext?tc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tc(e,t.context,!1),Va(e,t.containerInfo)}function yc(e,t,n,r,l){return hs(),za(l),t.flags|=256,qe(e,t,n,r),t.child}var la={dehydrated:null,treeContext:null,retryLane:0};function ia(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qd(e,t,n){var r=t.pendingProps,l=Te.current,i=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(l&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Ne(Te,l&1),e===null)return Ji(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Fl(a,r,0,null),e=$n(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ia(n),t.memoizedState=la,e):qa(t,a));if(l=e.memoizedState,l!==null&&(o=l.dehydrated,o!==null))return Lm(e,t,a,r,o,l,n);if(i){i=r.fallback,a=t.mode,l=e.child,o=l.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=jn(l,c),r.subtreeFlags=l.subtreeFlags&14680064),o!==null?i=jn(o,i):(i=$n(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?ia(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=la,r}return i=e.child,e=i.sibling,r=jn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function qa(e,t){return t=Fl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $r(e,t,n,r){return r!==null&&za(r),fs(t,e.child,null,n),e=qa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lm(e,t,n,r,l,i,a){if(n)return t.flags&256?(t.flags&=-257,r=fi(Error(R(422))),$r(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,l=t.mode,r=Fl({mode:"visible",children:r.children},l,0,null),i=$n(i,l,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&fs(t,e.child,null,a),t.child.memoizedState=ia(a),t.memoizedState=la,i);if(!(t.mode&1))return $r(e,t,a,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(R(419)),r=fi(i,r,void 0),$r(e,t,a,r)}if(o=(a&e.childLanes)!==0,lt||o){if(r=Ue,r!==null){switch(a&-a){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|a)?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,qt(e,l),_t(r,e,l,-1))}return lo(),r=fi(Error(R(421))),$r(e,t,a,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Qm.bind(null,e),l._reactRetry=t,null):(e=i.treeContext,dt=vn(l.nextSibling),ht=t,Pe=!0,Tt=null,e!==null&&(xt[jt++]=Gt,xt[jt++]=Yt,xt[jt++]=Fn,Gt=e.id,Yt=e.overflow,Fn=t),t=qa(t,r.children),t.flags|=4096,t)}function xc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qi(e.return,t,n)}function mi(e,t,n,r,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=l)}function Kd(e,t,n){var r=t.pendingProps,l=r.revealOrder,i=r.tail;if(qe(e,t,r.children,n),r=Te.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xc(e,n,t);else if(e.tag===19)xc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ne(Te,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&vl(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),mi(t,!1,l,n,i);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&vl(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}mi(t,!0,n,null,i);break;case"together":mi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function en(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),An|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=jn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $m(e,t,n){switch(t.tag){case 3:Vd(t),hs();break;case 5:xd(t);break;case 1:at(t.type)&&ul(t);break;case 4:Va(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;Ne(fl,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Te,Te.current&1),t.flags|=128,null):n&t.child.childLanes?Qd(e,t,n):(Ne(Te,Te.current&1),e=en(e,t,n),e!==null?e.sibling:null);Ne(Te,Te.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Kd(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ne(Te,Te.current),r)break;return null;case 22:case 23:return t.lanes=0,Ud(e,t,n)}return en(e,t,n)}var Gd,aa,Yd,Xd;Gd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};aa=function(){};Yd=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,_n(Ot.current);var i=null;switch(n){case"input":l=Mi(e,l),r=Mi(e,r),i=[];break;case"select":l=_e({},l,{value:void 0}),r=_e({},r,{value:void 0}),i=[];break;case"textarea":l=_i(e,l),r=_i(e,r),i=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ol)}$i(n,r);var a;n=null;for(m in l)if(!r.hasOwnProperty(m)&&l.hasOwnProperty(m)&&l[m]!=null)if(m==="style"){var o=l[m];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Ks.hasOwnProperty(m)?i||(i=[]):(i=i||[]).push(m,null));for(m in r){var c=r[m];if(o=l?.[m],r.hasOwnProperty(m)&&c!==o&&(c!=null||o!=null))if(m==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(m,n)),n=c;else m==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(m,c)):m==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(m,""+c):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Ks.hasOwnProperty(m)?(c!=null&&m==="onScroll"&&ke("scroll",e),i||o===c||(i=[])):(i=i||[]).push(m,c))}n&&(i=i||[]).push("style",n);var m=i;(t.updateQueue=m)&&(t.flags|=4)}};Xd=function(e,t,n,r){n!==r&&(t.flags|=4)};function Es(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Rm(e,t,n){var r=t.pendingProps;switch(Aa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(t),null;case 1:return at(t.type)&&cl(),Ge(t),null;case 3:return r=t.stateNode,ms(),be(it),be(Xe),Ka(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(_r(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tt!==null&&(pa(Tt),Tt=null))),aa(e,t),Ge(t),null;case 5:Qa(t);var l=_n(lr.current);if(n=t.type,e!==null&&t.stateNode!=null)Yd(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return Ge(t),null}if(e=_n(Ot.current),_r(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[At]=t,r[sr]=i,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(l=0;l<Is.length;l++)ke(Is[l],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Po(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":To(r,i),ke("invalid",r)}$i(n,i),l=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Dr(r.textContent,o,e),l=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Dr(r.textContent,o,e),l=["children",""+o]):Ks.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ke("scroll",r)}switch(n){case"input":Sr(r),Mo(r,i,!0);break;case"textarea":Sr(r),Do(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ol)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ku(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[At]=t,e[sr]=r,Gd(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ri(n,r),n){case"dialog":ke("cancel",e),ke("close",e),l=r;break;case"iframe":case"object":case"embed":ke("load",e),l=r;break;case"video":case"audio":for(l=0;l<Is.length;l++)ke(Is[l],e);l=r;break;case"source":ke("error",e),l=r;break;case"img":case"image":case"link":ke("error",e),ke("load",e),l=r;break;case"details":ke("toggle",e),l=r;break;case"input":Po(e,r),l=Mi(e,r),ke("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=_e({},r,{value:void 0}),ke("invalid",e);break;case"textarea":To(e,r),l=_i(e,r),ke("invalid",e);break;default:l=r}$i(n,l),o=l;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Eu(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bu(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Gs(e,c):typeof c=="number"&&Gs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ks.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ke("scroll",e):c!=null&&Sa(e,i,c,a))}switch(n){case"input":Sr(e),Mo(e,r,!1);break;case"textarea":Sr(e),Do(e);break;case"option":r.value!=null&&e.setAttribute("value",""+wn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?rs(e,!!r.multiple,i,!1):r.defaultValue!=null&&rs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ge(t),null;case 6:if(e&&t.stateNode!=null)Xd(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=_n(lr.current),_n(Ot.current),_r(t)){if(r=t.stateNode,n=t.memoizedProps,r[At]=t,(i=r.nodeValue!==n)&&(e=ht,e!==null))switch(e.tag){case 3:Dr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Dr(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[At]=t,t.stateNode=r}return Ge(t),null;case 13:if(be(Te),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&dt!==null&&t.mode&1&&!(t.flags&128))md(),hs(),t.flags|=98560,i=!1;else if(i=_r(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(R(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[At]=t}else hs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ge(t),i=!1}else Tt!==null&&(pa(Tt),Tt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Te.current&1?He===0&&(He=3):lo())),t.updateQueue!==null&&(t.flags|=4),Ge(t),null);case 4:return ms(),aa(e,t),e===null&&tr(t.stateNode.containerInfo),Ge(t),null;case 10:return Ba(t.type._context),Ge(t),null;case 17:return at(t.type)&&cl(),Ge(t),null;case 19:if(be(Te),i=t.memoizedState,i===null)return Ge(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Es(i,!1);else{if(He!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=vl(e),a!==null){for(t.flags|=128,Es(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ne(Te,Te.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ae()>vs&&(t.flags|=128,r=!0,Es(i,!1),t.lanes=4194304)}else{if(!r)if(e=vl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Es(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Pe)return Ge(t),null}else 2*Ae()-i.renderingStartTime>vs&&n!==1073741824&&(t.flags|=128,r=!0,Es(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ae(),t.sibling=null,n=Te.current,Ne(Te,r?n&1|2:n&1),t):(Ge(t),null);case 22:case 23:return ro(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ut&1073741824&&(Ge(t),t.subtreeFlags&6&&(t.flags|=8192)):Ge(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function Fm(e,t){switch(Aa(t),t.tag){case 1:return at(t.type)&&cl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ms(),be(it),be(Xe),Ka(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qa(t),null;case 13:if(be(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));hs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Te),null;case 4:return ms(),null;case 10:return Ba(t.type._context),null;case 22:case 23:return ro(),null;case 24:return null;default:return null}}var Rr=!1,Ye=!1,Im=typeof WeakSet=="function"?WeakSet:Set,B=null;function ns(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(e,t,r)}else n.current=null}function oa(e,t,n){try{n()}catch(r){Re(e,t,r)}}var jc=!1;function Am(e,t){if(Vi=ll,e=td(),Fa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,m=0,x=0,j=e,p=null;t:for(;;){for(var N;j!==n||l!==0&&j.nodeType!==3||(o=a+l),j!==i||r!==0&&j.nodeType!==3||(c=a+r),j.nodeType===3&&(a+=j.nodeValue.length),(N=j.firstChild)!==null;)p=j,j=N;for(;;){if(j===e)break t;if(p===n&&++m===l&&(o=a),p===i&&++x===r&&(c=a),(N=j.nextSibling)!==null)break;j=p,p=j.parentNode}j=N}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qi={focusedElem:e,selectionRange:n},ll=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,F=g.memoizedState,f=t.stateNode,h=f.getSnapshotBeforeUpdate(t.elementType===t.type?w:Pt(t.type,w),F);f.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var u=t.stateNode.containerInfo;u.nodeType===1?u.textContent="":u.nodeType===9&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(y){Re(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return g=jc,jc=!1,g}function Ws(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var i=l.destroy;l.destroy=void 0,i!==void 0&&oa(t,n,i)}l=l.next}while(l!==r)}}function $l(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ca(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Zd(e){var t=e.alternate;t!==null&&(e.alternate=null,Zd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[At],delete t[sr],delete t[Yi],delete t[jm],delete t[wm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jd(e){return e.tag===5||e.tag===3||e.tag===4}function wc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ua(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ol));else if(r!==4&&(e=e.child,e!==null))for(ua(e,t,n),e=e.sibling;e!==null;)ua(e,t,n),e=e.sibling}function da(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(da(e,t,n),e=e.sibling;e!==null;)da(e,t,n),e=e.sibling}var We=null,Mt=!1;function ln(e,t,n){for(n=n.child;n!==null;)qd(e,t,n),n=n.sibling}function qd(e,t,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Cl,n)}catch{}switch(n.tag){case 5:Ye||ns(n,t);case 6:var r=We,l=Mt;We=null,ln(e,t,n),We=r,Mt=l,We!==null&&(Mt?(e=We,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&(Mt?(e=We,n=n.stateNode,e.nodeType===8?ai(e.parentNode,n):e.nodeType===1&&ai(e,n),Js(e)):ai(We,n.stateNode));break;case 4:r=We,l=Mt,We=n.stateNode.containerInfo,Mt=!0,ln(e,t,n),We=r,Mt=l;break;case 0:case 11:case 14:case 15:if(!Ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var i=l,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&oa(n,t,a),l=l.next}while(l!==r)}ln(e,t,n);break;case 1:if(!Ye&&(ns(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Re(n,t,o)}ln(e,t,n);break;case 21:ln(e,t,n);break;case 22:n.mode&1?(Ye=(r=Ye)||n.memoizedState!==null,ln(e,t,n),Ye=r):ln(e,t,n);break;default:ln(e,t,n)}}function Nc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Im),t.forEach(function(r){var l=Km.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function Et(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var i=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:We=o.stateNode,Mt=!1;break e;case 3:We=o.stateNode.containerInfo,Mt=!0;break e;case 4:We=o.stateNode.containerInfo,Mt=!0;break e}o=o.return}if(We===null)throw Error(R(160));qd(i,a,l),We=null,Mt=!1;var c=l.alternate;c!==null&&(c.return=null),l.return=null}catch(m){Re(l,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eh(t,e),t=t.sibling}function eh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Et(t,e),Ft(e),r&4){try{Ws(3,e,e.return),$l(3,e)}catch(w){Re(e,e.return,w)}try{Ws(5,e,e.return)}catch(w){Re(e,e.return,w)}}break;case 1:Et(t,e),Ft(e),r&512&&n!==null&&ns(n,n.return);break;case 5:if(Et(t,e),Ft(e),r&512&&n!==null&&ns(n,n.return),e.flags&32){var l=e.stateNode;try{Gs(l,"")}catch(w){Re(e,e.return,w)}}if(r&4&&(l=e.stateNode,l!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Nu(l,i),Ri(o,a);var m=Ri(o,i);for(a=0;a<c.length;a+=2){var x=c[a],j=c[a+1];x==="style"?Eu(l,j):x==="dangerouslySetInnerHTML"?bu(l,j):x==="children"?Gs(l,j):Sa(l,x,j,m)}switch(o){case"input":Ti(l,i);break;case"textarea":Su(l,i);break;case"select":var p=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var N=i.value;N!=null?rs(l,!!i.multiple,N,!1):p!==!!i.multiple&&(i.defaultValue!=null?rs(l,!!i.multiple,i.defaultValue,!0):rs(l,!!i.multiple,i.multiple?[]:"",!1))}l[sr]=i}catch(w){Re(e,e.return,w)}}break;case 6:if(Et(t,e),Ft(e),r&4){if(e.stateNode===null)throw Error(R(162));l=e.stateNode,i=e.memoizedProps;try{l.nodeValue=i}catch(w){Re(e,e.return,w)}}break;case 3:if(Et(t,e),Ft(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Js(t.containerInfo)}catch(w){Re(e,e.return,w)}break;case 4:Et(t,e),Ft(e);break;case 13:Et(t,e),Ft(e),l=e.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(no=Ae())),r&4&&Nc(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(Ye=(m=Ye)||x,Et(t,e),Ye=m):Et(t,e),Ft(e),r&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!x&&e.mode&1)for(B=e,x=e.child;x!==null;){for(j=B=x;B!==null;){switch(p=B,N=p.child,p.tag){case 0:case 11:case 14:case 15:Ws(4,p,p.return);break;case 1:ns(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(w){Re(r,n,w)}}break;case 5:ns(p,p.return);break;case 22:if(p.memoizedState!==null){kc(j);continue}}N!==null?(N.return=p,B=N):kc(j)}x=x.sibling}e:for(x=null,j=e;;){if(j.tag===5){if(x===null){x=j;try{l=j.stateNode,m?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=j.stateNode,c=j.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Cu("display",a))}catch(w){Re(e,e.return,w)}}}else if(j.tag===6){if(x===null)try{j.stateNode.nodeValue=m?"":j.memoizedProps}catch(w){Re(e,e.return,w)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===e)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===e)break e;for(;j.sibling===null;){if(j.return===null||j.return===e)break e;x===j&&(x=null),j=j.return}x===j&&(x=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:Et(t,e),Ft(e),r&4&&Nc(e);break;case 21:break;default:Et(t,e),Ft(e)}}function Ft(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jd(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Gs(l,""),r.flags&=-33);var i=wc(e);da(e,i,l);break;case 3:case 4:var a=r.stateNode.containerInfo,o=wc(e);ua(e,o,a);break;default:throw Error(R(161))}}catch(c){Re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zm(e,t,n){B=e,th(e)}function th(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var l=B,i=l.child;if(l.tag===22&&r){var a=l.memoizedState!==null||Rr;if(!a){var o=l.alternate,c=o!==null&&o.memoizedState!==null||Ye;o=Rr;var m=Ye;if(Rr=a,(Ye=c)&&!m)for(B=l;B!==null;)a=B,c=a.child,a.tag===22&&a.memoizedState!==null?bc(l):c!==null?(c.return=a,B=c):bc(l);for(;i!==null;)B=i,th(i),i=i.sibling;B=l,Rr=o,Ye=m}Sc(e)}else l.subtreeFlags&8772&&i!==null?(i.return=l,B=i):Sc(e)}}function Sc(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ye||$l(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ye)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Pt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&ac(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ac(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var x=m.memoizedState;if(x!==null){var j=x.dehydrated;j!==null&&Js(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ye||t.flags&512&&ca(t)}catch(p){Re(t,t.return,p)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function kc(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function bc(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$l(4,t)}catch(c){Re(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(c){Re(t,l,c)}}var i=t.return;try{ca(t)}catch(c){Re(t,i,c)}break;case 5:var a=t.return;try{ca(t)}catch(c){Re(t,a,c)}}}catch(c){Re(t,t.return,c)}if(t===e){B=null;break}var o=t.sibling;if(o!==null){o.return=t.return,B=o;break}B=t.return}}var Om=Math.ceil,xl=tn.ReactCurrentDispatcher,eo=tn.ReactCurrentOwner,Nt=tn.ReactCurrentBatchConfig,ce=0,Ue=null,ze=null,Ve=0,ut=0,ss=kn(0),He=0,cr=null,An=0,Rl=0,to=0,Vs=null,rt=null,no=0,vs=1/0,Qt=null,jl=!1,ha=null,yn=null,Fr=!1,hn=null,wl=0,Qs=0,fa=null,Zr=-1,Jr=0;function et(){return ce&6?Ae():Zr!==-1?Zr:Zr=Ae()}function xn(e){return e.mode&1?ce&2&&Ve!==0?Ve&-Ve:Sm.transition!==null?(Jr===0&&(Jr=zu()),Jr):(e=me,e!==0||(e=window.event,e=e===void 0?16:Qu(e.type)),e):1}function _t(e,t,n,r){if(50<Qs)throw Qs=0,fa=null,Error(R(185));dr(e,n,r),(!(ce&2)||e!==Ue)&&(e===Ue&&(!(ce&2)&&(Rl|=n),He===4&&un(e,Ve)),ot(e,r),n===1&&ce===0&&!(t.mode&1)&&(vs=Ae()+500,Dl&&bn()))}function ot(e,t){var n=e.callbackNode;Sf(e,t);var r=rl(e,e===Ue?Ve:0);if(r===0)n!==null&&$o(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$o(n),t===1)e.tag===0?Nm(Cc.bind(null,e)):dd(Cc.bind(null,e)),ym(function(){!(ce&6)&&bn()}),n=null;else{switch(Ou(r)){case 1:n=Pa;break;case 4:n=Iu;break;case 16:n=sl;break;case 536870912:n=Au;break;default:n=sl}n=ch(n,nh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nh(e,t){if(Zr=-1,Jr=0,ce&6)throw Error(R(327));var n=e.callbackNode;if(cs()&&e.callbackNode!==n)return null;var r=rl(e,e===Ue?Ve:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Nl(e,r);else{t=r;var l=ce;ce|=2;var i=rh();(Ue!==e||Ve!==t)&&(Qt=null,vs=Ae()+500,Ln(e,t));do try{Um();break}catch(o){sh(e,o)}while(!0);Ha(),xl.current=i,ce=l,ze!==null?t=0:(Ue=null,Ve=0,t=He)}if(t!==0){if(t===2&&(l=Oi(e),l!==0&&(r=l,t=ma(e,l))),t===1)throw n=cr,Ln(e,0),un(e,r),ot(e,Ae()),n;if(t===6)un(e,r);else{if(l=e.current.alternate,!(r&30)&&!Hm(l)&&(t=Nl(e,r),t===2&&(i=Oi(e),i!==0&&(r=i,t=ma(e,i))),t===1))throw n=cr,Ln(e,0),un(e,r),ot(e,Ae()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:Mn(e,rt,Qt);break;case 3:if(un(e,r),(r&130023424)===r&&(t=no+500-Ae(),10<t)){if(rl(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){et(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Gi(Mn.bind(null,e,rt,Qt),t);break}Mn(e,rt,Qt);break;case 4:if(un(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var a=31-Dt(r);i=1<<a,a=t[a],a>l&&(l=a),r&=~i}if(r=l,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Om(r/1960))-r,10<r){e.timeoutHandle=Gi(Mn.bind(null,e,rt,Qt),r);break}Mn(e,rt,Qt);break;case 5:Mn(e,rt,Qt);break;default:throw Error(R(329))}}}return ot(e,Ae()),e.callbackNode===n?nh.bind(null,e):null}function ma(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(Ln(e,t).flags|=256),e=Nl(e,t),e!==2&&(t=rt,rt=n,t!==null&&pa(t)),e}function pa(e){rt===null?rt=e:rt.push.apply(rt,e)}function Hm(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],i=l.getSnapshot;l=l.value;try{if(!Lt(i(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function un(e,t){for(t&=~to,t&=~Rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Dt(t),r=1<<n;e[n]=-1,t&=~r}}function Cc(e){if(ce&6)throw Error(R(327));cs();var t=rl(e,0);if(!(t&1))return ot(e,Ae()),null;var n=Nl(e,t);if(e.tag!==0&&n===2){var r=Oi(e);r!==0&&(t=r,n=ma(e,r))}if(n===1)throw n=cr,Ln(e,0),un(e,t),ot(e,Ae()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mn(e,rt,Qt),ot(e,Ae()),null}function so(e,t){var n=ce;ce|=1;try{return e(t)}finally{ce=n,ce===0&&(vs=Ae()+500,Dl&&bn())}}function zn(e){hn!==null&&hn.tag===0&&!(ce&6)&&cs();var t=ce;ce|=1;var n=Nt.transition,r=me;try{if(Nt.transition=null,me=1,e)return e()}finally{me=r,Nt.transition=n,ce=t,!(ce&6)&&bn()}}function ro(){ut=ss.current,be(ss)}function Ln(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gm(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Aa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cl();break;case 3:ms(),be(it),be(Xe),Ka();break;case 5:Qa(r);break;case 4:ms();break;case 13:be(Te);break;case 19:be(Te);break;case 10:Ba(r.type._context);break;case 22:case 23:ro()}n=n.return}if(Ue=e,ze=e=jn(e.current,null),Ve=ut=t,He=0,cr=null,to=Rl=An=0,rt=Vs=null,Dn!==null){for(t=0;t<Dn.length;t++)if(n=Dn[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=l,r.next=a}n.pending=r}Dn=null}return e}function sh(e,t){do{var n=ze;try{if(Ha(),Gr.current=yl,gl){for(var r=De.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}gl=!1}if(In=0,Be=Oe=De=null,Us=!1,ir=0,eo.current=null,n===null||n.return===null){He=1,cr=t,ze=null;break}e:{var i=e,a=n.return,o=n,c=t;if(t=Ve,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=c,x=o,j=x.tag;if(!(x.mode&1)&&(j===0||j===11||j===15)){var p=x.alternate;p?(x.updateQueue=p.updateQueue,x.memoizedState=p.memoizedState,x.lanes=p.lanes):(x.updateQueue=null,x.memoizedState=null)}var N=fc(a);if(N!==null){N.flags&=-257,mc(N,a,o,i,t),N.mode&1&&hc(i,m,t),t=N,c=m;var g=t.updateQueue;if(g===null){var w=new Set;w.add(c),t.updateQueue=w}else g.add(c);break e}else{if(!(t&1)){hc(i,m,t),lo();break e}c=Error(R(426))}}else if(Pe&&o.mode&1){var F=fc(a);if(F!==null){!(F.flags&65536)&&(F.flags|=256),mc(F,a,o,i,t),za(ps(c,o));break e}}i=c=ps(c,o),He!==4&&(He=2),Vs===null?Vs=[i]:Vs.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var f=Od(i,c,t);ic(i,f);break e;case 1:o=c;var h=i.type,u=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(yn===null||!yn.has(u)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=Hd(i,o,t);ic(i,y);break e}}i=i.return}while(i!==null)}ih(n)}catch(b){t=b,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function rh(){var e=xl.current;return xl.current=yl,e===null?yl:e}function lo(){(He===0||He===3||He===2)&&(He=4),Ue===null||!(An&268435455)&&!(Rl&268435455)||un(Ue,Ve)}function Nl(e,t){var n=ce;ce|=2;var r=rh();(Ue!==e||Ve!==t)&&(Qt=null,Ln(e,t));do try{Bm();break}catch(l){sh(e,l)}while(!0);if(Ha(),ce=n,xl.current=r,ze!==null)throw Error(R(261));return Ue=null,Ve=0,He}function Bm(){for(;ze!==null;)lh(ze)}function Um(){for(;ze!==null&&!mf();)lh(ze)}function lh(e){var t=oh(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?ih(e):ze=t,eo.current=null}function ih(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Fm(n,t),n!==null){n.flags&=32767,ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,ze=null;return}}else if(n=Rm(n,t,ut),n!==null){ze=n;return}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);He===0&&(He=5)}function Mn(e,t,n){var r=me,l=Nt.transition;try{Nt.transition=null,me=1,Wm(e,t,n,r)}finally{Nt.transition=l,me=r}return null}function Wm(e,t,n,r){do cs();while(hn!==null);if(ce&6)throw Error(R(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(kf(e,i),e===Ue&&(ze=Ue=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fr||(Fr=!0,ch(sl,function(){return cs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var a=me;me=1;var o=ce;ce|=4,eo.current=null,Am(e,n),eh(n,e),um(Qi),ll=!!Vi,Qi=Vi=null,e.current=n,zm(n),pf(),ce=o,me=a,Nt.transition=i}else e.current=n;if(Fr&&(Fr=!1,hn=e,wl=l),i=e.pendingLanes,i===0&&(yn=null),yf(n.stateNode),ot(e,Ae()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(jl)throw jl=!1,e=ha,ha=null,e;return wl&1&&e.tag!==0&&cs(),i=e.pendingLanes,i&1?e===fa?Qs++:(Qs=0,fa=e):Qs=0,bn(),null}function cs(){if(hn!==null){var e=Ou(wl),t=Nt.transition,n=me;try{if(Nt.transition=null,me=16>e?16:e,hn===null)var r=!1;else{if(e=hn,hn=null,wl=0,ce&6)throw Error(R(331));var l=ce;for(ce|=4,B=e.current;B!==null;){var i=B,a=i.child;if(B.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var m=o[c];for(B=m;B!==null;){var x=B;switch(x.tag){case 0:case 11:case 15:Ws(8,x,i)}var j=x.child;if(j!==null)j.return=x,B=j;else for(;B!==null;){x=B;var p=x.sibling,N=x.return;if(Zd(x),x===m){B=null;break}if(p!==null){p.return=N,B=p;break}B=N}}}var g=i.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var F=w.sibling;w.sibling=null,w=F}while(w!==null)}}B=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,B=a;else e:for(;B!==null;){if(i=B,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ws(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,B=f;break e}B=i.return}}var h=e.current;for(B=h;B!==null;){a=B;var u=a.child;if(a.subtreeFlags&2064&&u!==null)u.return=a,B=u;else e:for(a=h;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:$l(9,o)}}catch(b){Re(o,o.return,b)}if(o===a){B=null;break e}var y=o.sibling;if(y!==null){y.return=o.return,B=y;break e}B=o.return}}if(ce=l,bn(),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Cl,e)}catch{}r=!0}return r}finally{me=n,Nt.transition=t}}return!1}function Ec(e,t,n){t=ps(n,t),t=Od(e,t,1),e=gn(e,t,1),t=et(),e!==null&&(dr(e,1,t),ot(e,t))}function Re(e,t,n){if(e.tag===3)Ec(e,e,n);else for(;t!==null;){if(t.tag===3){Ec(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yn===null||!yn.has(r))){e=ps(n,e),e=Hd(t,e,1),t=gn(t,e,1),e=et(),t!==null&&(dr(t,1,e),ot(t,e));break}}t=t.return}}function Vm(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&n,Ue===e&&(Ve&n)===n&&(He===4||He===3&&(Ve&130023424)===Ve&&500>Ae()-no?Ln(e,0):to|=n),ot(e,t)}function ah(e,t){t===0&&(e.mode&1?(t=Cr,Cr<<=1,!(Cr&130023424)&&(Cr=4194304)):t=1);var n=et();e=qt(e,t),e!==null&&(dr(e,t,n),ot(e,n))}function Qm(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ah(e,n)}function Km(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),ah(e,n)}var oh;oh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)lt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return lt=!1,$m(e,t,n);lt=!!(e.flags&131072)}else lt=!1,Pe&&t.flags&1048576&&hd(t,hl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Xr(e,t),e=t.pendingProps;var l=ds(t,Xe.current);os(t,n),l=Ya(null,t,r,e,l,n);var i=Xa();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,at(r)?(i=!0,ul(t)):i=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Wa(t),l.updater=Ll,t.stateNode=l,l._reactInternals=t,ta(t,r,e,n),t=ra(null,t,r,!0,i,n)):(t.tag=0,Pe&&i&&Ia(t),qe(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Xr(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Ym(r),e=Pt(r,e),l){case 0:t=sa(null,t,r,e,n);break e;case 1:t=gc(null,t,r,e,n);break e;case 11:t=pc(null,t,r,e,n);break e;case 14:t=vc(null,t,r,Pt(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Pt(r,l),sa(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Pt(r,l),gc(e,t,r,l,n);case 3:e:{if(Vd(t),e===null)throw Error(R(387));r=t.pendingProps,i=t.memoizedState,l=i.element,yd(e,t),pl(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){l=ps(Error(R(423)),t),t=yc(e,t,r,n,l);break e}else if(r!==l){l=ps(Error(R(424)),t),t=yc(e,t,r,n,l);break e}else for(dt=vn(t.stateNode.containerInfo.firstChild),ht=t,Pe=!0,Tt=null,n=vd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hs(),r===l){t=en(e,t,n);break e}qe(e,t,r,n)}t=t.child}return t;case 5:return xd(t),e===null&&Ji(t),r=t.type,l=t.pendingProps,i=e!==null?e.memoizedProps:null,a=l.children,Ki(r,l)?a=null:i!==null&&Ki(r,i)&&(t.flags|=32),Wd(e,t),qe(e,t,a,n),t.child;case 6:return e===null&&Ji(t),null;case 13:return Qd(e,t,n);case 4:return Va(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=fs(t,null,r,n):qe(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Pt(r,l),pc(e,t,r,l,n);case 7:return qe(e,t,t.pendingProps,n),t.child;case 8:return qe(e,t,t.pendingProps.children,n),t.child;case 12:return qe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,i=t.memoizedProps,a=l.value,Ne(fl,r._currentValue),r._currentValue=a,i!==null)if(Lt(i.value,a)){if(i.children===l.children&&!it.current){t=en(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Xt(-1,n&-n),c.tag=2;var m=i.updateQueue;if(m!==null){m=m.shared;var x=m.pending;x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),qi(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(R(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),qi(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}qe(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,os(t,n),l=St(l),r=r(l),t.flags|=1,qe(e,t,r,n),t.child;case 14:return r=t.type,l=Pt(r,t.pendingProps),l=Pt(r.type,l),vc(e,t,r,l,n);case 15:return Bd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Pt(r,l),Xr(e,t),t.tag=1,at(r)?(e=!0,ul(t)):e=!1,os(t,n),zd(t,r,l),ta(t,r,l,n),ra(null,t,r,!0,e,n);case 19:return Kd(e,t,n);case 22:return Ud(e,t,n)}throw Error(R(156,t.tag))};function ch(e,t){return Fu(e,t)}function Gm(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,n,r){return new Gm(e,t,n,r)}function io(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ym(e){if(typeof e=="function")return io(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ba)return 11;if(e===Ca)return 14}return 2}function jn(e,t){var n=e.alternate;return n===null?(n=wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qr(e,t,n,r,l,i){var a=2;if(r=e,typeof e=="function")io(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Kn:return $n(n.children,l,i,t);case ka:a=8,l|=8;break;case bi:return e=wt(12,n,t,l|2),e.elementType=bi,e.lanes=i,e;case Ci:return e=wt(13,n,t,l),e.elementType=Ci,e.lanes=i,e;case Ei:return e=wt(19,n,t,l),e.elementType=Ei,e.lanes=i,e;case xu:return Fl(n,l,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gu:a=10;break e;case yu:a=9;break e;case ba:a=11;break e;case Ca:a=14;break e;case an:a=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=wt(a,n,t,l),t.elementType=e,t.type=r,t.lanes=i,t}function $n(e,t,n,r){return e=wt(7,e,r,t),e.lanes=n,e}function Fl(e,t,n,r){return e=wt(22,e,r,t),e.elementType=xu,e.lanes=n,e.stateNode={isHidden:!1},e}function pi(e,t,n){return e=wt(6,e,null,t),e.lanes=n,e}function vi(e,t,n){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xm(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function ao(e,t,n,r,l,i,a,o,c){return e=new Xm(e,t,n,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=wt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wa(i),e}function Zm(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function uh(e){if(!e)return Nn;e=e._reactInternals;e:{if(Hn(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(at(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(at(n))return ud(e,n,t)}return t}function dh(e,t,n,r,l,i,a,o,c){return e=ao(n,r,!0,e,l,i,a,o,c),e.context=uh(null),n=e.current,r=et(),l=xn(n),i=Xt(r,l),i.callback=t??null,gn(n,i,l),e.current.lanes=l,dr(e,l,r),ot(e,r),e}function Il(e,t,n,r){var l=t.current,i=et(),a=xn(l);return n=uh(n),t.context===null?t.context=n:t.pendingContext=n,t=Xt(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=gn(l,t,a),e!==null&&(_t(e,l,a,i),Kr(e,l,a)),a}function Sl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function oo(e,t){Pc(e,t),(e=e.alternate)&&Pc(e,t)}function Jm(){return null}var hh=typeof reportError=="function"?reportError:function(e){console.error(e)};function co(e){this._internalRoot=e}Al.prototype.render=co.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));Il(e,t,null,null)};Al.prototype.unmount=co.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zn(function(){Il(null,e,null,null)}),t[Jt]=null}};function Al(e){this._internalRoot=e}Al.prototype.unstable_scheduleHydration=function(e){if(e){var t=Uu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<cn.length&&t!==0&&t<cn[n].priority;n++);cn.splice(n,0,e),n===0&&Vu(e)}};function uo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Mc(){}function qm(e,t,n,r,l){if(l){if(typeof r=="function"){var i=r;r=function(){var m=Sl(a);i.call(m)}}var a=dh(t,r,e,0,null,!1,!1,"",Mc);return e._reactRootContainer=a,e[Jt]=a.current,tr(e.nodeType===8?e.parentNode:e),zn(),a}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var o=r;r=function(){var m=Sl(c);o.call(m)}}var c=ao(e,0,!1,null,null,!1,!1,"",Mc);return e._reactRootContainer=c,e[Jt]=c.current,tr(e.nodeType===8?e.parentNode:e),zn(function(){Il(t,c,n,r)}),c}function Ol(e,t,n,r,l){var i=n._reactRootContainer;if(i){var a=i;if(typeof l=="function"){var o=l;l=function(){var c=Sl(a);o.call(c)}}Il(t,a,e,l)}else a=qm(n,t,e,l,r);return Sl(a)}Hu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fs(t.pendingLanes);n!==0&&(Ma(t,n|1),ot(t,Ae()),!(ce&6)&&(vs=Ae()+500,bn()))}break;case 13:zn(function(){var r=qt(e,1);if(r!==null){var l=et();_t(r,e,1,l)}}),oo(e,1)}};Ta=function(e){if(e.tag===13){var t=qt(e,134217728);if(t!==null){var n=et();_t(t,e,134217728,n)}oo(e,134217728)}};Bu=function(e){if(e.tag===13){var t=xn(e),n=qt(e,t);if(n!==null){var r=et();_t(n,e,t,r)}oo(e,t)}};Uu=function(){return me};Wu=function(e,t){var n=me;try{return me=e,t()}finally{me=n}};Ii=function(e,t,n){switch(t){case"input":if(Ti(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=Tl(r);if(!l)throw Error(R(90));wu(r),Ti(r,l)}}}break;case"textarea":Su(e,n);break;case"select":t=n.value,t!=null&&rs(e,!!n.multiple,t,!1)}};Tu=so;Du=zn;var ep={usingClientEntryPoint:!1,Events:[fr,Zn,Tl,Pu,Mu,so]},Ps={findFiberByHostInstance:Tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tp={bundleType:Ps.bundleType,version:Ps.version,rendererPackageName:Ps.rendererPackageName,rendererConfig:Ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$u(e),e===null?null:e.stateNode},findFiberByHostInstance:Ps.findFiberByHostInstance||Jm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ir=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ir.isDisabled&&Ir.supportsFiber)try{Cl=Ir.inject(tp),zt=Ir}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ep;mt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uo(t))throw Error(R(200));return Zm(e,t,null,n)};mt.createRoot=function(e,t){if(!uo(e))throw Error(R(299));var n=!1,r="",l=hh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=ao(e,1,!1,null,null,n,!1,r,l),e[Jt]=t.current,tr(e.nodeType===8?e.parentNode:e),new co(t)};mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=$u(t),e=e===null?null:e.stateNode,e};mt.flushSync=function(e){return zn(e)};mt.hydrate=function(e,t,n){if(!zl(t))throw Error(R(200));return Ol(null,e,t,!0,n)};mt.hydrateRoot=function(e,t,n){if(!uo(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,l=!1,i="",a=hh;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=dh(t,null,e,1,n??null,l,!1,i,a),e[Jt]=t.current,tr(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Al(t)};mt.render=function(e,t,n){if(!zl(t))throw Error(R(200));return Ol(null,e,t,!1,n)};mt.unmountComponentAtNode=function(e){if(!zl(e))throw Error(R(40));return e._reactRootContainer?(zn(function(){Ol(null,null,e,!1,function(){e._reactRootContainer=null,e[Jt]=null})}),!0):!1};mt.unstable_batchedUpdates=so;mt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!zl(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return Ol(e,t,n,!1,r)};mt.version="18.3.1-next-f1338f8080-20240426";function fh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fh)}catch(e){console.error(e)}}fh(),fu.exports=mt;var np=fu.exports,Tc=np;Si.createRoot=Tc.createRoot,Si.hydrateRoot=Tc.hydrateRoot;const Hl=4;function sp(e,t=Hl){return((e-t)%24+24)%24}function rp(e,t=Hl){const n=new Date(e);return n.getHours()<t&&n.setDate(n.getDate()-1),n.setHours(t,0,0,0),n.getTime()}function lp({api:e}){const[t,n]=d.useState(null),[r,l]=d.useState(0),[i,a]=d.useState("strict"),[o,c]=d.useState(25),[m,x]=d.useState(5),[j,p]=d.useState(5),[N,g]=d.useState([]),[w,F]=d.useState([]),[f,h]=d.useState(""),[u,y]=d.useState(!1);d.useEffect(()=>{e.pomodoro.status().then(T=>{T&&(n(T),l(T.remainingMs),a(T.mode))});const $=e.events.on("pomodoro:tick",T=>{n(M=>M?{...M,...T}:T),l(T.remainingMs)}),H=e.events.on("pomodoro:start",T=>{n(T),l(T.remainingMs),a(T.mode)}),Z=e.events.on("pomodoro:stop",()=>{n(null),l(0)}),Q=e.events.on("pomodoro:pause",T=>n(T)),X=e.events.on("pomodoro:resume",T=>n(T));return()=>{$(),H(),Z(),Q(),X()}},[e]),d.useEffect(()=>{e.settings.categorisation().then($=>{const H=($?.productive??[]).map(M=>({value:M,kind:"site"})),Z=[{value:"docs.google.com",kind:"site"},{value:"notion.so",kind:"site"},{value:"linear.app",kind:"site"},{value:"github.com",kind:"site"},{value:"stackoverflow.com",kind:"site"}],Q=[...H,...Z],X=[],T=new Set;for(const M of Q){const I=`${M.kind}:${M.value.toLowerCase()}`;T.has(I)||(T.add(I),X.push(M))}F(X),g(X.slice(0,3))}).catch(()=>{F([{value:"docs.google.com",kind:"site"},{value:"notion.so",kind:"site"},{value:"linear.app",kind:"site"}]),g([{value:"docs.google.com",kind:"site"},{value:"notion.so",kind:"site"},{value:"linear.app",kind:"site"}])})},[e.settings]);const b=d.useMemo(()=>{const $=t?r:o*60*1e3,H=Math.max(0,Math.round($/1e3)),Z=Math.floor(H/60),Q=H%60;return`${Z.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`},[r,o,t]);async function C(){try{y(!0);const $=N.map((Q,X)=>({id:`${Q.value}-${X}`,kind:Q.kind,value:Q.value})),H={durationSec:o*60,breakDurationSec:m*60,mode:i,allowlist:$,temporaryUnlockSec:j*60},Z=await e.pomodoro.start(H);n(Z),l(Z.remainingMs)}catch($){console.error("Failed to start pomodoro",$)}finally{y(!1)}}function v($){const H=$.trim();H&&(N.some(Z=>Z.value.toLowerCase()===H.toLowerCase())||g(Z=>[...Z,{value:H,kind:"site"}]))}function S($){g(H=>H.filter(Z=>Z.value!==$))}async function D($="canceled"){y(!0);try{await e.pomodoro.stop($),n(null),l(0)}catch(H){console.error("Failed to stop pomodoro",H)}finally{y(!1)}}async function L(){y(!0);try{const $=await e.pomodoro.pause();n($)}catch($){console.error($)}finally{y(!1)}}async function W(){y(!0);try{const $=await e.pomodoro.resume();n($)}catch($){console.error($)}finally{y(!1)}}async function Y(){y(!0);try{const $=await e.pomodoro.startBreak(m*60);n($)}catch($){console.error($)}finally{y(!1)}}return s.jsxs("div",{className:"card pomodoro-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Pomodoro"}),s.jsx("h2",{children:"Allowlist focus"})]}),s.jsx("span",{className:"pill ghost",children:t?t.mode:i})]}),s.jsxs("div",{className:"pomodoro-grid",children:[s.jsxs("div",{className:"pomodoro-timer",children:[s.jsxs("div",{className:"pomodoro-face",children:[s.jsx("span",{className:"pomodoro-time",children:b}),s.jsx("span",{className:"pomodoro-label",children:t?t.state:"idle"})]}),s.jsx("div",{className:"pomodoro-controls",children:t?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>D("canceled"),disabled:u,className:"ghost",children:"End"}),t.state==="paused"?s.jsx("button",{onClick:W,disabled:u,className:"primary",children:"Resume"}):s.jsx("button",{onClick:L,disabled:u,className:"ghost",children:"Pause"}),s.jsx("button",{onClick:Y,disabled:u,className:"ghost",children:"Start break"})]}):s.jsx("button",{onClick:C,disabled:u,className:"primary",children:"Start focus"})})]}),s.jsxs("div",{className:"pomodoro-config",children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Duration (minutes)"}),s.jsx("input",{type:"number",min:5,max:180,value:o,onChange:$=>c(Number($.target.value)||0)})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Break length (minutes)"}),s.jsx("input",{type:"number",min:1,max:60,value:m,onChange:$=>x(Number($.target.value)||0)})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Mode"}),s.jsxs("div",{className:"segmented",children:[s.jsx("button",{className:i==="strict"?"active":"",onClick:()=>a("strict"),children:"Strict"}),s.jsx("button",{className:i==="soft"?"active":"",onClick:()=>a("soft"),children:"Soft"})]})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Soft unlock minutes"}),s.jsx("input",{type:"number",min:1,max:30,value:j,onChange:$=>p(Number($.target.value)||0)})]}),s.jsxs("label",{className:"field",children:[s.jsxs("div",{className:"field-label",children:[s.jsx("span",{children:"Allowlist"}),s.jsx("span",{className:"info-tooltip",title:"Add productive domains in the Domains section!",children:"?"})]}),s.jsxs("div",{className:"allowlist-picker",children:[s.jsxs("select",{value:"",onChange:$=>{v($.target.value)},children:[s.jsx("option",{value:"",disabled:!0,children:"Select a site"}),w.filter($=>!N.some(H=>H.value===$.value&&H.kind===$.kind)).map($=>s.jsx("option",{value:$.value,children:$.value},$.value))]}),s.jsxs("div",{className:"allowlist-custom",children:[s.jsx("input",{type:"text",placeholder:"custom site or app",value:f,onChange:$=>h($.target.value)}),s.jsx("button",{type:"button",className:"ghost",onClick:()=>{v(f),h("")},disabled:!f.trim(),children:"Add"})]}),N.length>0&&s.jsx("div",{className:"allowlist-tags",children:N.map($=>s.jsxs("span",{className:"pill",children:[$.value,s.jsx("button",{type:"button",className:"chip-remove",onClick:()=>S($.value),"aria-label":`Remove ${$.value}`,children:""})]},$.value))})]})]})]})]})]})}const gt={productive:"var(--cat-productive)",neutral:"var(--cat-neutral)",frivolity:"var(--cat-frivolity)",draining:"var(--cat-draining)",idle:"var(--cat-idle)"};function ip({summary:e,economy:t}){const[n,r]=d.useState("aggregate"),[l,i]=d.useState(null),a=d.useMemo(()=>{if(!e)return null;const g=e.totalsByCategory,w=[{key:"productive",label:"Productive",seconds:g.productive??0,color:gt.productive},{key:"neutral",label:"Neutral",seconds:(g.neutral??0)+(g.uncategorised??0),color:gt.neutral},{key:"frivolity",label:"Frivolity",seconds:g.frivolity??0,color:gt.frivolity},{key:"draining",label:"Draining",seconds:g.draining??0,color:gt.draining},{key:"idle",label:"Idle",seconds:g.idle??0,color:gt.idle}].filter(u=>u.seconds>0),F=w.reduce((u,y)=>u+y.seconds,0);let f=-90;return{arcs:w.map(u=>{const y=F?u.seconds/F*360:0,b=Dc(150,150,120,f,f+y);return f+=y,{path:b,color:u.color,label:u.label,seconds:u.seconds}}),slices:w,totalSeconds:Math.max(0,F)}},[e]),o=d.useMemo(()=>{if(!e||e.timeline.length===0)return{arcs:[],centerSeconds:0};const g=360/e.timeline.length,w=(e.windowHours??24)*3600,F=e.timeline.map((h,u)=>{const y=u*g-90,b=y+g,C=Dc(150,150,120,y,b),v=gt[h.dominant]??gt.neutral;return{path:C,color:v,label:h.hour,slot:h,seconds:h.productive+h.neutral+h.frivolity+h.draining+h.idle}}),f=Math.min(w,(e.totalSeconds??0)+(e.totalsByCategory.idle??0));return{arcs:F,centerSeconds:f}},[e]);if(!e)return s.jsxs("article",{className:"card compass-card",children:[s.jsx("h2",{children:"Day compass"}),s.jsx("p",{className:"subtle",children:"We need at least one tracked session to build your orbit."})]});const c=n==="timeline"?l!==null?e.timeline[l]:e.timeline[e.timeline.length-1]:null,m=c?.dominant,x=n==="aggregate"?a?.slices??[]:c?[{label:"Productive",seconds:c.productive,color:gt.productive},{label:"Neutral",seconds:c.neutral,color:gt.neutral},{label:"Frivolity",seconds:c.frivolity,color:gt.frivolity},{label:"Draining",seconds:c.draining,color:gt.draining},{label:"Idle",seconds:c.idle,color:gt.idle}]:[],j=(e?.windowHours??24)*3600,p=n==="aggregate"?Math.min(j,a?.totalSeconds??0):o.centerSeconds,N=n==="aggregate"?a?.arcs??[]:o.arcs;return s.jsxs("article",{className:"card compass-card",children:[s.jsxs("div",{className:"card-header-row compass-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Day diagram"}),s.jsx("h2",{children:"Orbit of attention"})]}),s.jsxs("div",{className:"compass-controls",children:[s.jsxs("div",{className:"compass-toggle",children:[s.jsx("button",{className:n==="aggregate"?"active":"",onClick:()=>{r("aggregate"),i(null)},children:"Total day"}),s.jsx("button",{className:n==="timeline"?"active":"",onClick:()=>{r("timeline"),i(null)},children:"24h orbit"})]}),s.jsxs("span",{className:"pill ghost",children:[t?.activeCategory??"idle","  live"]})]})]}),s.jsxs("div",{className:"compass-body",children:[s.jsxs("div",{className:"compass-visual",children:[s.jsxs("svg",{viewBox:"0 0 300 300",role:"img","aria-label":"Day compass",children:[s.jsx("circle",{cx:"150",cy:"150",r:"140",fill:"rgba(255,255,255,0.02)",stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"}),N.map((g,w)=>s.jsx("path",{d:g.path,fill:g.color,opacity:l!==null&&l!==w?.35:.92,onMouseEnter:()=>i(w),onMouseLeave:()=>i(null)},`${g.label}-${w}`)),s.jsx("circle",{cx:"150",cy:"150",r:"80",fill:"var(--bg-soft)",stroke:"rgba(255,255,255,0.08)",strokeWidth:"2"}),s.jsx("text",{x:"150",y:"140",textAnchor:"middle",className:"compass-center",children:op(p)}),s.jsx("text",{x:"150",y:"165",textAnchor:"middle",className:"compass-center-sub",children:n==="aggregate"?"hours captured":`${e.windowHours}h window`})]}),n==="timeline"&&c&&s.jsxs("div",{className:"compass-tooltip",children:[s.jsxs("div",{children:[s.jsx("span",{className:"tooltip-hour",children:c.hour}),s.jsx("span",{className:"tooltip-dominant",children:m})]}),c.topContext?s.jsxs("p",{children:[c.topContext.label,s.jsx("br",{}),s.jsxs("small",{children:[Math.round(c.topContext.seconds/60)," min captured"]})]}):s.jsx("p",{children:"No activity recorded"})]})]}),s.jsx("div",{className:"compass-details",children:x.map(g=>s.jsxs("div",{className:"detail-row",children:[s.jsxs("div",{className:"legend-chip",children:[s.jsx("span",{style:{background:g.color}}),s.jsx("span",{children:g.label})]}),s.jsx("strong",{children:ap(g.seconds)})]},g.label))})]})]})}function Dc(e,t,n,r,l){const i=_c(e,t,n,l),a=_c(e,t,n,r),o=l-r<=180?"0":"1";return["M",i.x,i.y,"A",n,n,0,o,0,a.x,a.y,"L",e,t,"Z"].join(" ")}function _c(e,t,n,r){const l=r*Math.PI/180;return{x:e+n*Math.cos(l),y:t+n*Math.sin(l)}}function ap(e){return e?`${Math.round(e/60)}m`:"0m"}function op(e){const t=Math.max(0,e)/3600;return`${Math.round(t*10)/10}h`}function cp({activities:e,summary:t}){const n={productive:"var(--cat-productive)",neutral:"var(--cat-neutral)",frivolity:"var(--cat-frivolity)",draining:"var(--cat-draining)",idle:"var(--cat-idle)"},[r,l]=d.useState(null),i=Date.now()-24*60*60*1e3,a=d.useMemo(()=>{if(t){const C=t.totalsByCategory,v=C.productive??0,S=(C.neutral??0)+(C.uncategorised??0),D=C.frivolity??0,L=C.draining??0,W=C.idle??0;return{total:v+S+D+L+W,byCategory:{productive:v,neutral:S,frivolity:D,draining:L,idle:W}}}const f=e.filter(C=>new Date(C.startedAt).getTime()>=i),h=f.reduce((C,v)=>C+v.secondsActive,0),u=f.reduce((C,v)=>C+v.idleSeconds,0),y=h+u,b={productive:0,neutral:0,frivolity:0,draining:0,idle:0};return f.forEach(C=>{const v=C.category||"neutral";b[v]=(b[v]||0)+C.secondsActive}),b.idle=u,{total:y,byCategory:b}},[e,t,i]),o=d.useMemo(()=>{const f={productive:[],neutral:[],frivolity:[],draining:[],idle:[]};if(t?.topContexts)t.topContexts.forEach(h=>{if(!h.category)return;const u=h.category;f[u].push({label:h.label,seconds:h.seconds})});else{const h=e.filter(y=>new Date(y.startedAt).getTime()>=i),u=new Map;h.forEach(y=>{const C=y.category||"neutral",v=y.domain??y.appName??"Unknown",S=`${C}:${v}`;u.has(S)||u.set(S,{label:v,cat:C,seconds:0});const D=u.get(S);D.seconds+=y.secondsActive}),u.forEach(y=>f[y.cat].push({label:y.label,seconds:y.seconds}))}return Object.keys(f).forEach(h=>{f[h]=f[h].sort((u,y)=>y.seconds-u.seconds)}),f},[e,t,i]);if(a.total===0)return s.jsx("div",{className:"card",style:{alignItems:"center",justifyContent:"center",minHeight:"240px"},children:s.jsx("p",{className:"subtle",children:"No activity recorded yet"})});let c=0;const m=90,x=110,p=Object.entries(a.byCategory).map(([f,h])=>{const u=h/a.total,y=u*360,b=x+m*Math.cos(Math.PI*c/180),C=x+m*Math.sin(Math.PI*c/180),v=x+m*Math.cos(Math.PI*(c+y)/180),S=x+m*Math.sin(Math.PI*(c+y)/180),D=y>180?1:0,L=[`M ${x} ${x}`,`L ${b} ${C}`,`A ${m} ${m} 0 ${D} 1 ${v} ${S}`,"Z"].join(" ");return c+=y,{category:f,path:L,color:n[f]||n.neutral,percentage:Math.round(u*100)}}),N=t?.topContexts?.[0],g=r,w=g?a.byCategory[g]??0:0,F=g&&a.total>0?Math.round(w/a.total*100):0;return s.jsxs("div",{className:"card activity-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Time distribution"}),s.jsx("p",{className:"subtle",children:"Blended from desktop apps and the extension feed."})]}),N&&s.jsxs("div",{className:"pill ghost",children:[N.label,"  ",Math.round(N.seconds/60),"m"]})]}),s.jsxs("div",{className:"activity-chart",style:{position:"relative",overflow:"visible"},children:[g&&s.jsxs("div",{className:"activity-tooltip",style:{position:"absolute",top:"50%",left:"260px",transform:"translateY(-50%)",background:"var(--bg-raised, #12141a)",border:`1px solid ${n[g]}`,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",zIndex:100,padding:"14px 16px",borderRadius:"10px",minWidth:"200px",maxWidth:"260px",lineHeight:1.45,fontSize:"13px",color:"var(--fg, #f0f0f0)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",paddingBottom:"10px",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[s.jsx("span",{style:{width:"10px",height:"10px",borderRadius:"50%",background:n[g],flexShrink:0}}),s.jsx("strong",{style:{textTransform:"capitalize",fontSize:"14px"},children:g}),s.jsxs("span",{style:{marginLeft:"auto",opacity:.6,fontSize:"12px"},children:[F,"%"]})]}),s.jsxs("div",{style:{marginBottom:"10px",fontSize:"11px",opacity:.7},children:[Lc(w)," total"]}),s.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0,maxHeight:"160px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"3px"},children:[o[g]?.length===0&&s.jsx("li",{style:{opacity:.5,fontSize:"12px"},children:"No entries"}),o[g]?.slice(0,6).map(f=>s.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px 6px",borderRadius:"4px",background:"rgba(255,255,255,0.04)",fontSize:"12px"},children:[s.jsx("span",{style:{maxWidth:"60%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:f.label}),s.jsxs("span",{style:{opacity:.6,fontSize:"11px"},children:[Math.round(f.seconds/60),"m"]})]},`${g}-${f.label}`))]})]}),s.jsxs("div",{className:"donut-shell",style:{position:"relative"},children:[s.jsx("div",{className:"donut-glow"}),s.jsxs("svg",{width:"240",height:"240",viewBox:"0 0 220 220",children:[p.map(f=>s.jsx("path",{d:f.path,fill:f.color,stroke:"rgba(255,255,255,0.14)",strokeWidth:"2",onMouseEnter:()=>l(f.category),onMouseLeave:()=>l(null)},f.category)),s.jsx("circle",{cx:x,cy:x,r:m*.6,fill:"var(--bg-soft)"})]}),s.jsxs("div",{className:"donut-center",children:[s.jsx("strong",{children:Lc(a.total)}),s.jsx("span",{children:"logged"})]})]}),s.jsx("ul",{className:"detail-list",style:{flex:1},children:p.map(f=>s.jsxs("li",{onMouseEnter:()=>l(f.category),onMouseLeave:()=>l(null),children:[s.jsxs("div",{className:"legend-chip",children:[s.jsx("span",{style:{width:"12px",height:"12px",borderRadius:"50%",background:f.color}}),s.jsx("span",{style:{textTransform:"capitalize"},children:f.category})]}),s.jsxs("div",{className:"legend-values",children:[s.jsxs("strong",{children:[f.percentage,"%"]}),s.jsxs("span",{className:"subtle",children:[Math.round((a.byCategory[f.category]??0)/60),"m"]})]})]},f.category))})]})]})}function Lc(e){const t=Math.max(0,Math.round(e/60)),n=Math.floor(t/60),r=t%60;return`${n}h ${r}m`}const $c={productive:"Productive",neutral:"Neutral",frivolity:"Frivolity",draining:"Draining",idle:"Idle"};function up({journey:e,loading:t,isRemote:n}){const r=d.useMemo(()=>e?e.segments.reduce((i,a)=>i+a.seconds,0):0,[e]);if(!e||e.segments.length===0)return s.jsxs("div",{className:"card journey-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Day journey"}),s.jsx("h2",{children:"Attention trail"})]}),s.jsx("span",{className:"pill ghost",children:t?"Loading...":n?"Local device only":"Local device"})]}),s.jsx("p",{className:"subtle",children:n?"Journey data is available on the active device.":"No activity recorded in this window yet."})]});const l=e.neutralCounts??[];return s.jsxs("div",{className:"card journey-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Day journey"}),s.jsx("h2",{children:"Attention trail"})]}),s.jsxs("span",{className:"pill ghost",children:[e.windowHours,"h window"]})]}),s.jsxs("div",{className:"journey-layout",children:[s.jsxs("div",{className:"journey-bar-wrap",children:[s.jsx("div",{className:"journey-bar",role:"img","aria-label":"Timeline of context switches",children:e.segments.map((i,a)=>{const o=r>0?i.seconds/r*100:0,c=i.label??"",m=[c||$c[i.category]||"Session",`${Rc(i.seconds)} active`].join(" - ");return s.jsx("div",{className:`journey-seg ${i.category}`,style:{flexGrow:i.seconds},title:m,children:c&&o>=6?s.jsx("span",{children:c}):null},`${i.start}-${a}`)})}),s.jsx("div",{className:"journey-legend",children:["productive","neutral","draining","frivolity","idle"].map(i=>s.jsxs("span",{className:"legend-chip",children:[s.jsx("span",{className:`dot ${i}`}),$c[i]]},i))})]}),s.jsxs("div",{className:"journey-neutral",children:[s.jsx("span",{className:"label",children:"Neutral touchpoints"}),l.length===0?s.jsx("span",{className:"subtle",children:"No neutral apps surfaced yet."}):s.jsx("div",{className:"journey-neutral-list",children:l.slice(0,5).map(i=>s.jsxs("div",{className:"journey-neutral-row",children:[s.jsx("span",{children:i.label}),s.jsxs("span",{className:"subtle",children:[i.count,"  ",Rc(i.seconds)]})]},i.label))})]})]})]})}function Rc(e){return`${Math.max(1,Math.round(e/60))}m`}const dp=8,hp=14,Fc=32,gi=520,Un=24;function fp({journey:e,loading:t,isRemote:n}){const[r,l]=d.useState("flow"),{nodes:i,transitions:a}=d.useMemo(()=>{if(!e?.segments?.length)return{nodes:[],transitions:[]};const g=e.segments.filter(u=>!!u.label);if(g.length<2)return{nodes:[],transitions:[]};const w=new Map;for(let u=1;u<g.length;u+=1){const y=g[u-1].label??"",b=g[u].label??"";if(!y||!b||y===b)continue;const C=`${y}->${b}`,v=w.get(C);v?v.count+=1:w.set(C,{from:y,to:b,count:1})}const F=new Map;for(const u of w.values())F.set(u.from,(F.get(u.from)??0)+u.count),F.set(u.to,(F.get(u.to)??0)+u.count);const f=Array.from(F.entries()).sort((u,y)=>y[1]-u[1]).slice(0,dp).map(([u])=>u),h=Array.from(w.values()).filter(u=>f.includes(u.from)&&f.includes(u.to)).sort((u,y)=>y.count-u.count).slice(0,hp);return{nodes:f,transitions:h}},[e]),o=d.useMemo(()=>e?.segments?.length?e.segments.filter(w=>!!w.label).slice(-36):[],[e]),c=a.reduce((g,w)=>Math.max(g,w.count),1),m=Math.max(220,i.length*Fc+Un*2),x=140,j=gi-140,p=gi/2,N=new Map;return i.forEach((g,w)=>{N.set(g,Un+w*Fc)}),!e||e.segments.length===0?s.jsxs("div",{className:"card attention-map-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Attention map"}),s.jsx("h2",{children:"Context flow"})]}),s.jsx("span",{className:"pill ghost",children:t?"Loading...":n?"Local device only":"Local device"})]}),s.jsx("p",{className:"subtle",children:n?"Flow maps are generated on the active device.":"No activity recorded in this window yet."})]}):s.jsxs("div",{className:"card attention-map-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Attention map"}),s.jsx("h2",{children:"Context flow"})]}),s.jsxs("div",{className:"attention-map-controls",children:[s.jsx("button",{type:"button",className:`pill ghost ${r==="flow"?"active":""}`,onClick:()=>l("flow"),children:"Flow map"}),s.jsx("button",{type:"button",className:`pill ghost ${r==="path"?"active":""}`,onClick:()=>l("path"),children:"Day path"})]})]}),r==="flow"?s.jsxs("div",{className:"attention-map",children:[i.length===0||a.length===0?s.jsx("p",{className:"subtle",children:"Not enough context changes yet."}):s.jsxs("svg",{className:"attention-map-svg",viewBox:`0 0 ${gi} ${m}`,preserveAspectRatio:"xMidYMid meet",role:"img","aria-label":"Most common context switches",children:[s.jsx("defs",{children:s.jsx("marker",{id:"arrow",markerWidth:"8",markerHeight:"8",refX:"6",refY:"3",orient:"auto",children:s.jsx("path",{d:"M0,0 L6,3 L0,6",fill:"currentColor"})})}),a.map(g=>{const w=N.get(g.from)??Un,F=N.get(g.to)??Un,f=1+g.count/c*6,h=`M ${x} ${w} C ${p} ${w}, ${p} ${F}, ${j} ${F}`;return s.jsx("path",{d:h,className:"attention-map-link",strokeWidth:f,markerEnd:"url(#arrow)"},`${g.from}-${g.to}`)}),i.map(g=>{const w=N.get(g)??Un;return s.jsxs("g",{children:[s.jsx("circle",{cx:x,cy:w,r:4,className:"attention-map-node"}),s.jsx("text",{x:x-12,y:w+4,textAnchor:"end",className:"attention-map-label",children:g})]},`left-${g}`)}),i.map(g=>{const w=N.get(g)??Un;return s.jsxs("g",{children:[s.jsx("circle",{cx:j,cy:w,r:4,className:"attention-map-node"}),s.jsx("text",{x:j+12,y:w+4,textAnchor:"start",className:"attention-map-label",children:g})]},`right-${g}`)})]}),a.length>0&&s.jsx("div",{className:"attention-map-list",children:a.map(g=>s.jsxs("div",{className:"attention-map-row",children:[s.jsx("span",{children:g.from}),s.jsx("span",{className:"subtle",children:"->"}),s.jsx("span",{children:g.to}),s.jsxs("span",{className:"attention-map-count",children:[g.count,"x"]})]},`list-${g.from}-${g.to}`))})]}):s.jsxs("div",{className:"attention-path",children:[o.length===0?s.jsx("p",{className:"subtle",children:"Not enough labeled context yet."}):s.jsx("div",{className:"attention-path-strip",children:o.map((g,w)=>s.jsxs("div",{className:"attention-path-item",children:[s.jsx("span",{className:`attention-chip ${g.category}`,children:g.label}),s.jsx("span",{className:"subtle",children:mp(g.start)})]},`${g.start}-${w}`))}),s.jsx("p",{className:"subtle",children:"Showing recent labeled contexts in order."})]})]})}function mp(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function pp({api:e,overview:t,loading:n,onRefresh:r}){const l=typeof t<"u"||typeof n<"u",[i,a]=d.useState(null),[o,c]=d.useState(!0),[m,x]=d.useState([]),j=d.useCallback(async()=>{if(r){r();return}c(!0);try{const h=await e.analytics.overview(7);a(h)}catch(h){console.error("Failed to load insights:",h)}c(!1)},[e,r]);d.useEffect(()=>{l||j()},[l,j]),d.useEffect(()=>{e.settings.excludedKeywords().then(x).catch(()=>{})},[e]);const p=l?t??null:i,N=l?!!n:o,g=h=>{const u=h>=12?"PM":"AM";return`${h%12||12}${u}`};if(N)return s.jsxs("div",{className:"card insights-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:"Insights"}),s.jsx("span",{className:"loading-spinner"})]}),s.jsxs("div",{className:"insights-loading",children:[s.jsx("div",{className:"skeleton skeleton-text"}),s.jsx("div",{className:"skeleton skeleton-text short"}),s.jsx("div",{className:"skeleton skeleton-text"})]})]});if(!p)return null;const w=p.focusTrend==="improving"?"":p.focusTrend==="declining"?"":"",F=p.focusTrend==="improving"?"Improving":p.focusTrend==="declining"?"Declining":"Stable",f=h=>{if(!m.length)return h;let u=h;for(const y of m){if(!y)continue;const b=y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");u=u.replace(new RegExp(b,"gi"),"[hidden]")}return u};return s.jsxs("div",{className:"card insights-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:"Insights"}),s.jsx("button",{className:"pill ghost",onClick:j,disabled:N,children:"Refresh"})]}),s.jsxs("div",{className:"insights-summary",children:[s.jsxs("div",{className:"insight-metric",children:[s.jsxs("span",{className:"insight-value",children:[p.productivityScore,"%"]}),s.jsx("span",{className:"insight-label",children:"Productivity"})]}),s.jsxs("div",{className:"insight-metric",children:[s.jsx("span",{className:"insight-value",children:g(p.peakProductiveHour)}),s.jsx("span",{className:"insight-label",children:"Peak hour"})]}),s.jsxs("div",{className:"insight-metric",children:[s.jsx("span",{className:"insight-value",children:w}),s.jsx("span",{className:"insight-label",children:F})]})]}),s.jsxs("ul",{className:"insights-list",children:[p.insights.map((h,u)=>s.jsx("li",{className:"insight-item",children:f(h)},u)),p.insights.length===0&&s.jsx("li",{className:"insight-item subtle",children:"Not enough data yet. Keep tracking your activity!"})]}),p.riskHour!==p.peakProductiveHour&&s.jsxs("div",{className:"insight-warning",children:[s.jsx("span",{className:"warning-icon",children:""}),s.jsxs("span",{children:["Watch out at ",s.jsx("strong",{children:g(p.riskHour)})," - that's when you're most likely to get distracted."]})]})]})}function mh({open:e,friend:t,summary:n,timeline:r,publicLibraryItems:l=[],trophies:i=[],onClose:a}){if(!e||!t)return null;const o=r?.totalsByCategory??n?.categoryBreakdown??null,c=n?.totalActiveSeconds??0,m=n?.productivityScore??0,x=new Map(i.map(p=>[p.id,p])),j=(t.pinnedTrophies??[]).map(p=>x.get(p)).filter(p=>!!p);return s.jsx("div",{className:"friend-modal-overlay",onClick:a,children:s.jsxs("div",{className:"friend-modal",onClick:p=>p.stopPropagation(),children:[s.jsxs("div",{className:"friend-modal-header",children:[s.jsxs("div",{children:[s.jsx("h3",{children:t.displayName??t.handle??"Friend"}),s.jsxs("p",{className:"subtle",children:["@",t.handle??"no-handle"]})]}),s.jsx("button",{className:"ghost",onClick:a,children:"Close"})]}),s.jsxs("div",{className:"friend-modal-metrics",children:[s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Productivity"}),s.jsx("strong",{children:n?`${m}%`:"--"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Active time"}),s.jsx("strong",{children:n?Wn(c):"--"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Updated"}),s.jsx("strong",{children:n?new Date(n.updatedAt).toLocaleTimeString():"--"})]})]}),j.length>0&&s.jsx("div",{className:"friends-trophies",children:j.slice(0,4).map(p=>s.jsxs("span",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:p.emoji}),p.name]},p.id))}),o&&s.jsxs("div",{className:"friend-modal-breakdown",children:[s.jsxs("div",{className:"friend-modal-break-row",children:[s.jsx("span",{children:"Productive"}),s.jsx("span",{children:Wn(o.productive)})]}),s.jsxs("div",{className:"friend-modal-bar",children:[s.jsx("span",{className:"cat-productive",style:{width:`${Ms(o,"productive")}%`}}),s.jsx("span",{className:"cat-neutral",style:{width:`${Ms(o,"neutral")}%`}}),s.jsx("span",{className:"cat-frivolity",style:{width:`${Ms(o,"frivolity")}%`}}),s.jsx("span",{className:"cat-draining",style:{width:`${Ms(o,"draining")}%`}}),s.jsx("span",{className:"cat-idle",style:{width:`${Ms(o,"idle")}%`}})]}),s.jsxs("div",{className:"friend-modal-break-row",children:[s.jsx("span",{children:"Neutral"}),s.jsx("span",{children:Wn(o.neutral)})]}),s.jsxs("div",{className:"friend-modal-break-row",children:[s.jsx("span",{children:"Frivolity"}),s.jsx("span",{children:Wn(o.frivolity)})]}),s.jsxs("div",{className:"friend-modal-break-row",children:[s.jsx("span",{children:"Draining"}),s.jsx("span",{children:Wn(o.draining??0)})]}),s.jsxs("div",{className:"friend-modal-break-row",children:[s.jsx("span",{children:"Idle"}),s.jsx("span",{children:Wn(o.idle)})]})]}),l.length>0&&s.jsxs("div",{className:"friend-modal-library",children:[s.jsxs("div",{className:"friend-modal-timeline-header",style:{marginBottom:12},children:[s.jsx("span",{className:"label",children:"Public library"}),s.jsx("span",{className:"subtle",children:"Shared links"})]}),s.jsx("div",{className:"friend-modal-library-list",children:l.map(p=>{const N=p.title??p.domain??p.url;return s.jsxs("div",{className:"friend-modal-library-item",children:[s.jsxs("div",{className:"friend-modal-library-main",children:[s.jsx("strong",{children:N}),s.jsx("span",{className:"subtle",children:p.note??p.url})]}),s.jsxs("div",{className:"friend-modal-library-meta",children:[s.jsxs("span",{children:["Added ",gp(p.createdAt)]}),typeof p.price=="number"&&s.jsxs("span",{children:[p.price," f-coins"]}),s.jsx("a",{className:"ghost",href:p.url,target:"_blank",rel:"noopener noreferrer",children:"Open"})]})]},p.id)})})]}),s.jsxs("div",{className:"friend-modal-timeline",children:[s.jsxs("div",{className:"friend-modal-timeline-header",children:[s.jsxs("span",{className:"label",children:["Last ",r?.windowHours??24,"h"]}),s.jsx("span",{className:"subtle",children:"Dominant attention per hour"})]}),s.jsx("div",{className:"friend-modal-timeline-bars",children:(r?.timeline??[]).map((p,N)=>{const g=p.productive+p.neutral+p.frivolity+p.draining+p.idle,w=g===0?8:Math.max(12,Math.min(52,Math.round(g/vp(r)*52))),F=p.dominant;return s.jsx("div",{className:"friend-modal-bar-col",title:`${p.hour}`,children:s.jsx("span",{className:`friend-modal-bar-fill cat-${F}`,style:{height:`${w}px`}})},`${p.start}-${N}`)})})]})]})})}function Ms(e,t){const n=e.productive+e.neutral+e.frivolity+(e.draining??0)+e.idle,r=e[t]??0;return n>0?Math.round(r/n*100):0}function Wn(e){const t=e/3600;return t>=10?`${t.toFixed(0)}h`:`${t.toFixed(1)}h`}function vp(e){return!e||e.timeline.length===0?1:Math.max(...e.timeline.map(t=>t.productive+t.neutral+t.frivolity+t.draining+t.idle),1)}function gp(e){const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString([],{month:"short",day:"numeric"})}const Ic=[{id:"focus",label:"Focus",hint:"Ring, streak, and core metrics"},{id:"signals",label:"Signals",hint:"Flow quality and attention telemetry"},{id:"journey",label:"Journey",hint:"Day timeline and orbit map"},{id:"social",label:"Social",hint:"Friends and trophy highlights"}];function yp({api:e,wallet:t,economy:n,productivityGoalHoursOverride:r}){const[l,i]=d.useState([]),[a,o]=d.useState(null),[c,m]=d.useState(!0),[x,j]=d.useState(null),[p,N]=d.useState(!0),[g,w]=d.useState(null),[F,f]=d.useState(!1),[h,u]=d.useState(null),[y,b]=d.useState(Date.now()),[C,v]=d.useState([]),[S,D]=d.useState(null),[L,W]=d.useState(null),[Y,$]=d.useState([]),[H,Z]=d.useState({}),[Q,X]=d.useState(!1),[T,M]=d.useState(null),[I,O]=d.useState(null),[ee,le]=d.useState(null),[U,te]=d.useState(null),[ne,se]=d.useState([]),[pe,Le]=d.useState(!1),[$e,Ce]=d.useState([]),[Ze,A]=d.useState(null),[V,ae]=d.useState(null),[J,ge]=d.useState("productivity"),[Ee,K]=d.useState(null),[xe,ye]=d.useState([]),[_,ie]=d.useState(!1),[fe,ve]=d.useState(!1),[Fe,je]=d.useState(2),[Ie,de]=d.useState(()=>{try{const k=window.localStorage.getItem("tws-dashboard-scene");if(k&&Ic.some(z=>z.id===k))return k}catch{}return"focus"}),ct=d.useCallback(async(k=!1)=>{k||m(!0);const z=!!(S&&(S==="all"||L&&S!==L)),[q,ue,Me]=await Promise.all([z?Promise.resolve([]):e.activities.recent(30),e.activities.summary(24,S??void 0),z?Promise.resolve(null):e.activities.journey(24,S??void 0)]);i(q),o(ue),K(Me),m(!1)},[e,L,S]),E=d.useCallback(async()=>{N(!0);try{const k=await e.analytics.overview(7);j(k)}catch(k){console.error("Failed to load analytics overview:",k)}finally{N(!1)}},[e]),G=d.useCallback(async()=>{f(!1);try{const k=Date.now()-864e5,z=Vc(new Date),q=Vc(new Date(Date.now()-24*60*60*1e3)),$t=(await Promise.all([e.history.list(z),e.history.list(q)])).flat().filter(Rt=>Rt.kind==="frivolous-session"&&Date.parse(Rt.occurredAt)>=k).length;u($t);const Vt=await e.history.days(60);for(const Rt of Vt){const wo=(await e.history.list(Rt.day)).find(Eh=>Eh.kind==="frivolous-session");if(wo){w(new Date(wo.occurredAt).getTime()),f(!0);return}}w(null)}catch(k){console.error("Failed to load frivolity history:",k),w(null),u(null)}finally{f(!0)}},[e]),we=d.useCallback(async()=>{try{const k=await e.sync.status(),z=k.configured&&k.authenticated?await e.sync.listDevices():[],q=k.device?.id??null,ue=z.map(Me=>({id:Me.id,name:Me.name,isCurrent:Me.id===q}));v(ue),W(q),q&&!S&&D(q)}catch(k){console.error("Failed to load devices",k)}},[e,S]),Je=d.useCallback(async()=>{try{const k=await e.sync.status();if(!k.configured||!k.authenticated){$([]),Z({}),X(!1);return}const[z,q,ue]=await Promise.all([e.friends.list(),e.friends.summaries(24),e.friends.meSummary(24)]);$(z),Z(q),M(ue);const Me=await e.friends.profile();O(Me),X(!0)}catch(k){console.error("Failed to load friends",k),$([]),Z({}),X(!1),M(null)}},[e]),bt=d.useCallback(async()=>{try{const[k,z]=await Promise.all([e.trophies.profile(),e.trophies.list()]);A(k),Ce(z)}catch(k){console.error("Failed to load trophies",k)}},[e]),vt=d.useCallback(async k=>{le(k),te(null),se([]),Le(!0);try{const[z,q]=await Promise.all([e.friends.timeline(k.userId,24),e.friends.publicLibrary(k.userId,168)]);te(z),se(q??[])}catch(z){console.error("Failed to load friend timeline",z)}},[e]);d.useEffect(()=>{ct(),E(),G(),we(),Je(),bt()},[ct,E,G,we,Je,bt]),d.useEffect(()=>{e.settings.excludedKeywords().then(ye).catch(()=>{})},[e]),d.useEffect(()=>{e.settings.competitiveOptIn().then(ie).catch(()=>{})},[e]),d.useEffect(()=>{e.settings.productivityGoalHours().then(je).catch(()=>{})},[e]),d.useEffect(()=>{try{window.localStorage.setItem("tws-dashboard-scene",Ie)}catch{}},[Ie]),d.useEffect(()=>{const k=e.events.on("economy:activity",()=>{ct(!0)}),z=e.events.on("paywall:session-started",()=>{w(Date.now()),f(!0)});return()=>{k(),z()}},[e,ct]),d.useEffect(()=>{const k=window.setInterval(()=>{b(Date.now())},1e3);return()=>window.clearInterval(k)},[]),d.useEffect(()=>{const k=e.events.on("trophies:earned",z=>{ae(z),bt(),window.setTimeout(()=>ae(null),6e3)});return()=>{k()}},[e,bt]);const Ht=S==="all",Bt=!!(S&&L&&S!==L&&!Ht),Ut=Ht?"All devices":Bt?C.find(k=>k.id===S)?.name??"Remote device":n?.activeDomain??n?.activeApp??"Waiting...",nn=Bt?"neutral":n?.activeCategory??"idle",Cn=d.useMemo(()=>Math.max(0,Math.round((a?.totalSeconds??0)/3600*10)/10),[a]),sn=d.useCallback(k=>{if(!xe.length)return!1;const z=k.toLowerCase();return xe.some(q=>q&&z.includes(q))},[xe]),Se=d.useMemo(()=>a?.topContexts?.length?a.topContexts.filter(k=>!sn(k.label)):[],[a,sn]),Wt=a?.windowHours??24,Ct=(a?.timeline??[]).slice(-Wt),P=d.useMemo(()=>[...l].sort((k,z)=>Date.parse(k.startedAt)-Date.parse(z.startedAt)),[l]),he=90,st=d.useMemo(()=>{const k=new Map;if(!P.length)return k;let z=null,q=null;for(const ue of P){const Me=Uc(ue.startedAt);k.has(Me)||k.set(Me,0);const $t=ue.domain??ue.appName??ue.windowTitle??"unknown";q===Me&&z&&$t!==z&&k.set(Me,(k.get(Me)??0)+1),q=Me,z=$t}return k},[P]),pr=d.useMemo(()=>{const k=new Map;if(P.length<2)return k;let z=P[0];for(let q=1;q<P.length;q+=1){const ue=P[q],Me=z.domain??z.appName??z.windowTitle??"unknown",$t=ue.domain??ue.appName??ue.windowTitle??"unknown",Vt=(z.secondsActive??0)+(z.idleSeconds??0);if(Me&&$t!==Me&&Vt>0&&Vt<=he){const Rt=Uc(ue.startedAt);k.set(Rt,(k.get(Rt)??0)+1)}z=ue}return k},[P]),ho=d.useMemo(()=>{if(!a||P.length<2)return null;let k=0,z=null;for(const q of P){const ue=q.domain??q.appName??q.windowTitle??"unknown";z&&ue!==z&&(k+=1),z=ue}return k/a.windowHours},[P,a]),fo=d.useMemo(()=>{if(!a||P.length<2)return null;let k=0,z=P[0];for(let q=1;q<P.length;q+=1){const ue=P[q],Me=z.domain??z.appName??z.windowTitle??"unknown",$t=ue.domain??ue.appName??ue.windowTitle??"unknown",Vt=(z.secondsActive??0)+(z.idleSeconds??0);Me&&$t!==Me&&Vt>0&&Vt<=he&&(k+=1),z=ue}return k/a.windowHours},[P,a]),vr=d.useMemo(()=>T||(a?wp(a):null),[T,a]),mo=d.useMemo(()=>Ct.length?J==="switches"?Ct.map(k=>st.get(k.start)??0):J==="thrash"?Ct.map(k=>pr.get(k.start)??0):J==="idle"?Ct.map(k=>{const z=k.productive+k.neutral+k.frivolity+k.draining+k.idle;return z>0?k.idle/z:0}):Ct.map(k=>{const z=k.productive+k.neutral+k.frivolity+k.draining;return z>0?k.productive/z:0}):[],[J,Ct,st,pr]),po=d.useMemo(()=>{if(!a)return null;const k=a.totalsByCategory.idle??0,z=a.totalSeconds+k;return z>0?k/z:0},[a]),yh=d.useMemo(()=>{if(!Ct.length)return 0;let k=0,z=0;for(const q of Ct)q.dominant==="productive"?(z+=1,z>k&&(k=z)):z=0;return k},[Ct]),js=g?Math.max(0,y-g):null,xh=72*60*60*1e3,gr=js?Math.min(1,js/xh):0,jh=Math.round(20+30*gr),wh=Math.round(48+18*gr),Nh=js?`hsl(${jh} 70% ${wh}%)`:"rgba(200, 149, 108, 0.7)",yr=d.useMemo(()=>a?Math.round(a.deepWorkSeconds/60):null,[a]),vo=d.useMemo(()=>rp(y,Hl),[y]),xr=d.useMemo(()=>a?a.timeline?.length?a.timeline.reduce((k,z)=>{const q=Date.parse(z.start);return!Number.isFinite(q)||q<vo?k:k+(z.productive??0)},0):a.totalsByCategory.productive??0:0,[a,vo]),Bl=Number.isFinite(r)&&(r??0)>0?r:Number.isFinite(Fe)&&Fe>0?Fe:2,jr=Bl*3600,Ul=jr>0?xr/jr:0,Sh=Math.max(0,Math.min(1,Ul)),kh=Math.round(Ul*100),Wl=52,go=2*Math.PI*Wl,bh=go*(1-Sh),yo=Ul>=1,Ch=Math.max(0,jr-xr),xo=d.useMemo(()=>{const k=new Map;return $e.forEach(z=>k.set(z.id,z)),k},[$e]),jo=(Ze?.pinnedTrophies?.length?Ze.pinnedTrophies:$e.filter(k=>k.pinned).map(k=>k.id)).map(k=>xo.get(k)).filter(k=>!!k).slice(0,3),En=$e.filter(k=>k.progress.state==="locked").sort((k,z)=>z.progress.ratio-k.progress.ratio)[0]??null;return s.jsxs("section",{className:"panel",children:[s.jsxs("header",{className:"panel-header dashboard-header",children:[s.jsx("div",{className:"dashboard-hero-left",children:s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Attention control"}),s.jsx("h1",{children:"Your day at a glance"}),s.jsxs("div",{className:"pill-row pill-row-tight topbar-actions",children:[s.jsxs("div",{className:"pill-group",children:[s.jsxs("span",{className:"pill ghost",children:["Wallet ",t.balance," f-coins"]}),s.jsx("button",{type:"button",className:"pomodoro-trigger",onClick:()=>ve(!0),children:"Locking in?"})]}),s.jsx("span",{className:"pill ghost",children:yr==null?"Deep work ":`Deep work ${yr} min`})]}),C.length>0&&s.jsxs("div",{className:"dashboard-device-switch",children:[s.jsx("span",{className:"subtle",children:"Viewing"}),s.jsxs("select",{value:S??"",onChange:k=>D(k.target.value),children:[C.length>1&&s.jsx("option",{value:"all",children:"All devices"}),C.map(k=>s.jsxs("option",{value:k.id,children:[k.name,k.isCurrent?" (this device)":""]},k.id))]})]})]})}),s.jsx("div",{className:"card dashboard-time",children:s.jsx(cp,{activities:l,summary:a})})]}),s.jsx("div",{className:"dashboard-controls",children:s.jsx("div",{className:"dashboard-tabs",role:"tablist","aria-label":"Dashboard scenes",children:Ic.map(k=>s.jsxs("button",{type:"button",role:"tab",className:Ie===k.id?"active":"","aria-selected":Ie===k.id,onClick:()=>de(k.id),children:[s.jsx("span",{className:"dashboard-tab-label",children:k.label}),s.jsx("span",{className:"dashboard-tab-hint",children:k.hint})]},k.id))})}),fe&&s.jsxs("div",{className:"pomodoro-flyout",children:[s.jsxs("div",{className:"pomodoro-flyout-bar",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Deep work"}),s.jsx("strong",{children:"Pomodoro control"})]}),s.jsx("button",{type:"button",className:"ghost",onClick:()=>ve(!1),children:"Close"})]}),s.jsx(lp,{api:e})]}),s.jsxs("div",{className:"dashboard-scenes",children:[Ie==="focus"&&s.jsxs("div",{className:"dashboard-focus-grid",children:[s.jsxs("div",{className:`card productivity-ring ${yo?"complete":""}`,children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Daily productivity"}),s.jsx("h2",{children:"Close your ring"})]}),s.jsxs("span",{className:"pill ghost",children:[Oc(Bl)," goal"]})]}),s.jsxs("div",{className:"productivity-ring-body",children:[s.jsxs("div",{className:"productivity-ring-graphic",role:"img","aria-label":`Productivity ring ${Ar(xr)} of ${Oc(Bl)}`,children:[s.jsx("div",{className:"productivity-ring-glow"}),s.jsxs("svg",{viewBox:"0 0 120 120","aria-hidden":!0,children:[s.jsx("circle",{className:"productivity-ring-track",cx:"60",cy:"60",r:Wl,strokeWidth:"10"}),s.jsx("circle",{className:"productivity-ring-progress",cx:"60",cy:"60",r:Wl,strokeWidth:"10",strokeDasharray:go,strokeDashoffset:bh})]}),s.jsxs("div",{className:"productivity-ring-center",children:[s.jsx("strong",{children:Ar(xr)}),s.jsx("span",{children:"productive"})]})]}),s.jsxs("div",{className:"productivity-ring-meta",children:[s.jsx("strong",{children:c?"--":`${kh}%`}),s.jsx("span",{className:"subtle",children:c?"Collecting signal...":yo?"You've closed your circle.":`${Ar(Ch)} to go`}),s.jsxs("span",{className:"subtle",children:["Today - ",Ar(jr)," target"]})]})]})]}),s.jsxs("div",{className:`card dashboard-streak ${gr>=1?"streak-max":""}`,style:{"--streak-color":Nh,"--streak-progress":`${Math.round(gr*100)}%`},children:[s.jsxs("div",{className:"streak-header",children:[s.jsx("span",{className:"eyebrow",children:"Recovery timer"}),s.jsx("span",{className:`pill inline ${nn}`,children:nn})]}),s.jsx("h2",{children:"Time since last frivolity"}),s.jsx("div",{className:"streak-time",children:F?js?Ac(js):"No frivolity logged":"Loading..."}),s.jsxs("div",{className:"streak-meta",children:[s.jsx("span",{className:"subtle",children:g?`Last spend ${new Date(g).toLocaleString()}`:"No paid sessions recorded yet."}),s.jsxs("div",{className:"streak-meta-row",children:[s.jsx("span",{className:"pill ghost",children:"Goal: 3 days"}),s.jsxs("span",{className:"pill ghost",children:[h??0," frivolity uses (24h)"]})]})]}),s.jsx("div",{className:"streak-bar","aria-hidden":!0,children:s.jsx("span",{})})]}),s.jsxs("div",{className:"card dashboard-focus-metrics",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Focus deck"}),s.jsx("h2",{children:"Session highlights"})]}),s.jsx("span",{className:"pill ghost",children:a?`${a.windowHours}h window`:"Rolling day"})]}),s.jsxs("div",{className:"overview-grid",children:[s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Active time"}),s.jsxs("strong",{children:[Cn.toFixed(1),"h"]}),s.jsxs("span",{className:"subtle",children:["last ",a?.windowHours??24,"h"]})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Productivity"}),s.jsxs("strong",{children:[x?.productivityScore??"--","%"]}),s.jsxs("span",{className:"subtle",children:["last ",x?.periodDays??7,"d"]})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Deep work"}),s.jsx("strong",{children:yr==null?"--":`${yr}m`}),s.jsx("span",{className:"subtle",children:"today"})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Frivolity"}),s.jsx("strong",{children:h??"--"}),s.jsx("span",{className:"subtle",children:"last 24h"})]})]}),s.jsxs("div",{className:"dashboard-focus-meta",children:[s.jsxs("div",{children:[s.jsx("span",{className:"metric-label",children:"Active context"}),s.jsx("strong",{children:Ut})]}),s.jsx("span",{className:`pill inline ${nn}`,children:nn})]})]})]}),Ie==="signals"&&s.jsxs("div",{className:"dashboard-signals-grid",children:[s.jsxs("div",{className:"dashboard-signals-main",children:[s.jsxs("div",{className:"card flow-card dashboard-flow",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Attention stability"}),s.jsx("h2",{children:"Flow signals"})]}),s.jsx("span",{className:"pill ghost",children:"Last 24h"})]}),s.jsxs("div",{className:"flow-metrics",children:[s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Context switches"}),s.jsx("strong",{children:ho==null?"--":`${ho.toFixed(1)}/h`}),s.jsx("span",{className:"subtle",children:"avg across window"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Thrash rate"}),s.jsx("strong",{children:fo==null?"--":`${fo.toFixed(1)}/h`}),s.jsx("span",{className:"subtle",children:"rapid hops"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Idle ratio"}),s.jsx("strong",{children:po==null?"--":`${Math.round(po*100)}%`}),s.jsx("span",{className:"subtle",children:"passive time"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Longest run"}),s.jsxs("strong",{children:[yh,"h"]}),s.jsx("span",{className:"subtle",children:"productive streak"})]})]}),s.jsxs("div",{className:"flow-toggle",children:[s.jsx("button",{type:"button",className:`pill ghost ${J==="productivity"?"active":""}`,onClick:()=>ge("productivity"),children:"Productivity"}),s.jsx("button",{type:"button",className:`pill ghost ${J==="switches"?"active":""}`,onClick:()=>ge("switches"),children:"Switches"}),s.jsx("button",{type:"button",className:`pill ghost ${J==="thrash"?"active":""}`,onClick:()=>ge("thrash"),children:"Thrash"}),s.jsx("button",{type:"button",className:`pill ghost ${J==="idle"?"active":""}`,onClick:()=>ge("idle"),children:"Idle"})]}),s.jsxs("div",{className:"flow-sparkline",children:[s.jsx("span",{className:"label",children:J==="switches"?"Switches trend":J==="thrash"?"Thrash trend":J==="idle"?"Idle trend":"Productive trend"}),s.jsx("div",{className:"flow-sparkline-track",children:mo.length>1?s.jsx("svg",{viewBox:"0 0 100 40",preserveAspectRatio:"none","aria-hidden":!0,children:s.jsx("path",{d:jp(mo),fill:"none",stroke:"currentColor",strokeWidth:"2"})}):s.jsx("span",{className:"subtle",children:"Collecting signal"})})]})]}),s.jsx("div",{className:"dashboard-insights",children:s.jsx(pp,{api:e,overview:x,loading:p,onRefresh:E})})]}),s.jsxs("div",{className:"card dashboard-overview",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Signal deck"}),s.jsx("h2",{children:"Focus telemetry"})]}),s.jsx("span",{className:"pill ghost",children:a?`${a.windowHours}h window`:"Rolling day"})]}),s.jsxs("div",{className:"overview-grid",children:[s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Active time"}),s.jsxs("strong",{children:[Cn.toFixed(1),"h"]}),s.jsxs("span",{className:"subtle",children:["last ",a?.windowHours??24,"h"]})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Productivity"}),s.jsxs("strong",{children:[x?.productivityScore??"--","%"]}),s.jsxs("span",{className:"subtle",children:["last ",x?.periodDays??7,"d"]})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Avg session"}),s.jsx("strong",{children:x?Ac(x.avgSessionLength*1e3):"--"}),s.jsxs("span",{className:"subtle",children:[x?.totalSessions??"--"," sessions"]})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Peak hour"}),s.jsx("strong",{children:x?zc(x.peakProductiveHour):"--"}),s.jsxs("span",{className:"subtle",children:["risk ",x?zc(x.riskHour):"--"]})]})]}),s.jsxs("div",{className:"overview-breakdown",children:[s.jsx("span",{className:"label",children:"Category mix"}),s.jsxs("div",{className:"overview-bars",children:[Ts("Productive","productive",x),Ts("Neutral","neutral",x),Ts("Frivolity","frivolity",x),Ts("Draining","draining",x),Ts("Idle","idle",x)]})]}),s.jsxs("div",{className:"overview-top",children:[s.jsx("span",{className:"label",children:"Top contexts"}),s.jsxs("ul",{className:"overview-list",children:[Se.slice(0,3).map(k=>s.jsxs("li",{children:[s.jsx("strong",{children:k.label}),s.jsxs("span",{className:"subtle",children:[Math.round(k.seconds/60),"m  ",k.source==="url"?"Browser":"App"]})]},k.label)),Se.length===0&&s.jsx("li",{className:"subtle",children:"No streams yet."})]}),x?.topEngagementDomain&&!sn(x.topEngagementDomain)&&s.jsxs("div",{className:"overview-highlight",children:[s.jsx("span",{className:"label",children:"Most engaging"}),s.jsx("strong",{children:x.topEngagementDomain}),s.jsx("span",{className:"subtle",children:"highest attention hold this week"})]})]})]})]}),Ie==="journey"&&s.jsxs("div",{className:"dashboard-journey-grid",children:[s.jsx("div",{className:"dashboard-orbit",children:s.jsx(ip,{summary:a,economy:n})}),s.jsxs("div",{className:"dashboard-timeline",children:[s.jsx(up,{journey:Ee,loading:c,isRemote:Bt}),s.jsx(fp,{journey:Ee,loading:c,isRemote:Bt})]})]}),Ie==="social"&&s.jsxs("div",{className:"dashboard-social-grid",children:[s.jsxs("div",{className:"card friends-strip",children:[s.jsxs("div",{className:"friends-strip-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Friends"}),s.jsx("h2",{children:"In the zone"})]}),s.jsx("span",{className:"pill ghost",children:"Last 24h"})]}),Q?Y.length===0?s.jsxs("div",{className:"friends-empty",children:[s.jsx("strong",{children:"No friends yet"}),s.jsx("span",{className:"subtle",children:"Add a handle in the Friends tab."})]}):s.jsx("div",{className:"friends-strip-row",children:Y.map(k=>{const z=H[k.userId],q=z?.categoryBreakdown??null,ue=z?.totalActiveSeconds??0,Me=ue>0?q.productive/ue*100:0,$t=ue>0?q.neutral/ue*100:0,Vt=ue>0?q.frivolity/ue*100:0,Rt=(k.pinnedTrophies??[]).map(rn=>xo.get(rn)).filter(rn=>!!rn);return s.jsxs("button",{type:"button",className:"friends-chip",onClick:()=>vt(k),children:[s.jsxs("div",{className:"friends-chip-header",children:[s.jsxs("div",{children:[s.jsx("strong",{children:k.displayName??k.handle??"Friend"}),s.jsxs("span",{className:"subtle",children:["@",k.handle??"no-handle"]})]}),s.jsx("span",{className:"pill ghost",children:z?`${z.productivityScore}%`:"--"})]}),s.jsxs("div",{className:"friends-chip-activity",children:[s.jsxs("span",{children:[z?xp(z.totalActiveSeconds):"--"," active"]}),s.jsx("span",{className:"subtle",children:z?`Updated ${new Date(z.updatedAt).toLocaleTimeString()}`:"No data yet"})]}),s.jsxs("div",{className:"friends-chip-bar",children:[s.jsx("span",{className:"cat-productive",style:{width:`${Me}%`}}),s.jsx("span",{className:"cat-neutral",style:{width:`${$t}%`}}),s.jsx("span",{className:"cat-frivolity",style:{width:`${Vt}%`}})]}),_?s.jsx("div",{className:"head-to-head",children:H[k.userId]?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"head-to-head-row",children:[s.jsx("span",{children:"You"}),s.jsx("span",{children:k.displayName??k.handle??"Friend"})]}),s.jsxs("div",{className:"head-to-head-bar fancy",children:[s.jsx("span",{className:"head-to-head-left",style:{width:`${Wc(vr,H[k.userId])}%`,background:I?.color??"var(--accent)"}}),s.jsx("span",{className:"head-to-head-right",style:{width:`${100-Wc(vr,H[k.userId])}%`,background:k.color??"rgba(255, 255, 255, 0.3)"}}),s.jsx("div",{className:"head-to-head-glow"})]}),s.jsxs("div",{className:"head-to-head-row subtle",children:[s.jsxs("span",{children:[Hc(vr?.categoryBreakdown.productive??0)," productive"]}),s.jsxs("span",{children:[Hc(H[k.userId]?.categoryBreakdown.productive??0)," productive"]})]}),s.jsxs("div",{className:"head-to-head-row subtle",children:[s.jsxs("span",{children:[Bc(vr?.emergencySessions)," emergency"]}),s.jsxs("span",{children:[Bc(H[k.userId]?.emergencySessions)," emergency"]})]})]}):s.jsx("p",{className:"subtle",style:{marginTop:6},children:"Waiting for shared activity data."})}):s.jsx("p",{className:"subtle",style:{marginTop:10},children:"Competitive view is off."}),Rt.length>0&&s.jsx("div",{className:"friends-trophies",children:Rt.slice(0,3).map(rn=>s.jsxs("span",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:rn.emoji}),rn.name]},rn.id))})]},k.id)})}):s.jsxs("div",{className:"friends-empty",children:[s.jsx("strong",{children:"Syncing friends"}),s.jsx("span",{className:"subtle",children:"Connect the desktop app to pull stats."})]})]}),$e.length>0&&s.jsxs("div",{className:"card trophy-strip",children:[s.jsxs("div",{className:"trophy-strip-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Trophies"}),s.jsx("h2",{children:"Case highlights"})]}),s.jsx("span",{className:"pill ghost",children:"Profile view"})]}),s.jsx("div",{className:"trophy-strip-row",children:jo.length===0?s.jsxs("div",{className:"friends-empty",children:[s.jsx("strong",{children:"No pinned trophies"}),s.jsx("span",{className:"subtle",children:"Pin trophies in your Profile page."})]}):jo.map(k=>s.jsxs("div",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:k.emoji}),s.jsx("span",{children:k.name})]},k.id))}),En&&s.jsxs("div",{className:"trophy-next",children:[s.jsx("span",{className:"label",children:"Next up"}),s.jsxs("div",{className:"trophy-next-body",children:[s.jsx("span",{className:"emoji",children:En.emoji}),s.jsxs("div",{children:[s.jsx("strong",{children:En.name}),s.jsx("span",{className:"subtle",children:En.progress.label??`${En.progress.current}/${En.progress.target}`})]})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("span",{style:{width:`${Math.round(En.progress.ratio*100)}%`}})})]}),V&&s.jsxs("div",{className:"trophy-toast",children:[s.jsx("span",{className:"emoji",children:V.emoji}),s.jsxs("div",{children:[s.jsx("strong",{children:V.name}),s.jsx("span",{className:"subtle",children:"New trophy earned"})]})]})]})]})]}),s.jsx(mh,{open:pe,friend:ee,summary:ee?H[ee.userId]??null:null,timeline:U,publicLibraryItems:ne,trophies:$e,onClose:()=>Le(!1)})]})}function Ac(e){const t=Math.max(0,Math.floor(e/6e4)),n=Math.floor(t/(60*24)),r=Math.floor(t%(60*24)/60),l=t%60;return n>0?`${n}d ${r}h ${l}m`:`${r}h ${l}m`}function zc(e){const t=e>=12?"PM":"AM";return`${e%12||12}${t}`}function xp(e){const t=e/3600;return t>=10?`${t.toFixed(0)}h`:`${t.toFixed(1)}h`}function Ar(e){const t=Math.max(0,Math.round(e/60)),n=Math.floor(t/60),r=t%60;return`${n}h ${r}m`}function Oc(e){return Number.isFinite(e)?e%1===0?`${e.toFixed(0)}h`:`${e.toFixed(1)}h`:"0h"}function Hc(e){return`${Math.round(e/60)}m`}function Bc(e){return typeof e!="number"?"":String(e)}function Uc(e){const t=new Date(e);return t.setMinutes(0,0,0),t.toISOString()}function jp(e){if(e.length<2)return"";const t=Math.max(...e),n=Math.min(...e),r=Math.max(.001,t-n);return e.map((l,i)=>{const a=i/(e.length-1)*100,o=36-(l-n)/r*32;return`${i===0?"M":"L"}${a.toFixed(2)} ${o.toFixed(2)}`}).join(" ")}function wp(e){return{userId:"me",updatedAt:new Date().toISOString(),periodHours:e.windowHours,totalActiveSeconds:e.totalSeconds,deepWorkSeconds:e.deepWorkSeconds,categoryBreakdown:{productive:e.totalsByCategory.productive??0,neutral:e.totalsByCategory.neutral??0,frivolity:e.totalsByCategory.frivolity??0,draining:e.totalsByCategory.draining??0,idle:e.totalsByCategory.idle??0},productivityScore:e.totalSeconds>0?Math.round(e.totalsByCategory.productive/e.totalSeconds*100):0}}function Wc(e,t){const n=e?.categoryBreakdown.productive??0,r=t?.categoryBreakdown.productive??0,l=n+r;return l===0?50:Math.round(n/l*100)}function Ts(e,t,n){const r=n?.categoryBreakdown??{productive:0,neutral:0,frivolity:0,draining:0,idle:0},l=r.productive+r.neutral+r.frivolity+r.draining+r.idle,i=r[t]??0,a=l>0?Math.round(i/l*100):0;return s.jsxs("div",{className:"overview-bar",children:[s.jsxs("div",{className:"overview-bar-label",children:[s.jsx("span",{children:e}),s.jsxs("span",{className:"subtle",children:[a,"%"]})]}),s.jsx("div",{className:"overview-bar-track",children:s.jsx("span",{className:`overview-bar-fill cat-${t}`,style:{width:`${a}%`}})})]},t)}function Vc(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function yt(e){const t=e.trim().toLowerCase();if(!t)return null;if(t.startsWith("http://")||t.startsWith("https://"))try{return new URL(t).hostname.replace(/^www\./,"")}catch{return null}return t.split("/")[0].replace(/^www\./,"")}function zr(e){const t=new Set,n=[];for(const r of e){const l=yt(r);!l||t.has(l)||(t.add(l),n.push(l))}return n}function Np({api:e,variant:t="page"}){const[n,r]=d.useState(null),[l,i]=d.useState(!0),[a,o]=d.useState(!1),[c,m]=d.useState(!1),[x,j]=d.useState(null),[p,N]=d.useState(""),[g,w]=d.useState("frivolous"),F=d.useCallback(async()=>{try{const v=await e.settings.categorisation();r(v)}catch(v){console.error("Failed to load categorisation",v),j("Could not load domain lists.")}finally{i(!1)}},[e.settings]);d.useEffect(()=>{F()},[F]);const f=d.useMemo(()=>n?{productive:n.productive.length,neutral:n.neutral.length,frivolity:n.frivolity.length,draining:n.draining?.length??0}:{productive:0,neutral:0,frivolity:0,draining:0},[n]),h=async v=>{o(!0),j(null);try{await e.settings.updateCategorisation(v),r(v),m(!0),window.setTimeout(()=>m(!1),1500)}catch(S){j(S.message||"Failed to save")}finally{o(!1)}},u=async(v,S)=>{if(!n)return;const D=yt(v);if(!D){j("Please enter a valid domain.");return}const L=zr(n.productive.filter(H=>yt(H)!==D)),W=zr(n.neutral.filter(H=>yt(H)!==D)),Y=zr(n.frivolity.filter(H=>yt(H)!==D)),$=zr((n.draining??[]).filter(H=>yt(H)!==D));S==="productive"&&L.unshift(D),S==="neutral"&&W.unshift(D),S==="frivolous"&&Y.unshift(D),S==="draining"&&$.unshift(D),await h({productive:L,neutral:W,frivolity:Y,draining:$})},y=async v=>{if(!n)return;const S=yt(v);S&&await h({productive:n.productive.filter(D=>yt(D)!==S),neutral:n.neutral.filter(D=>yt(D)!==S),frivolity:n.frivolity.filter(D=>yt(D)!==S),draining:n.draining?.filter(D=>yt(D)!==S)??[]})},b=async()=>{j(null);const v=yt(p);if(!v){j("Enter a domain like twitter.com");return}N(""),await u(v,g)};if(l)return s.jsx("div",{className:"panel",children:"Loading domains"});if(!n)return s.jsx("div",{className:"panel",children:"Could not load domains."});const C=t==="settings"?"store-page settings-domains":"page store-page";return s.jsxs("section",{className:C,children:[t==="page"?s.jsxs("header",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Domains"}),s.jsxs("p",{className:"subtle",children:["Keep this simple: ",s.jsx("strong",{children:"productive"}),", ",s.jsx("strong",{children:"neutral"}),", ",s.jsx("strong",{children:"draining"}),", or ",s.jsx("strong",{children:"frivolous"}),". Idle is inferred automatically."]})]}),s.jsxs("div",{className:"pill-row",children:[s.jsxs("span",{className:"pill ghost",children:[f.productive," productive"]}),s.jsxs("span",{className:"pill ghost",children:[f.neutral," neutral"]}),s.jsxs("span",{className:"pill ghost",children:[f.frivolity," frivolous"]}),s.jsxs("span",{className:"pill ghost",children:[f.draining," draining"]})]})]}):s.jsxs("div",{className:"settings-section-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Domains"}),s.jsxs("p",{className:"subtle",children:["Keep this simple: ",s.jsx("strong",{children:"productive"}),", ",s.jsx("strong",{children:"neutral"}),", ",s.jsx("strong",{children:"draining"}),", or ",s.jsx("strong",{children:"frivolous"}),". Idle is inferred automatically."]})]}),s.jsxs("div",{className:"pill-row",children:[s.jsxs("span",{className:"pill ghost",children:[f.productive," productive"]}),s.jsxs("span",{className:"pill ghost",children:[f.neutral," neutral"]}),s.jsxs("span",{className:"pill ghost",children:[f.frivolity," frivolous"]}),s.jsxs("span",{className:"pill ghost",children:[f.draining," draining"]})]})]}),x&&s.jsx("p",{className:"error-text",children:x}),c&&s.jsx("p",{className:"subtle",children:"Saved."}),s.jsxs("div",{className:"card",children:[s.jsx("h3",{children:"Quick classify"}),s.jsxs("div",{className:"settings-grid",style:{gridTemplateColumns:"1.2fr 1fr auto",alignItems:"end"},children:[s.jsxs("label",{children:["Domain",s.jsx("input",{value:p,onChange:v=>N(v.target.value),placeholder:"twitter.com",disabled:a})]}),s.jsxs("label",{children:["Category",s.jsxs("select",{value:g,onChange:v=>w(v.target.value),disabled:a,children:[s.jsx("option",{value:"productive",children:"productive"}),s.jsx("option",{value:"neutral",children:"neutral"}),s.jsx("option",{value:"frivolous",children:"frivolous"}),s.jsx("option",{value:"draining",children:"draining"})]})]}),s.jsx("button",{className:"primary",type:"button",disabled:a,onClick:b,children:"Add"})]}),s.jsx("p",{className:"subtle",style:{marginTop:10},children:"Tip: you can also label domains from the browser extension popup."})]}),s.jsxs("div",{className:"store-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))"},children:[s.jsx(Or,{title:"Productive",subtitle:"Earns f-coins.",items:n.productive,onRemove:y,onMove:v=>u(v,"productive"),disabled:a}),s.jsx(Or,{title:"Neutral",subtitle:"Safe by default (earning depends on your clock-in settings).",items:n.neutral,onRemove:y,onMove:v=>u(v,"neutral"),disabled:a}),s.jsx(Or,{title:"Frivolous",subtitle:"Paywall applies here.",items:n.frivolity,onRemove:y,onMove:v=>u(v,"frivolous"),disabled:a}),s.jsx(Or,{title:"Draining",subtitle:"Passively costs coins (no paywall).",items:n.draining??[],onRemove:y,onMove:v=>u(v,"draining"),disabled:a})]})]})}function Or(e){const{title:t,subtitle:n,items:r,disabled:l,onRemove:i}=e;return s.jsxs("div",{className:"card store-item",children:[s.jsxs("div",{className:"store-item-headline",children:[s.jsxs("div",{children:[s.jsx("p",{className:"store-item-domain",children:t}),s.jsxs("h3",{className:"store-item-title",children:[r.length," domains"]})]}),s.jsxs("div",{className:"store-item-price-pill",children:[s.jsx("strong",{children:r.length}),s.jsx("span",{children:"items"})]})]}),s.jsx("p",{className:"subtle",style:{marginTop:6},children:n}),r.length===0?s.jsx("div",{className:"empty-state",style:{padding:0},children:s.jsx("p",{className:"subtle",children:"None yet."})}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,marginTop:8},children:[r.slice(0,12).map(a=>s.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"space-between",alignItems:"center"},children:[s.jsx("code",{style:{fontSize:12,color:"var(--fg-muted)"},children:a}),s.jsx("button",{className:"ghost danger",disabled:l,onClick:()=>i(a),children:"Remove"})]},a)),r.length>12&&s.jsxs("p",{className:"subtle",style:{margin:0},children:["Showing 12 of ",r.length,". Use search/edit tools in a future iteration."]})]})]})}function Sp({values:e,onChange:t,color:n,disabled:r=!1}){const[l,i]=d.useState(!1),a=d.useRef(null),o=c=>{if(r||!a.current)return;const m=a.current.getBoundingClientRect(),x="touches"in c?c.touches[0].clientX:c.clientX,j="touches"in c?c.touches[0].clientY:c.clientY,p=x-m.left,N=j-m.top,g=m.width,w=m.height,F=g/24,f=Math.floor(p/F);if(f>=0&&f<24){const u=1-N/w,y=Math.max(0,Math.min(3,u*3)),b=[...e];b[f]=Number(y.toFixed(1)),t(b)}};return s.jsxs("div",{className:"curve-editor",style:{userSelect:"none",opacity:r?.5:1},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"12px",color:"var(--text-subtle)"},children:[s.jsx("span",{children:"00:00"}),s.jsx("span",{children:"06:00"}),s.jsx("span",{children:"12:00"}),s.jsx("span",{children:"18:00"}),s.jsx("span",{children:"23:59"})]}),s.jsxs("svg",{ref:a,width:"100%",height:"200",style:{background:"rgba(0,0,0,0.05)",borderRadius:"8px",cursor:r?"not-allowed":"crosshair"},onMouseDown:c=>{r||(i(!0),o(c))},onMouseMove:c=>{!r&&l&&o(c)},onMouseUp:()=>i(!1),onMouseLeave:()=>i(!1),onTouchStart:c=>{r||(i(!0),o(c))},onTouchMove:c=>{!r&&l&&o(c)},onTouchEnd:()=>i(!1),children:[[.5,1,1.5,2,2.5].map(c=>s.jsx("line",{x1:"0",y1:200-c/3*200,x2:"100%",y2:200-c/3*200,stroke:"rgba(0,0,0,0.1)",strokeDasharray:"4 4"},c)),e.map((c,m)=>{const x=c/3*200;return s.jsx("rect",{x:`${m/24*100}%`,y:200-x,width:`${100/24}%`,height:x,fill:n,stroke:"#fff",strokeWidth:"1",opacity:"0.8"},m)})]}),s.jsx("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"12px"},children:r?"Active session detected  edits locked until it ends.":"Click and drag to adjust hourly multipliers (0x - 3x)"})]})}function kp({api:e}){const[t,n]=d.useState([]),[r,l]=d.useState(null),[i,a]=d.useState("productive"),[o,c]=d.useState(!1),[m,x]=d.useState({}),[j,p]=d.useState(null),[N,g]=d.useState(null),[w,F]=d.useState(null),[f,h]=d.useState(!1),[u,y]=d.useState(null),[b,C]=d.useState(!0),[v,S]=d.useState(!1),[D,L]=d.useState(!1),[W,Y]=d.useState(""),[$,H]=d.useState(10),[Z,Q]=d.useState(8),[X,T]=d.useState(!1);d.useEffect(()=>{M(),e.settings.economyExchangeRate().then(_=>{typeof _=="number"&&Number.isFinite(_)&&F(_)}).catch(()=>{}),e.settings.dailyWalletResetEnabled().then(C).catch(()=>{})},[]),d.useEffect(()=>{const _=()=>e.paywall.sessions().then(je=>{const Ie={};je.forEach(de=>{Ie[de.domain]=de}),x(Ie)}).catch(()=>{});_();const ie=e.events.on("paywall:session-started",_),fe=e.events.on("paywall:session-ended",_),ve=e.events.on("paywall:session-paused",_),Fe=e.events.on("paywall:session-resumed",_);return()=>{ie(),fe(),ve(),Fe()}},[e]);async function M(){const[_,ie,fe]=await Promise.all([e.market.list(),e.settings.categorisation(),e.paywall.sessions()]),ve=[],Fe=new Map(_.map(de=>[de.domain,de])),je=(de,ct)=>Fe.get(de)||{domain:de,ratePerMin:ct,packs:[],hourlyModifiers:Array(24).fill(1)};ie.productive.forEach(de=>{ve.push({id:de,type:"productive",rate:je(de,5)})}),ie.frivolity.forEach(de=>{ve.push({id:de,type:"frivolity",rate:je(de,3)})}),_.forEach(de=>{ve.find(ct=>ct.id===de.domain)||ve.push({id:de.domain,type:"neutral",rate:de})}),n(ve);const Ie={};fe.forEach(de=>{Ie[de.domain]=de}),x(Ie)}const I=t.filter(_=>i==="productive"?_.type==="productive":_.type==="frivolity"||_.type==="neutral");d.useEffect(()=>{!D&&I.length>0&&(!r||!I.find(_=>_.id===r))?l(I[0].id):I.length===0&&!D&&l(null)},[i,t,D]),d.useEffect(()=>{p(null)},[r]),d.useEffect(()=>{if(!u)return;const _=setTimeout(()=>y(null),2400);return()=>clearTimeout(_)},[u]);const O=t.find(_=>_.id===r),le=!!(O?m[O.id]:void 0);d.useEffect(()=>{if(!N)return;const _=setTimeout(()=>g(null),2e3);return()=>clearTimeout(_)},[N]);const U=_=>{!O||le||se(O.id,{...O.rate,ratePerMin:_})},te=_=>{!O||le||se(O.id,{...O.rate,hourlyModifiers:_})},ne=async _=>{if(!v){S(!0);try{await e.settings.updateDailyWalletResetEnabled(_),C(_),y(_?"Daily coin reset enabled  wallet starts at 0 each day.":"Daily coin reset disabled.")}catch(ie){p(ie.message)}finally{S(!1)}}},se=(_,ie)=>{n(fe=>fe.map(ve=>ve.id===_?{...ve,rate:ie}:ve))},pe=async()=>{if(O){if(le){p("Active session detected  end it before changing this rate.");return}c(!0),p(null),g(null);try{await e.market.upsert(O.rate),g("Saved to market"),await M(),l(O.id)}catch(_){p(_.message)}finally{c(!1)}}},Le=async _=>{if(_.preventDefault(),!W.trim())return;const ie=W.trim();if(t.find(ve=>ve.id===ie)){p("Profile already exists");return}const fe={domain:ie,ratePerMin:3,packs:[],hourlyModifiers:Array(24).fill(1)};await e.market.upsert(fe),await M(),Y(""),L(!1),l(ie),a("frivolity")},$e=d.useMemo(()=>i==="productive"?"Earn profiles":"Spend profiles",[i]),Ce=d.useMemo(()=>i==="productive"?"Tune how productive apps reward you over the day.":"Shape how costly domains evolve over the day.",[i]),Ze=d.useMemo(()=>{if(!O)return[];const _=O.rate.hourlyModifiers,ie=Math.max(..._),fe=Math.min(..._);return[{label:"Base rate",value:`${O.rate.ratePerMin} f-coins/min`},{label:"Peak multiplier",value:`${ie.toFixed(1)}x`},{label:"Off-peak",value:`${fe.toFixed(1)}x`}]},[O]),A=O?.type==="productive";function V(_){const ie=_.filter(Fe=>typeof Fe=="number"&&Number.isFinite(Fe));if(!ie.length)return null;const fe=[...ie].sort((Fe,je)=>Fe-je),ve=Math.floor(fe.length/2);return fe.length%2===0?(fe[ve-1]+fe[ve])/2:fe[ve]}function ae(_){const ie=Number(_);return Number.isFinite(ie)?Math.round(ie*100)/100:0}const J=d.useMemo(()=>V(t.filter(_=>_.type==="productive").map(_=>_.rate.ratePerMin))??5,[t]),ge=d.useMemo(()=>V(t.filter(_=>_.type==="frivolity").map(_=>_.rate.ratePerMin))??3,[t]),Ee=d.useMemo(()=>!ge||ge<=0?0:J/ge,[J,ge]),K=w??Ee,xe=d.useMemo(()=>{const _=typeof K=="number"&&Number.isFinite(K)?K:1;return!ge||ge<=0||!J||J<=0||_<=0?1:J/(ge*_)},[K,J,ge]),ye=async()=>{if(f)return;const _=typeof K=="number"&&Number.isFinite(K)?K:null;if(!(!_||_<=0)){h(!0),p(null);try{const ie=t.filter(je=>je.type==="frivolity"),fe=ie.filter(je=>!!m[je.id]).map(je=>je.id),ve=ie.filter(je=>!m[je.id]);if(!ve.length){y("All spend profiles are locked by active sessions.");return}await e.settings.updateEconomyExchangeRate(_);let Fe=0;for(const je of ve){const Ie={...je.rate,ratePerMin:ae(je.rate.ratePerMin*xe),packs:je.rate.packs.map(de=>({...de,price:Math.max(1,Math.round(de.price*xe))}))};await e.market.upsert(Ie),Fe+=1}await M(),y(fe.length?`Scaled ${Fe} spend profiles. Skipped ${fe.length} locked by active sessions.`:`Scaled ${Fe} spend profiles.`)}catch(ie){p(ie.message)}finally{h(!1)}}};return s.jsxs("section",{className:"panel tuner-panel",children:[s.jsxs("header",{className:"panel-header tuner-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Economy"}),s.jsx("h1",{children:$e}),s.jsx("p",{className:"subtle",children:Ce})]}),s.jsxs("div",{className:"toggle-wrap",children:[s.jsx("span",{className:"subtle",children:"Productive"}),s.jsxs("label",{className:"ios-switch",children:[s.jsx("input",{type:"checkbox",checked:i==="frivolity",onChange:_=>a(_.target.checked?"frivolity":"productive")}),s.jsx("span",{className:"slider"})]}),s.jsx("span",{className:"subtle",children:"Frivolous"})]})]}),N&&s.jsx("div",{className:"inline-note",style:{maxWidth:"420px"},children:N}),u&&s.jsx("div",{className:"inline-note",style:{maxWidth:"520px"},children:u}),s.jsxs("section",{className:"card",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,flexWrap:"wrap"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0},children:"Daily coin reset"}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Start each day at 0 f-coins so frivolity must be re-earned today."})]}),s.jsxs("label",{className:"settings-inline",style:{margin:0},children:[s.jsx("input",{type:"checkbox",checked:b,onChange:_=>ne(_.target.checked),disabled:v}),s.jsx("span",{className:"subtle",children:b?"Enabled":"Disabled"})]})]}),s.jsxs("section",{className:"card economy-exchange-card",children:[s.jsxs("div",{className:"economy-exchange-header",children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0},children:"Exchange rate"}),s.jsx("p",{className:"subtle",style:{marginBottom:0},children:"Make the system feel intuitive: how much frivolity time 1 minute of productive time buys."})]}),s.jsx("button",{className:"primary",onClick:ye,disabled:f||!K||K<=0,children:f?"Applying":"Apply to spend profiles"})]}),s.jsxs("div",{className:"economy-exchange-grid",children:[s.jsxs("div",{className:"economy-exchange-metric",children:[s.jsx("span",{className:"subtle",children:"Current (typical)"}),s.jsxs("strong",{children:["1 min work  ",Ee?Ee.toFixed(2):""," min frivolity"]})]}),s.jsxs("div",{className:"economy-exchange-metric",children:[s.jsx("span",{className:"subtle",children:"Target"}),s.jsxs("strong",{children:["1 min work  ",K?K.toFixed(2):""," min frivolity"]})]}),s.jsxs("div",{className:"economy-exchange-metric",children:[s.jsx("span",{className:"subtle",children:"Effect"}),s.jsxs("strong",{children:[xe?`${xe.toFixed(2)}`:""," spend costs"]})]})]}),s.jsxs("div",{className:"economy-exchange-controls",children:[s.jsxs("div",{className:"economy-exchange-presets",children:[s.jsx("button",{type:"button",className:"ghost",onClick:()=>F(.5),disabled:f,children:"0.5"}),s.jsx("button",{type:"button",className:"ghost",onClick:()=>F(1),disabled:f,children:"1 (1:1)"}),s.jsx("button",{type:"button",className:"ghost",onClick:()=>F(2),disabled:f,children:"2"}),s.jsx("button",{type:"button",className:"ghost",onClick:()=>F(Ee),disabled:f||!Ee,children:"Reset"})]}),s.jsxs("label",{style:{display:"grid",gap:8,margin:0},children:[s.jsx("span",{className:"subtle",children:"Minutes of frivolity per minute of work"}),s.jsx("input",{type:"range",min:.25,max:4,step:.05,value:K||1,onChange:_=>F(Number(_.target.value)),disabled:f})]})]}),s.jsxs("p",{className:"subtle",style:{marginBottom:0},children:["This scales all ",s.jsx("strong",{children:"spend"})," profiles (frivolity domains) while keeping your individual profile shapes and pack options. Use Advanced below if you want domain-specific tuning."]})]}),s.jsxs("details",{className:"card economy-advanced",open:!1,children:[s.jsxs("summary",{className:"economy-advanced-summary",children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[s.jsx("strong",{children:"Advanced: per-domain tuning"}),s.jsx("span",{className:"subtle",children:"Power-user controls for rates, curves, and packs."})]}),s.jsx("span",{className:"economy-advanced-toggle","aria-hidden":"true"})]}),s.jsx("div",{className:"economy-advanced-body",children:s.jsxs("div",{className:"tuner-layout",children:[s.jsxs("aside",{className:"tuner-list",children:[s.jsx("div",{style:{padding:"0 4px 8px 4px",borderBottom:"1px solid rgba(255,255,255,0.05)",marginBottom:"8px"},children:D?s.jsxs("form",{onSubmit:Le,style:{display:"flex",gap:"6px"},children:[s.jsx("input",{autoFocus:!0,placeholder:"domain.com",value:W,onChange:_=>Y(_.target.value),style:{flex:1,minWidth:0,padding:"6px 8px",fontSize:"13px",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white"}}),s.jsx("button",{type:"submit",className:"primary",style:{padding:"6px 10px",fontSize:"13px"},children:"Add"}),s.jsx("button",{type:"button",className:"ghost",style:{padding:"6px",fontSize:"13px"},onClick:()=>L(!1),children:""})]}):s.jsx("button",{className:"ghost",style:{width:"100%",textAlign:"center",fontSize:"13px"},onClick:()=>L(!0),children:"+ Add Profile"})}),I.map(_=>s.jsxs("button",{className:`tuner-list-item ${r===_.id?"active":""}`,onClick:()=>l(_.id),children:[s.jsx("div",{className:"tuner-list-title",children:_.id}),s.jsxs("div",{className:"tuner-list-sub",children:[_.rate.ratePerMin," f-coins/min  ",_.type]})]},_.id)),I.length===0&&s.jsx("div",{className:"subtle",style:{padding:"12px"},children:"No items in this category."})]}),s.jsx("div",{className:"tuner-editor",children:O?s.jsxs("div",{className:"tuner-grid",children:[s.jsxs("div",{className:"card tuner-primary",children:[s.jsxs("div",{className:"tuner-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:O.id}),s.jsx("p",{className:"subtle",children:O.type==="productive"?"Earn profile":"Spend profile"})]}),s.jsx("button",{className:"primary",onClick:pe,disabled:o||le,children:le?"Locked by active session":o?"Saving...":"Save changes"}),s.jsx("button",{className:"ghost danger",disabled:le,onClick:async()=>{O&&confirm(`Delete profile for ${O.id}?`)&&(await e.market.delete(O.id),await M(),l(null))},children:"Delete"})]}),le&&s.jsx("div",{className:"inline-note danger",style:{marginBottom:"8px"},children:"Active session running for this domain  end it to adjust the exchange rate."}),j&&s.jsx("div",{className:"inline-note warning",style:{marginBottom:"8px"},children:j}),Ze.length>0&&s.jsx("div",{className:"tuner-metrics",children:Ze.map(_=>s.jsxs("div",{className:"metric-card",children:[s.jsx("span",{className:"metric-label",children:_.label}),s.jsx("strong",{className:"metric-value",children:_.value})]},_.label))}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Base rate (per minute)"}),s.jsx("input",{type:"number",value:O.rate.ratePerMin,onChange:_=>U(Number(_.target.value)),step:"0.1",min:"0.1",max:"100",disabled:le}),s.jsx("p",{className:"subtle",children:O.type==="productive"?"f-coins earned per minute.":"f-coins spent per minute when metered."})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Time multiplier curve"}),s.jsx("p",{className:"subtle",children:"Adjust how the value changes throughout the day. 1x is standard."}),s.jsx(Sp,{values:O.rate.hourlyModifiers,onChange:te,color:O.type==="productive"?"var(--cat-productive)":"var(--cat-frivolity)",disabled:le})]})]}),s.jsxs("div",{className:"card tuner-secondary",children:[s.jsx("div",{className:"tuner-header",children:s.jsxs("div",{children:[s.jsx("h3",{children:A?"Earnings preview":"Packs preview"}),s.jsx("p",{className:"subtle",children:A?"How this profiles rate and curve would surface in payout views.":"Show what users see when buying time."})]})}),s.jsxs("div",{className:"packs-preview",children:[O.rate.packs.length===0&&s.jsx("p",{className:"subtle",children:A?"No packs defined  optional for earn profiles.":"No packs defined  consider adding 10/30/60 minute options."}),O.rate.packs.map((_,ie)=>s.jsxs("div",{className:"pack-card",children:[s.jsxs("div",{children:[s.jsxs("strong",{children:[_.minutes," minute session"]}),s.jsxs("p",{className:"subtle",children:[_.price," f-coins  ",(_.price/_.minutes*60).toFixed(1)," f-coins/hour"]})]}),s.jsx("button",{className:"ghost danger",disabled:le,onClick:()=>{const fe=[...O.rate.packs];fe.splice(ie,1),se(O.id,{...O.rate,packs:fe})},children:"Remove"})]},_.minutes)),!A&&s.jsx("div",{style:{marginTop:"8px"},children:X?s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[s.jsx("input",{type:"number",placeholder:"Minutes",value:$,onChange:_=>H(Number(_.target.value)),min:"5",max:"120",style:{width:"80px"}}),s.jsx("input",{type:"number",placeholder:"Price",value:Z,onChange:_=>Q(Number(_.target.value)),min:"1",max:"500",style:{width:"80px"}}),s.jsx("button",{className:"primary",disabled:le,onClick:()=>{const _=[...O.rate.packs,{minutes:$,price:Z}];se(O.id,{...O.rate,packs:_}),T(!1),H(10),Q(8)},children:"Add"}),s.jsx("button",{className:"ghost",onClick:()=>T(!1),children:"Cancel"})]}):s.jsx("button",{className:"ghost",disabled:le,onClick:()=>T(!0),children:"+ Add pack"})})]})]})]}):s.jsx("div",{className:"empty-state",children:"Select an item to tune"})})]})})]})]})}const Ds=[{id:"sync",label:"Sync & Profile",description:"Devices, cloud sync, and identity."},{id:"activity",label:"Activity",description:"Idle thresholds and continuity rules."},{id:"paywall",label:"Paywall & Rituals",description:"Emergency access, peek, and journaling."},{id:"integrations",label:"Integrations",description:"Bring in external libraries."},{id:"domains",label:"Domains",description:"Productive vs neutral vs frivolous."},{id:"economy",label:"Economy",description:"Tune earn + spend profiles."},{id:"system",label:"System",description:"Reset data and permissions."}];function bp({api:e,theme:t,onThemeChange:n}){const[r,l]=d.useState(!1),[i,a]=d.useState(!1),[o,c]=d.useState(null),[m,x]=d.useState("sync"),[j,p]=d.useState(15),[N,g]=d.useState(15),[w,F]=d.useState("balanced"),[f,h]=d.useState(300),[u,y]=d.useState(""),[b,C]=d.useState(10),[v,S]=d.useState(!0),[D,L]=d.useState(!1),[W,Y]=d.useState(120),[$,H]=d.useState(""),[Z,Q]=d.useState(2),[X,T]=d.useState(null),[M,I]=d.useState([]),[O,ee]=d.useState(""),[le,U]=d.useState(""),[te,ne]=d.useState("#7cf4d4"),[se,pe]=d.useState(!1),[Le,$e]=d.useState({mode:"recent",collectionId:null,includeSubcollections:!0}),[Ce,Ze]=d.useState([]),[A,V]=d.useState(!1),[ae,J]=d.useState("trophies"),[ge,Ee]=d.useState(!1),[K,xe]=d.useState(null),[ye,_]=d.useState(!1),[ie,fe]=d.useState("full-color"),[ve,Fe]=d.useState(!1),[je,Ie]=d.useState([]),[de,ct]=d.useState(!1),[E,G]=d.useState(null);d.useEffect(()=>{if(!K)return;const P=window.setTimeout(()=>xe(null),5e3);return()=>window.clearTimeout(P)},[K]),d.useEffect(()=>{e.settings.idleThreshold().then(p),e.settings.frivolousIdleThreshold().then(g),e.settings.emergencyPolicy().then(F),e.settings.emergencyReminderInterval().then(h),e.settings.journalConfig().then(P=>{y(P.url??""),C(P.minutes??10)}).catch(()=>{}),e.settings.peekConfig().then(P=>{S(P.enabled),L(P.allowOnNewPages)}).catch(()=>{}),e.settings.continuityWindowSeconds().then(Y).catch(()=>{}),e.settings.productivityGoalHours().then(Q).catch(()=>{}),e.settings.excludedKeywords().then(P=>{H((P??[]).join(`
`))}).catch(()=>{}),e.settings.cameraModeEnabled().then(_).catch(()=>{}),e.settings.guardrailColorFilter().then(fe).catch(()=>{}),e.settings.alwaysGreyscale().then(Fe).catch(()=>{}),e.integrations.zotero.config().then($e).catch(()=>{})},[e.settings,e.integrations.zotero]);const we=async()=>{ct(!0),G(null);try{const P=await e.camera.listPhotos(120);Ie(P)}catch(P){console.error("Failed to load camera photos",P),G("Failed to load camera photos.")}finally{ct(!1)}};d.useEffect(()=>{we()},[]);const Je=async()=>{if(!navigator.mediaDevices?.getUserMedia)throw new Error("Camera capture is not supported in this environment.");let P=null;try{P=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}finally{P?.getTracks().forEach(he=>he.stop())}},bt=async P=>{if(G(null),P)try{await Je()}catch(he){console.error("Camera permission request failed",he),G("Camera access is blocked. Enable TimeWellSpent in macOS System Settings  Privacy & Security  Camera, then try again."),_(!1);return}_(P)},vt=async()=>{try{const P=await e.sync.status();if(T(P),ee(P.device?.name??""),P.configured&&P.authenticated){const he=await e.friends.profile();U(he?.handle??""),ne(he?.color??"#7cf4d4");const st=await e.sync.listDevices();I(st)}else I([])}catch(P){console.error("Failed to load sync status",P)}};d.useEffect(()=>{vt()},[]);const Ht=d.useMemo(()=>Le.collectionId==null?null:Ce.find(P=>P.id===Le.collectionId)??null,[Ce,Le.collectionId]);async function Bt(){V(!0);try{const P=await e.integrations.zotero.collections();Ze(P)}catch(P){console.error("Failed to load Zotero collections",P),c("Failed to load Zotero collections. Is Zotero installed and opened at least once?")}finally{V(!1)}}async function Ut(P){P?.preventDefault(),l(!0),a(!1),c(null);try{await e.settings.updateIdleThreshold(j),await e.settings.updateFrivolousIdleThreshold(N);const he=$.split(/[\n,]+/).map(st=>st.trim().toLowerCase()).filter(Boolean);await e.settings.updateExcludedKeywords(he),H(he.join(`
`)),await e.settings.updateEmergencyPolicy(w),await e.settings.updateEmergencyReminderInterval(f),await e.settings.updateJournalConfig({url:u.trim()?u.trim():null,minutes:b}),await e.settings.updatePeekConfig({enabled:v,allowOnNewPages:D}),await e.settings.updateContinuityWindowSeconds(W),await e.settings.updateProductivityGoalHours(Z),await e.settings.updateCameraModeEnabled(ye),await e.settings.updateGuardrailColorFilter(ie),await e.settings.updateAlwaysGreyscale(ve),await e.integrations.zotero.updateConfig(Le),a(!0),window.setTimeout(()=>a(!1),2e3)}catch(he){c(he.message||"Failed to save settings")}finally{l(!1)}}async function nn(){if(ge)return;xe(null);const P={trophies:"This will clear all earned trophies, pinned trophies, and personal bests.",wallet:"This will zero your bank balance and erase wallet transactions.",all:"This will clear trophies, activity history, wallet, library, and sync state. This cannot be undone."};if(window.confirm(`${P[ae]}

Continue?`)&&!(ae==="all"&&!window.confirm("Final check: erase all local/cloud stats now?"))){Ee(!0),c(null);try{await e.system.reset(ae),xe({trophies:"Trophy case reset locally and in sync.",wallet:"Bank reset locally and in sync.",all:"All stats reset locally and in sync."}[ae]),await vt()}catch(he){c(he.message||"Failed to reset")}finally{Ee(!1)}}}const Cn=async P=>{try{await e.camera.revealPhoto(P)}catch(he){console.error("Failed to reveal camera photo",he),G("Failed to reveal camera photo.")}},sn=async P=>{if(window.confirm("Delete this photo?"))try{await e.camera.deletePhoto(P),Ie(he=>he.filter(st=>st.id!==P))}catch(he){console.error("Failed to delete camera photo",he),G("Failed to delete camera photo.")}},Se=Ds.find(P=>P.id===m)??Ds[0],Wt=Math.max(0,Ds.findIndex(P=>P.id===m))+1,Ct=m!=="domains"&&m!=="economy";return s.jsxs("section",{className:"panel",children:[s.jsx("header",{className:"panel-header",children:s.jsxs("div",{children:[s.jsx("h1",{children:"Settings"}),s.jsx("p",{className:"subtle",children:"Tune policies, domains, economy, and sync."})]})}),o&&s.jsx("p",{className:"error-text",children:o}),s.jsxs("div",{className:"settings-layout",children:[s.jsx("nav",{className:"settings-nav","aria-label":"Settings sections",children:Ds.map(P=>s.jsxs("button",{type:"button",className:m===P.id?"active":"",onClick:()=>x(P.id),"aria-current":m===P.id?"page":void 0,children:[s.jsx("span",{className:"settings-nav-label",children:P.label}),s.jsx("span",{className:"settings-nav-desc",children:P.description})]},P.id))}),s.jsxs("div",{className:"settings-pane",children:[Ct&&s.jsxs("div",{className:"settings-pane-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:Se.label}),s.jsx("p",{className:"subtle",children:Se.description})]}),s.jsxs("span",{className:"pill ghost",children:["Section ",Wt," of ",Ds.length]})]}),m==="sync"&&s.jsx("div",{className:"settings-pane-body",children:s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Cloud sync"}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Keep wallet, library, and summaries aligned across devices."})]}),s.jsx("button",{type:"button",className:"ghost",onClick:vt,disabled:se,children:"Refresh"})]}),!X?.configured&&s.jsx("p",{className:"subtle",children:"Supabase not configured. Add `SUPABASE_URL` and `SUPABASE_ANON_KEY`, then restart the app."}),X?.configured&&!X.authenticated&&s.jsxs("div",{className:"settings-actions",children:[s.jsx("button",{type:"button",className:"primary",onClick:async()=>{pe(!0),await e.sync.signIn("google"),pe(!1)},disabled:se,children:"Connect with Google"}),s.jsx("button",{type:"button",className:"secondary",onClick:async()=>{pe(!0),await e.sync.signIn("github"),pe(!1)},disabled:se,children:"Connect with GitHub"})]}),X?.configured&&X.authenticated&&s.jsxs("div",{className:"settings-stack",children:[s.jsxs("div",{className:"settings-pills",children:[s.jsx("span",{className:"pill ghost",children:X.user?.email??X.user?.id}),s.jsxs("span",{className:"pill ghost",children:["Device ",X.device?.id?.slice(0,8)]}),X.lastSyncAt&&s.jsxs("span",{className:"pill ghost",children:["Last sync ",new Date(X.lastSyncAt).toLocaleString()]})]}),s.jsxs("div",{className:"settings-row",children:[s.jsxs("label",{children:["Device name",s.jsx("input",{type:"text",value:O,onChange:P=>ee(P.target.value),placeholder:"My MacBook"})]}),s.jsxs("label",{children:["Handle",s.jsx("input",{type:"text",value:le,onChange:P=>U(P.target.value),placeholder:"your_handle"})]}),s.jsxs("label",{children:["Accent color",s.jsx("input",{type:"color",value:te,onChange:P=>ne(P.target.value)})]})]}),s.jsxs("div",{className:"settings-actions",children:[s.jsx("button",{type:"button",className:"primary",onClick:async()=>{pe(!0),c(null);try{await e.sync.setDeviceName(O),await e.friends.updateProfile({handle:le.trim()||void 0,color:te}),await e.sync.syncNow(),await vt()}catch(P){c(P.message||"Failed to sync now")}finally{pe(!1)}},disabled:se,children:"Sync now"}),s.jsx("button",{type:"button",className:"secondary",onClick:async()=>{pe(!0),await e.sync.signOut(),await vt(),pe(!1)},disabled:se,children:"Sign out"})]}),M.length>0&&s.jsx("div",{className:"devices-list",children:M.map(P=>s.jsxs("div",{className:`device-row ${P.isCurrent?"current":""}`,children:[s.jsxs("div",{children:[s.jsx("strong",{children:P.name}),s.jsx("span",{className:"subtle",children:P.platform})]}),s.jsx("span",{className:"subtle",children:P.lastSeenAt?`Seen ${new Date(P.lastSeenAt).toLocaleString()}`:"Pending"})]},P.id))})]})]})}),m==="activity"&&s.jsxs("form",{className:"settings-pane-form",onSubmit:Ut,children:[s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Activity detection"}),s.jsx("p",{className:"subtle",children:"Tune idle detection."})]}),s.jsxs("div",{className:"settings-row",children:[s.jsxs("label",{children:["Idle threshold (seconds)",s.jsx("input",{type:"number",min:"5",max:"300",value:j,onChange:P=>p(Number(P.target.value))})]}),s.jsxs("label",{children:["Frivolous idle (seconds)",s.jsx("input",{type:"number",min:"5",max:"300",value:N,onChange:P=>g(Number(P.target.value))})]}),s.jsxs("label",{children:["Continuity window (seconds)",s.jsx("input",{type:"number",min:"0",max:"900",value:W,onChange:P=>Y(Number(P.target.value))})]})]}),s.jsx("div",{className:"settings-row",children:s.jsxs("label",{children:["Daily productivity goal (hours)",s.jsx("input",{type:"number",min:"0.5",max:"12",step:"0.1",value:Z,onChange:P=>Q(Number(P.target.value))})]})}),s.jsxs("label",{children:["Keywords to exclude",s.jsx("textarea",{rows:3,value:$,onChange:P=>H(P.target.value),placeholder:"One keyword per line"})]}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Lower values mark passive browsing as idle sooner."}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Excluded keywords stay neutral and are hidden from stream trackers."}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Continuity keeps short research hops in the same productive run."}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Daily productivity goal powers the dashboard ring."})]}),s.jsx("div",{className:"settings-actions",children:s.jsx("button",{className:"primary",type:"submit",disabled:r,children:r?"Saving":i?"Saved!":"Save changes"})})]}),m==="paywall"&&s.jsxs("form",{className:"settings-pane-form",onSubmit:Ut,children:[s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Paywall controls"}),s.jsx("p",{className:"subtle",children:"Emergency + peek behavior."})]}),s.jsxs("div",{className:"settings-row",children:[s.jsxs("label",{children:["Emergency policy",s.jsxs("select",{value:w,onChange:P=>F(P.target.value),children:[s.jsx("option",{value:"off",children:"Off"}),s.jsx("option",{value:"gentle",children:"Gentle"}),s.jsx("option",{value:"balanced",children:"Balanced"}),s.jsx("option",{value:"strict",children:"Strict"})]})]}),s.jsxs("label",{children:["Reminder interval (seconds)",s.jsx("input",{type:"number",min:"30",max:"3600",value:f,onChange:P=>h(Number(P.target.value))})]})]}),s.jsxs("details",{className:"settings-details",children:[s.jsx("summary",{children:"Policy details"}),s.jsxs("div",{className:"subtle",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Off"}),": no emergency access."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Gentle"}),": 5m, URL-locked, unlimited/day."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Balanced"}),": 3m, 2/day, 30m cooldown."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Strict"}),": 2m, 1/day, 60m cooldown."]})]})]}),s.jsxs("div",{className:"settings-inline",children:[s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:v,onChange:P=>S(P.target.checked)}),s.jsx("span",{className:"subtle",children:"Enable peek"})]}),s.jsxs("label",{style:{opacity:v?1:.6},children:[s.jsx("input",{type:"checkbox",checked:D,onChange:P=>L(P.target.checked),disabled:!v}),s.jsx("span",{className:"subtle",children:"Allow peek on new pages"})]})]})]}),s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Guardrails: color filters"}),s.jsx("p",{className:"subtle",children:"Make frivolity visually and economically cheaper when filtered."})]}),s.jsx("div",{className:"settings-row",children:s.jsxs("label",{children:["Frivolity color filter",s.jsxs("select",{value:ie,onChange:P=>fe(P.target.value),children:[s.jsx("option",{value:"full-color",children:"Full color (standard cost)"}),s.jsx("option",{value:"greyscale",children:"Greyscale (cheaper)"}),s.jsx("option",{value:"redscale",children:"Redscale (cheaper)"})]})]})}),s.jsx("div",{className:"settings-inline",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:ve,onChange:P=>Fe(P.target.checked)}),s.jsx("span",{className:"subtle",children:"Always greyscale (global override)"})]})}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Pricing applies when starting new frivolity sessions."})]}),s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Camera mode"}),s.jsx("p",{className:"subtle",children:"Captures a still every minute during frivolity. Stored locally on this Mac. macOS will prompt for camera access when enabling."})]}),s.jsxs("div",{className:"settings-inline",children:[s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:ye,onChange:P=>{bt(P.target.checked)}}),s.jsx("span",{className:"subtle",children:"Enable camera mode"})]}),s.jsx("button",{type:"button",className:"ghost",onClick:we,disabled:de,children:de?"Refreshing":"Refresh gallery"}),s.jsxs("span",{className:"subtle",children:[je.length," photos"]})]}),E&&s.jsx("p",{className:"error-text",children:E}),je.length===0?s.jsx("p",{className:"subtle",style:{marginTop:12},children:"No photos yet."}):s.jsx("div",{className:"camera-gallery-grid",children:je.map(P=>s.jsxs("div",{className:"camera-card",children:[s.jsx("img",{className:"camera-photo",src:P.fileUrl,alt:"Camera capture",loading:"lazy"}),s.jsxs("div",{className:"camera-meta",children:[s.jsx("strong",{children:P.subject??"Frivolity"}),s.jsx("span",{className:"subtle",children:new Date(P.capturedAt).toLocaleString()})]}),s.jsxs("div",{className:"camera-actions",children:[s.jsx("button",{type:"button",className:"ghost",onClick:()=>Cn(P.id),children:"Reveal"}),s.jsx("button",{type:"button",className:"danger",onClick:()=>sn(P.id),children:"Delete"})]})]},P.id))})]}),s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Journaling"}),s.jsx("p",{className:"subtle",children:"Quick launch for reset prompts."})]}),s.jsxs("label",{children:["Journal URL",s.jsx("input",{type:"text",placeholder:"https://app.tana.inc/",value:u,onChange:P=>y(P.target.value)})]}),s.jsxs("label",{style:{maxWidth:260},children:["Duration (minutes)",s.jsx("input",{type:"number",min:"1",max:"180",value:b,onChange:P=>C(Number(P.target.value))})]})]}),s.jsx("div",{className:"settings-actions",children:s.jsx("button",{className:"primary",type:"submit",disabled:r,children:r?"Saving":i?"Saved!":"Save changes"})})]}),m==="integrations"&&s.jsxs("form",{className:"settings-pane-form",onSubmit:Ut,children:[s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Integrations"}),s.jsx("p",{className:"subtle",children:"Curate Try this instead."})]}),s.jsxs("label",{children:["Zotero source",s.jsxs("select",{value:Le.mode,onChange:P=>{const he=P.target.value;$e(st=>({...st,mode:he==="collection"?"collection":"recent"}))},children:[s.jsx("option",{value:"recent",children:"Recent items"}),s.jsx("option",{value:"collection",children:"Specific collection"})]})]}),Le.mode==="collection"&&s.jsxs("div",{className:"settings-stack",children:[s.jsxs("div",{className:"settings-actions",children:[s.jsx("button",{type:"button",className:"ghost",onClick:Bt,disabled:A,children:A?"Loading":"Refresh collections"}),s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"checkbox",checked:Le.includeSubcollections,onChange:P=>$e(he=>({...he,includeSubcollections:P.target.checked}))}),s.jsx("span",{className:"subtle",children:"Include subcollections"})]})]}),s.jsxs("select",{value:Le.collectionId??"",onChange:P=>{const he=P.target.value,st=he?Number(he):null;$e(pr=>({...pr,collectionId:st&&Number.isFinite(st)?st:null}))},children:[s.jsx("option",{value:"",children:"Select a collection"}),Ce.map(P=>s.jsx("option",{value:P.id,children:P.path},P.id))]}),s.jsx("p",{className:"subtle",style:{margin:0},children:Ht?`Selected: ${Ht.path}`:"No collection selected."})]})]}),s.jsx("div",{className:"settings-actions",children:s.jsx("button",{className:"primary",type:"submit",disabled:r,children:r?"Saving":i?"Saved!":"Save changes"})})]}),m==="domains"&&s.jsx(Np,{api:e,variant:"settings"}),m==="economy"&&s.jsx(kp,{api:e}),m==="system"&&s.jsxs("div",{className:"settings-pane-body",children:[s.jsxs("section",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Theme"}),s.jsx("p",{className:"subtle",children:"Choose your vibe."})]}),s.jsxs("div",{className:"settings-stack",children:[s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"radio",name:"theme",value:"lavender",checked:t==="lavender",onChange:()=>n("lavender")}),s.jsx("span",{children:"Lavender (default)"})]}),s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"radio",name:"theme",value:"olive",checked:t==="olive",onChange:()=>n("olive")}),s.jsx("span",{children:"Olive Garden Feast"})]})]})]}),K&&s.jsx("div",{className:`settings-banner ${ae==="all"?"danger":"success"}`,children:s.jsxs("div",{children:[s.jsx("strong",{children:K}),s.jsx("div",{className:"subtle",children:"You may need to refresh to see empty states."})]})}),s.jsxs("section",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Reset data"}),s.jsx("p",{className:"subtle",children:"Start fresh. Choose what to clear."})]}),s.jsxs("div",{className:"settings-stack",children:[s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"radio",name:"reset-scope",value:"trophies",checked:ae==="trophies",onChange:()=>J("trophies")}),s.jsx("span",{className:"subtle",children:"Reset trophy case only"})]}),s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"radio",name:"reset-scope",value:"wallet",checked:ae==="wallet",onChange:()=>J("wallet")}),s.jsx("span",{className:"subtle",children:"Reset bank only (wallet balance and transactions)"})]}),s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"radio",name:"reset-scope",value:"all",checked:ae==="all",onChange:()=>J("all")}),s.jsx("span",{className:"subtle",children:"Reset everything (wallet, history, trophies, library)"})]}),s.jsx("p",{className:"subtle",style:{margin:0},children:"This also removes the selected data from cloud sync if you are signed in."}),s.jsx("button",{type:"button",className:"secondary",onClick:nn,disabled:ge,children:ge?"Resetting":"Reset now"})]})]}),s.jsxs("section",{className:"card",children:[s.jsx("h2",{children:"Accessibility permissions"}),s.jsxs("ol",{className:"instructions",children:[s.jsx("li",{children:"Open System Settings  Privacy & Security  Accessibility."}),s.jsx("li",{children:"Click the lock to make changes and authenticate."}),s.jsx("li",{children:"Find TimeWellSpent in the list and toggle it on."}),s.jsx("li",{children:"Repeat under Automation to allow browser control."})]}),s.jsxs("p",{className:"subtle",children:["You can paste ",s.jsx("code",{children:"x-apple.systempreferences:com.apple.preference.security?Privacy_Accessibility"})," into Spotlight to jump there quickly."]})]})]})]})]})]})}function Cp({api:e}){const[t,n]=d.useState("7d"),[r,l]=d.useState(null),[i,a]=d.useState([]),[o,c]=d.useState([]),[m,x]=d.useState([]),[j,p]=d.useState(!0),[N,g]=d.useState([]),w=d.useMemo(()=>{switch(t){case"24h":return 1;case"7d":return 7;case"30d":return 30}},[t]),F=d.useCallback(async()=>{p(!0);const[v,S,D,L]=await Promise.all([e.analytics.overview(w),e.analytics.timeOfDay(w),e.analytics.patterns(w),e.analytics.trends(w<=1?"hour":"day")]);l(v),a(S),c(D),x(L),p(!1)},[e,w]);d.useEffect(()=>{F()},[F]),d.useEffect(()=>{e.settings.excludedKeywords().then(g).catch(()=>{})},[e]);const f=v=>{const S=v>=12?"PM":"AM";return`${v%12||12}${S}`},h=d.useMemo(()=>Math.max(...i.map(v=>v.productive+v.neutral+v.frivolity+v.draining+v.idle),1),[i]),u=d.useMemo(()=>o.filter(v=>v.toContext.category==="frivolity").slice(0,6),[o]),y=d.useCallback(v=>{if(!N.length)return!1;const S=v.toLowerCase();return N.some(D=>D&&S.includes(D))},[N]),b=d.useCallback(v=>v?y(v)?"Hidden":v:null,[y]),C=d.useCallback(v=>{if(!N.length)return v;let S=v;for(const D of N){if(!D)continue;const L=D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");S=S.replace(new RegExp(L,"gi"),"[hidden]")}return S},[N]);return s.jsxs("section",{className:"panel analytics-panel",children:[s.jsxs("header",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Behavioral intelligence"}),s.jsx("h1",{children:"Analytics"})]}),s.jsxs("div",{className:"time-range-selector",children:[s.jsx("button",{className:t==="24h"?"active":"",onClick:()=>n("24h"),children:"24h"}),s.jsx("button",{className:t==="7d"?"active":"",onClick:()=>n("7d"),children:"7d"}),s.jsx("button",{className:t==="30d"?"active":"",onClick:()=>n("30d"),children:"30d"})]})]}),j?s.jsxs("div",{className:"panel-body analytics-loading",children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("p",{children:"Analyzing behavioral data..."})]}):s.jsxs("div",{className:"panel-body analytics-grid",children:[s.jsxs("div",{className:"analytics-overview",children:[s.jsxs("div",{className:"overview-card primary",children:[s.jsxs("div",{className:"overview-value",children:[r?.productivityScore??0,"%"]}),s.jsx("div",{className:"overview-label",children:"Productivity Score"}),s.jsxs("div",{className:`overview-trend trend-${r?.focusTrend??"stable"}`,children:[r?.focusTrend==="improving"&&" Improving",r?.focusTrend==="declining"&&" Declining",r?.focusTrend==="stable"&&" Stable"]})]}),s.jsxs("div",{className:"overview-card glow",children:[s.jsxs("div",{className:"overview-value",children:[r?Math.round(r.deepWorkSeconds/3600*10)/10:0,"h"]}),s.jsx("div",{className:"overview-label",children:"Deep Work"})]}),s.jsxs("div",{className:"overview-card",children:[s.jsxs("div",{className:"overview-value",children:[r?.totalActiveHours??0,"h"]}),s.jsx("div",{className:"overview-label",children:"Active Time"})]}),s.jsxs("div",{className:"overview-card",children:[s.jsx("div",{className:"overview-value",children:r?.totalSessions??0}),s.jsx("div",{className:"overview-label",children:"Sessions"})]}),s.jsxs("div",{className:"overview-card accent",children:[s.jsx("div",{className:"overview-value",children:f(r?.peakProductiveHour??9)}),s.jsx("div",{className:"overview-label",children:"Peak Focus Hour"})]}),s.jsxs("div",{className:"overview-card danger",children:[s.jsx("div",{className:"overview-value",children:f(r?.riskHour??15)}),s.jsx("div",{className:"overview-label",children:"Risk Hour"})]})]}),s.jsxs("div",{className:"card insights-card",children:[s.jsx("h2",{children:" AI Insights"}),s.jsxs("ul",{className:"insights-list",children:[(r?.insights??[]).map((v,S)=>s.jsx("li",{children:C(v)},S)),(r?.insights??[]).length===0&&s.jsx("li",{className:"subtle",children:"Keep using the app to generate insights..."})]})]}),s.jsxs("div",{className:"card heatmap-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:"Time of Day Activity"}),s.jsx("span",{className:"subtle",children:"24-hour pattern"})]}),s.jsx("div",{className:"time-heatmap",children:i.map(v=>{const S=v.productive+v.neutral+v.frivolity+v.draining+v.idle,D=S>0?Math.max(8,Math.round(S/h*100)):4,L=S>0?v.productive/S*100:0,W=S>0?v.neutral/S*100:0,Y=S>0?v.frivolity/S*100:0,$=S>0?v.draining/S*100:0,H=v.dominantCategory;return s.jsxs("div",{className:`heatmap-col ${H}`,title:`${f(v.hour)}: ${Math.round(S/60)}m total`,children:[s.jsxs("div",{className:"heatmap-bar",style:{height:`${D}%`},children:[s.jsx("span",{className:"bar-segment productive",style:{height:`${L}%`}}),s.jsx("span",{className:"bar-segment neutral",style:{height:`${W}%`}}),s.jsx("span",{className:"bar-segment frivolity",style:{height:`${Y}%`}}),s.jsx("span",{className:"bar-segment draining",style:{height:`${$}%`}})]}),s.jsx("span",{className:"heatmap-label",children:sp(v.hour,Hl)%6===0?f(v.hour):""})]},v.hour)})}),s.jsxs("div",{className:"heatmap-legend",children:[s.jsxs("span",{children:[s.jsx("span",{className:"dot productive"})," Productive"]}),s.jsxs("span",{children:[s.jsx("span",{className:"dot neutral"})," Neutral"]}),s.jsxs("span",{children:[s.jsx("span",{className:"dot frivolity"})," Frivolity"]}),s.jsxs("span",{children:[s.jsx("span",{className:"dot draining"})," Draining"]}),s.jsxs("span",{children:[s.jsx("span",{className:"dot deepwork"})," Deep work"]})]})]}),s.jsxs("div",{className:"card breakdown-card",children:[s.jsx("h2",{children:"Category Breakdown"}),s.jsx("div",{className:"breakdown-bars",children:r&&["productive","deepWork","neutral","frivolity","draining","idle"].map(v=>{const S=Object.values(r.categoryBreakdown).reduce((Y,$)=>Y+$,0),D=v==="deepWork"?r.deepWorkSeconds:r.categoryBreakdown[v]??0,L=S>0?Math.round(D/S*100):0,W=Math.round(D/3600*10)/10;return s.jsxs("div",{className:"breakdown-row",children:[s.jsx("span",{className:"breakdown-label",children:v==="deepWork"?"deep work":v}),s.jsx("div",{className:"breakdown-bar-track",children:s.jsx("div",{className:`breakdown-bar-fill ${v}`,style:{width:`${L}%`}})}),s.jsxs("span",{className:"breakdown-value",children:[W,"h"]}),s.jsxs("span",{className:"breakdown-percent",children:[L,"%"]})]},v)})})]}),s.jsxs("div",{className:"card trends-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:"Activity Trends"}),s.jsx("span",{className:"subtle",children:"Quality over time"})]}),s.jsx("div",{className:"trends-chart",children:m.map((v,S)=>{const D=v.draining??0,L=v.productive+v.neutral+v.frivolity+D,W=Math.max(...m.map(I=>I.productive+I.neutral+I.frivolity+(I.draining??0)),1),Y=Math.max(4,Math.round(L/W*100)),$=L>0?v.deepWork/L*100:0,H=L>0?D/L*100:0,Z=L>0?v.frivolity/L*100:0,Q=L>0?v.neutral/L*100:0,X=H,T=H+Z,M=H+Z+Q;return s.jsxs("div",{className:"trend-bar",title:`${v.label}: ${Math.round(L/60)}m active, ${v.qualityScore}% quality`,children:[s.jsx("div",{className:"trend-bar-fill",style:{height:`${Y}%`,background:`linear-gradient(to top, 
                          var(--cat-draining) ${X||0}%, 
                          var(--cat-frivolity) ${T||0}%, 
                          var(--cat-neutral) ${M||50}%, 
                          var(--cat-productive) 100%)`},children:$>0&&s.jsx("span",{className:"trend-deepwork-overlay",style:{height:`${$}%`}})}),s.jsx("span",{className:"trend-label",children:v.label})]},S)})})]}),s.jsxs("div",{className:"card patterns-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:" What Leads to Frivolity"}),s.jsx("span",{className:"subtle",children:"Transition patterns"})]}),s.jsxs("ul",{className:"patterns-list",children:[u.map((v,S)=>s.jsxs("li",{className:"pattern-row",children:[s.jsxs("div",{className:"pattern-from",children:[s.jsx("span",{className:`category-chip category-${v.fromContext.category??"neutral"}`,children:v.fromContext.category??"neutral"}),s.jsx("span",{className:"pattern-domain",children:b(v.fromContext.domain)??"Any"})]}),s.jsx("span",{className:"pattern-arrow",children:""}),s.jsxs("div",{className:"pattern-to",children:[s.jsx("span",{className:"category-chip category-frivolity",children:"frivolity"}),s.jsx("span",{className:"pattern-domain",children:b(v.toContext.domain)??"Any"})]}),s.jsxs("div",{className:"pattern-stats",children:[s.jsxs("span",{className:"pattern-frequency",children:[v.frequency,""]}),s.jsxs("span",{className:"pattern-time",children:[Math.round(v.avgTimeBefore/60),"m avg"]})]})]},S)),u.length===0&&s.jsx("li",{className:"subtle",children:"No significant patterns detected yet"})]})]}),r?.topEngagementDomain&&s.jsxs("div",{className:"card top-domain-card",children:[s.jsx("h2",{children:" Top Engagement"}),s.jsx("div",{className:"top-domain-name",children:b(r.topEngagementDomain)}),s.jsx("p",{className:"subtle",children:"Most time spent domain this period"})]})]})]})}const kl=[[8,0,0,0,0,0,0,0,0],[0,0,3,6,0,0,0,0,0],[0,7,0,0,9,0,2,0,0],[0,5,0,0,0,7,0,0,0],[0,0,0,0,4,5,7,0,0],[0,0,0,1,0,0,0,3,0],[0,0,1,0,0,0,0,6,8],[0,0,8,5,0,0,0,1,0],[0,9,0,0,0,0,4,0,0]],Qc=[[8,1,2,7,5,3,6,4,9],[9,4,3,6,8,2,1,7,5],[6,7,5,4,9,1,2,8,3],[1,5,4,2,3,7,8,9,6],[3,6,9,8,4,5,7,2,1],[2,8,7,1,6,9,5,3,4],[5,2,1,9,7,4,3,6,8],[4,3,8,5,2,6,9,1,7],[7,9,6,3,1,8,4,5,2]],Kc=kl.flatMap((e,t)=>e.flatMap((n,r)=>n===0?[{row:t,col:r}]:[]));function yi(){return kl.map(e=>e.map(t=>t===0?"":String(t)))}function ph({title:e,subtitle:t,requiredCorrect:n=12,unlockLabel:r="Unlock",onUnlock:l,disabled:i=!1,puzzleKey:a}){const[o,c]=d.useState(()=>yi()),[m,x]=d.useState(()=>Date.now()),[j,p]=d.useState(!1),[N,g]=d.useState(null),w=d.useMemo(()=>Math.max(1,Math.min(Kc.length,Math.round(n))),[n]),F=d.useMemo(()=>Kc.reduce((C,v)=>{const S=o[v.row]?.[v.col];return S&&Number(S)===Qc[v.row][v.col]?C+1:C},0),[o]),f=F>=w,h=Math.min(100,F/w*100);d.useEffect(()=>{c(yi()),x(Date.now()),g(null),p(!1)},[a]);const u=(C,v,S)=>{if(kl[C][v]!==0||i)return;const D=S.replace(/[^1-9]/g,"").slice(-1);c(L=>{const W=L.map(Y=>[...Y]);return W[C][v]=D,W})},y=()=>{c(yi()),x(Date.now()),g(null)},b=async()=>{if(!(!l||!f||j||i)){p(!0),g(null);try{await l({correctSquares:F,requiredSquares:w,elapsedSeconds:Math.max(1,Math.round((Date.now()-m)/1e3))})}catch(C){g(C.message)}finally{p(!1)}}};return s.jsxs("section",{className:"sudoku-challenge",children:[s.jsxs("div",{className:"sudoku-header",children:[s.jsx("strong",{children:e}),t&&s.jsx("p",{className:"subtle",children:t})]}),s.jsxs("div",{className:"sudoku-progress-row",children:[s.jsxs("span",{children:["Correct squares: ",F,"/",w]}),s.jsxs("span",{children:[h.toFixed(0),"%"]})]}),s.jsx("div",{className:"sudoku-progress-track","aria-hidden":!0,children:s.jsx("span",{style:{width:`${h}%`}})}),s.jsx("div",{className:"sudoku-grid",role:"group","aria-label":"Sudoku puzzle",children:kl.map((C,v)=>C.map((S,D)=>{const L=S!==0,W=L?String(S):o[v][D],Y=W.length>0,$=!L&&Y&&Number(W)===Qc[v][D],Z=["sudoku-cell",L?"is-fixed":"",$?"is-correct":"",!L&&Y&&!$?"is-incorrect":""].filter(Boolean).join(" ");return s.jsx("input",{className:Z,type:"text",inputMode:"numeric",pattern:"[1-9]",maxLength:1,value:W,disabled:L||i||j,onChange:Q=>u(v,D,Q.target.value),style:{borderTopWidth:v%3===0?2:1,borderLeftWidth:D%3===0?2:1,borderRightWidth:D===8?2:1,borderBottomWidth:v===8?2:1},"aria-label":`Row ${v+1} column ${D+1}`},`${v}-${D}`)}))}),s.jsxs("div",{className:"sudoku-actions",children:[s.jsx("button",{type:"button",className:"ghost",onClick:y,disabled:j,children:"Reset puzzle"}),l?s.jsx("button",{type:"button",className:"primary",onClick:b,disabled:!f||j||i,children:j?"Unlocking...":r}):s.jsx("span",{className:"subtle",children:f?"Challenge complete.":"Practice mode"})]}),N&&s.jsx("p",{className:"warning subtle",children:N})]})}const Ep=(e,t,n)=>Math.min(Math.max(e,t),n),Gc=12,xi=12;function Pp({open:e,state:t,wallet:n,api:r,marketRates:l,onWallet:i,onClose:a}){const[o,c]=d.useState(!1),[m,x]=d.useState(null),[j,p]=d.useState(15),N=d.useMemo(()=>{if(t)return l.find(M=>M.domain===t.domain)},[l,t?.domain]),g=d.useMemo(()=>{const M=N?.packs.map(le=>le.minutes)??[],I=M.length?Math.min(...M):10,O=M.length?Math.max(...M):30,ee=Math.max(O,I+15,45);return{min:Math.max(5,I),max:ee,step:5}},[N]);if(d.useEffect(()=>{if(!e||!t)return;const M=N?.packs?.[0]?.minutes??g.min;p(Ep(M,g.min,g.max))},[e,N,g.max,g.min,t?.domain]),d.useEffect(()=>{e&&x(null)},[e,t?.domain]),!e||!t)return null;async function w(){if(t){c(!0),x(null);try{await r.paywall.startMetered(t.domain);const M=await r.wallet.get();i(M),a()}catch(M){console.error(M),x(M.message)}finally{c(!1)}}}async function F(M){if(t){c(!0),x(null);try{await r.paywall.buyPack(t.domain,M);const I=await r.wallet.get();i(I),a()}catch(I){console.error(I),x(I.message)}finally{c(!1)}}}async function f(M){if(t){c(!0),x(null);try{await r.paywall.startChallengePass(t.domain,{durationSeconds:xi*60,solvedSquares:M});const I=await r.wallet.get();i(I),a()}catch(I){console.error(I),x(I.message)}finally{c(!1)}}}const h=t.reason==="blocked",u=t.reason==="insufficient-funds",y=N?.ratePerMin??t.ratePerMin??0,b=N?.packs.find(M=>M.minutes===j),C=b?b.price:Math.max(1,Math.round(j*y)),v=n.balance>0?Math.min(1,C/n.balance):1,S=Math.max(0,n.balance-C),D=72,L=2*Math.PI*D,W=L*(1-v),Y=n.balance>=C,$=Math.round((g.min+g.max)/2),H=n.balance>0?Math.min(1,y*15/n.balance):1,Z=Math.min(1,j/(24*60)),Q=v*100,X=Math.round(Z*100),T=[{label:"Quick peek",minutes:Math.max(5,Math.round(j*.4))},{label:"This choice",minutes:j},{label:"Deep dive",minutes:Math.min(120,Math.round(j*1.6))}].map(M=>({...M,cost:Math.max(1,Math.round(M.minutes*y))}));return s.jsx("div",{className:"paywall-overlay",children:s.jsxs("div",{className:"paywall-modal",children:[s.jsxs("header",{className:"paywall-modal-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:t.domain}),s.jsx("p",{className:"subtle",children:h?"Access blocked  unlock by spending f-coins.":"Spend f-coins to access this site."})]}),s.jsx("button",{className:"close-button",onClick:a,"aria-label":"Close paywall",children:""})]}),s.jsxs("div",{className:"wallet-inline",children:[s.jsx("span",{children:"Balance"}),s.jsxs("strong",{children:[n.balance," f-coins"]})]}),h&&!m&&s.jsx("p",{className:"warning",children:"Start a metered session or buy a time pack to access this site."}),u&&!m&&s.jsx("p",{className:"warning",children:"Session paused  add more coins or choose a smaller pack."}),s.jsxs("section",{className:"spend-lab",children:[s.jsxs("div",{className:"budget-visual",children:[s.jsxs("div",{className:"budget-circle",role:"img","aria-label":`Spending ${C} coins for ${j} minutes`,children:[s.jsxs("svg",{viewBox:"0 0 200 200",width:"200",height:"200",children:[s.jsx("circle",{className:"budget-track",cx:"100",cy:"100",r:D,strokeWidth:"14"}),s.jsx("circle",{className:"budget-fill",cx:"100",cy:"100",r:D,strokeWidth:"14",strokeDasharray:L,strokeDashoffset:W})]}),s.jsxs("div",{className:"budget-figures",children:[s.jsxs("strong",{children:[C," f-coins"]}),s.jsxs("span",{children:[j," minute session"]}),s.jsxs("small",{className:"subtle",children:[Q.toFixed(0),"% of balance"]})]})]}),s.jsxs("div",{className:"impact-bars",children:[s.jsxs("div",{children:[s.jsx("div",{className:"impact-label",children:"Wallet impact"}),s.jsx("div",{className:"impact-meter",children:s.jsx("span",{style:{width:`${Q}%`}})}),s.jsxs("small",{className:"subtle",children:["Leaves ",S," f-coins"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"impact-label",children:"Day share"}),s.jsx("div",{className:"impact-meter day",children:s.jsx("span",{style:{width:`${X}%`}})}),s.jsxs("small",{className:"subtle",children:[X,"% of your day if you stay that long"]})]})]})]}),s.jsxs("div",{className:"budget-controls",children:[s.jsx("div",{className:"eyebrow",children:"Session length"}),s.jsx("p",{className:"subtle",children:"Choose how long you want to access this site."}),s.jsx("input",{id:"focus-budget",type:"range",min:g.min,max:g.max,step:g.step,value:j,onChange:M=>p(Number(M.target.value))}),s.jsxs("div",{className:"budget-scale",children:[s.jsxs("span",{children:[g.min," min"]}),s.jsxs("span",{children:[$," min"]}),s.jsxs("span",{children:[g.max,"+ min"]})]}),s.jsx("div",{className:"projection-grid",children:T.map(M=>s.jsxs("div",{className:"projection-card",children:[s.jsxs("div",{className:"projection-minutes",children:[M.minutes,"m"]}),s.jsx("div",{className:"projection-label",children:M.label}),s.jsxs("div",{className:"projection-cost",children:[M.cost," coins"]}),s.jsx("div",{className:"projection-bar",children:s.jsx("span",{style:{width:`${Math.min(100,M.cost/Math.max(n.balance,M.cost)*100)}%`}})})]},M.label))}),s.jsxs("button",{className:"primary",disabled:o||!Y,onClick:()=>F(j),children:["Unlock for ",C," f-coins"]}),!Y&&s.jsxs("p",{className:"warning subtle",children:["Need ",C-n.balance," more f-coins."]})]})]}),s.jsxs("section",{className:"paywall-section",children:[s.jsx("div",{className:"eyebrow",children:"Other unlocks"}),s.jsxs("div",{className:"option-grid",children:[s.jsxs("button",{className:"option-card",disabled:o,onClick:w,children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Pay as you go"}),s.jsx("p",{className:"subtle",children:"Only pay while the tab is active."})]}),s.jsx("div",{className:"option-meter",children:s.jsx("span",{style:{width:`${H*100}%`}})}),s.jsxs("small",{className:"chip",children:[y," f-coins/min"]})]}),N?.packs.map(M=>{const I=n.balance>0?Math.min(1,M.price/n.balance):1;return s.jsxs("button",{className:"option-card",disabled:o||n.balance<M.price,onClick:()=>F(M.minutes),children:[s.jsxs("div",{children:[s.jsxs("strong",{children:[M.minutes," minute session"]}),s.jsx("p",{className:"subtle",children:"Fixed time  pause anytime."})]}),s.jsx("div",{className:"option-meter",children:s.jsx("span",{style:{width:`${I*100}%`}})}),s.jsxs("small",{className:"chip",children:[M.price," f-coins"]})]},M.minutes)})]})]}),s.jsxs("section",{className:"paywall-section challenge-section",children:[s.jsx("div",{className:"eyebrow",children:"Free unlock (game gate)"}),s.jsx(ph,{puzzleKey:t.domain,title:"Hard Sudoku checkpoint",subtitle:`Solve ${Gc} correct squares to earn a ${xi}-minute free pass.`,requiredCorrect:Gc,unlockLabel:`Claim ${xi}-minute free pass`,onUnlock:({correctSquares:M})=>f(M),disabled:o})]}),typeof t.remainingSeconds=="number"&&t.remainingSeconds>0&&s.jsxs("p",{className:"subtle",children:["Remaining: ",Math.round(t.remainingSeconds/60)," min"]})]})})}const Vn=[{value:"replace",label:"Replace",hint:"Shown in Try this instead when you hit a paywall."},{value:"productive",label:"Productive",hint:"Counts as productive time and appears in your productive shelf."},{value:"allow",label:"Allow",hint:"Good stuff you want nearby. Optional one-time unlock pricing."},{value:"temptation",label:"Temptation",hint:"Things you enjoy, but want contained and intentional."}];function Mp(e){return Vn.find(t=>t.value===e)?.label??e}function Tp(e){return e==="replace"||e==="productive"?"productive":e==="temptation"?"frivolity":"neutral"}function Dp(e){let t=e.trim();if(!t)return null;!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`https://${t}`);try{return new URL(t),t}catch{return null}}function Yc(e){const t=Number(e);return!Number.isFinite(t)||!Number.isInteger(t)||t<1?null:t}function ji(e){return new Date(e).toLocaleDateString()}function _p(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function Lp(e){return new Date(`${e}T00:00:00`).toLocaleDateString([],{month:"short",day:"numeric"})}function $p(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function Rp(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function Fp(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}function va(e){try{return new URL(e).hostname.replace(/^www\./,"")}catch{return e}}function Ip(e){const t=va(e);return`https://www.google.com/s2/favicons?domain=${encodeURIComponent(t)}&sz=64`}function Ap(e){return`https://image.thum.io/get/width/640/${encodeURIComponent(e)}`}function zp({api:e}){const[t,n]=d.useState([]),[r,l]=d.useState(!0),[i,a]=d.useState("replace"),[o,c]=d.useState(!1),[m,x]=d.useState("library"),[j,p]=d.useState(()=>$p(new Date)),[N,g]=d.useState([]),[w,F]=d.useState([]),[f,h]=d.useState(!1),[u,y]=d.useState(null),[b,C]=d.useState(!1),[v,S]=d.useState(""),[D,L]=d.useState("replace"),[W,Y]=d.useState(!1),[$,H]=d.useState(12),[Z,Q]=d.useState(""),[X,T]=d.useState(""),[M,I]=d.useState(!1),[O,ee]=d.useState(null),[le,U]=d.useState(null),[te,ne]=d.useState("replace"),[se,pe]=d.useState(!1),[Le,$e]=d.useState(12),[Ce,Ze]=d.useState(""),[A,V]=d.useState(""),[ae,J]=d.useState(!1),[ge,Ee]=d.useState(null),[K,xe]=d.useState(!1),ye=d.useCallback(async()=>{try{const E=await e.library.list();n(E),le&&!E.some(G=>G.id===le)&&U(null)}catch(E){console.error("Failed to load library items:",E)}finally{l(!1)}},[e.library,le]),_=d.useCallback(async E=>{h(!0),y(null);try{const[G,we]=await Promise.all([e.history.list(E),e.history.days(30)]);g(G),F(we)}catch(G){console.error("Failed to load consumption history:",G),y(G.message||"Failed to load history")}finally{h(!1)}},[e.history]);d.useEffect(()=>{ye()},[ye]),d.useEffect(()=>{m==="history"&&_(j)},[j,_,m]),d.useEffect(()=>{const E=e.events.on("library:changed",()=>ye());return()=>E()},[e,ye]),d.useEffect(()=>{m==="history"&&C(!1)},[m]);const ie=d.useMemo(()=>{let E=i==="all"?t:t.filter(G=>G.purpose===i);return o&&(E=E.filter(G=>typeof G.price=="number")),E},[i,t,o]),fe=()=>{S(""),L("replace"),Y(!1),H(12),Q(""),T(""),I(!1),ee(null)},ve=async E=>{E.preventDefault(),ee(null);const G=Dp(v);if(!G)return ee("Enter a valid URL (e.g. https://example.com).");let we=null;if(D==="allow"&&W){const Je=Yc($);if(!Je)return ee("Unlock price must be a whole number of at least 1.");we=Je}xe(!0);try{await e.library.add({kind:"url",url:G,title:Z.trim()||void 0,note:X.trim()||void 0,purpose:D,price:we,isPublic:M}),C(!1),fe(),await ye()}catch(Je){ee(Je.message||"Failed to add item")}finally{xe(!1)}},Fe=E=>{U(E.id),ne(E.purpose),pe(typeof E.price=="number"),$e(typeof E.price=="number"?E.price:12),Ze(E.title??""),V(E.note??""),J(!!E.isPublic),Ee(null)},je=()=>{U(null),Ee(null)},Ie=async E=>{if(E.preventDefault(),!le)return;Ee(null);let G=null;if(te==="allow"&&se){const we=Yc(Le);if(!we)return Ee("Unlock price must be a whole number of at least 1.");G=we}xe(!0);try{const we=Ce.trim(),Je=A.trim();await e.library.update(le,{title:we||null,note:Je||null,purpose:te,price:G,isPublic:ae}),U(null),await ye()}catch(we){Ee(we.message||"Failed to update item")}finally{xe(!1)}},de=async E=>{if(confirm("Remove this item from your library?"))try{await e.library.remove(E),await ye()}catch(G){console.error("Failed to remove library item:",G)}},ct=async E=>{xe(!0);try{const G=E.consumedAt?null:new Date().toISOString();await e.library.update(E.id,{consumedAt:G}),await ye()}catch(G){console.error("Failed to update consumed status:",G)}finally{xe(!1)}};return r?s.jsx("div",{className:"panel",children:"Loading library..."}):s.jsxs("section",{className:"page store-page",children:[s.jsxs("header",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Library"}),s.jsx("p",{className:"subtle",children:m==="history"?"Review what you consumed by day  productive items and frivolous sessions.":"A calm, curated pool of what I meant to do. Replace is what the paywall offers you first."}),s.jsxs("div",{className:"library-tabs",children:[s.jsx("button",{type:"button",className:`library-tab ${m==="library"?"active":""}`,onClick:()=>x("library"),children:"Library"}),s.jsx("button",{type:"button",className:`library-tab ${m==="history"?"active":""}`,onClick:()=>x("history"),children:"History"})]})]}),m==="library"&&s.jsx("button",{className:"primary",onClick:()=>C(!0),children:"+ Add Link"})]}),m==="library"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"settings-grid",style:{gridTemplateColumns:"1fr auto",gap:14},children:[s.jsxs("label",{children:["View",s.jsxs("select",{value:i,onChange:E=>a(E.target.value),disabled:K,children:[s.jsx("option",{value:"replace",children:"Replace"}),s.jsx("option",{value:"productive",children:"Productive"}),s.jsx("option",{value:"allow",children:"Allow"}),s.jsx("option",{value:"temptation",children:"Temptation"}),s.jsx("option",{value:"all",children:"All"})]})]}),s.jsxs("label",{style:{display:"flex",gap:10,alignItems:"center",marginTop:22},children:[s.jsx("input",{type:"checkbox",checked:o,onChange:E=>c(E.target.checked),disabled:K}),s.jsx("span",{className:"subtle",children:"Priced only"})]})]}),s.jsx("p",{className:"subtle",style:{marginTop:8},children:i==="all"?"All library items.":Vn.find(E=>E.value===i)?.hint})]}),b&&s.jsxs("div",{className:"card add-item-form",children:[s.jsx("h3",{children:"Add to Library"}),s.jsxs("form",{onSubmit:ve,children:[O&&s.jsx("p",{className:"error-text",children:O}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"URL"}),s.jsx("input",{type:"text",placeholder:"https://",value:v,onChange:E=>S(E.target.value),disabled:K})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Purpose"}),s.jsx("select",{value:D,onChange:E=>{const G=E.target.value;L(G),G!=="allow"&&Y(!1)},disabled:K,children:Vn.map(E=>s.jsx("option",{value:E.value,children:E.label},E.value))}),s.jsx("p",{className:"subtle",style:{marginTop:8},children:Vn.find(E=>E.value===D)?.hint})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:W,disabled:K||D!=="allow",onChange:E=>Y(E.target.checked)}),"One-time unlock price (optional)"]}),s.jsx("input",{type:"number",min:1,max:500,step:1,value:$,disabled:K||D!=="allow"||!W,onChange:E=>{const G=Number.parseInt(E.target.value,10);H(Number.isNaN(G)?1:G)}}),s.jsxs("p",{className:"subtle",style:{marginTop:8},children:["Pricing only applies to ",s.jsx("strong",{children:"Allow"})," items. It appears under Proceed anyway when you land on that exact URL."]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Title (optional)"}),s.jsx("input",{type:"text",value:Z,onChange:E=>Q(E.target.value),disabled:K})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Note (optional)"}),s.jsx("textarea",{value:X,onChange:E=>T(E.target.value),disabled:K})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsxs("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:M,disabled:K,onChange:E=>I(E.target.checked)}),"Share with friends (public)"]}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Only friends will see this in their feeds."})]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{type:"button",className:"ghost",onClick:()=>{C(!1),fe()},disabled:K,children:"Cancel"}),s.jsx("button",{type:"submit",className:"primary",disabled:K,children:"Add"})]})]})]}),ie.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"No items here yet."}),s.jsx("p",{className:"subtle",children:"Tip: right-click a page or link and Save to TimeWellSpent."})]}):s.jsx("div",{className:"library-grid",children:ie.map(E=>{const G=E.title||E.domain||E.app||"Saved item",we=E.note||(E.url?va(E.url):E.app||E.domain||""),Je=E.url?va(E.url):"",bt=E.url?Ip(E.url):null,vt=E.url?Ap(E.url):null,Ht=E.domain??E.app??G,Ut={"--cover-hue":`${Fp(Ht)%360}`},nn=G.trim().charAt(0).toUpperCase()||"T",Cn=le===E.id,sn=E.consumedAt?"Unmark done":"Mark done";return s.jsxs("article",{className:`card library-card ${E.consumedAt?"is-done":""}`,children:[s.jsxs("div",{className:`library-thumb ${E.kind==="app"?"app":""}`,style:Ut,children:[vt&&E.kind==="url"&&s.jsx("img",{src:vt,alt:"",loading:"lazy",onError:Se=>{Se.currentTarget.style.display="none"}}),s.jsxs("div",{className:"library-thumb-fallback",children:[s.jsx("span",{children:nn}),E.kind==="app"&&s.jsx("small",{children:"App"})]}),bt?s.jsx("img",{className:"library-favicon",src:bt,alt:"",loading:"lazy"}):s.jsx("div",{className:"library-favicon library-favicon-placeholder","aria-hidden":"true"}),E.consumedAt&&s.jsx("div",{className:"library-done-badge",title:"Completed",children:""})]}),s.jsxs("div",{className:"library-body",children:[s.jsxs("div",{className:"library-title-row",children:[s.jsxs("div",{children:[s.jsx("h3",{children:G}),s.jsx("p",{className:"subtle",children:we})]}),s.jsx("span",{className:`pill ${Tp(E.purpose)}`,children:Mp(E.purpose)})]}),s.jsxs("div",{className:"library-meta",children:[s.jsx("span",{children:Je||E.app||"Saved item"}),typeof E.price=="number"&&s.jsxs("span",{children:[E.price," f-coins unlock"]}),E.isPublic&&s.jsx("span",{children:"Public to friends"}),E.kind==="app"&&s.jsx("span",{children:"Desktop app"})]}),s.jsxs("div",{className:"library-dates",children:[s.jsxs("span",{children:["Added ",ji(E.createdAt)]}),E.consumedAt?s.jsxs("span",{children:["Done ",ji(E.consumedAt)]}):E.lastUsedAt?s.jsxs("span",{children:["Last used ",ji(E.lastUsedAt)]}):s.jsx("span",{children:"Not used yet"})]}),s.jsxs("div",{className:"library-actions",children:[E.url?s.jsx("a",{href:E.url,target:"_blank",rel:"noopener noreferrer",className:"icon-button",title:"Open link","aria-label":"Open link",children:s.jsx(Xc,{})}):s.jsx("button",{className:"icon-button",type:"button",disabled:!0,title:"Open link","aria-label":"Open link",children:s.jsx(Xc,{})}),s.jsx("button",{className:"icon-button",type:"button",onClick:()=>ct(E),disabled:K,title:sn,"aria-label":sn,children:s.jsx(Op,{})}),Cn?s.jsx("button",{className:"icon-button",onClick:je,disabled:K,title:"Cancel edit","aria-label":"Cancel edit",children:"X"}):s.jsx("button",{className:"icon-button",onClick:()=>Fe(E),disabled:K,title:"Edit","aria-label":"Edit",children:s.jsx(Hp,{})}),s.jsx("button",{className:"icon-button danger",onClick:()=>de(E.id),disabled:K,title:"Remove","aria-label":"Remove",children:s.jsx(Bp,{})})]}),Cn&&s.jsxs("form",{className:"library-edit",onSubmit:Ie,children:[ge&&s.jsx("p",{className:"error-text",children:ge}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsx("label",{children:"Purpose"}),s.jsx("select",{value:te,onChange:Se=>{const Wt=Se.target.value;ne(Wt),Wt!=="allow"&&pe(!1)},disabled:K,children:Vn.map(Se=>s.jsx("option",{value:Se.value,children:Se.label},Se.value))}),s.jsx("p",{className:"subtle",style:{margin:0},children:Vn.find(Se=>Se.value===te)?.hint})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsxs("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:se,disabled:K||te!=="allow",onChange:Se=>pe(Se.target.checked)}),"One-time unlock price (optional)"]}),s.jsx("input",{type:"number",min:1,max:500,step:1,value:Le,disabled:K||te!=="allow"||!se,onChange:Se=>{const Wt=Number.parseInt(Se.target.value,10);$e(Number.isNaN(Wt)?1:Wt)}})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsx("label",{children:"Title"}),s.jsx("input",{type:"text",value:Ce,onChange:Se=>Ze(Se.target.value),disabled:K})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsx("label",{children:"Note"}),s.jsx("textarea",{value:A,onChange:Se=>V(Se.target.value),disabled:K})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsxs("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:ae,disabled:K||E.kind==="app",onChange:Se=>J(Se.target.checked)}),"Share with friends (public)"]}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Only friends will see this in their feeds."})]}),s.jsx("div",{className:"form-actions",style:{justifyContent:"flex-end"},children:s.jsx("button",{type:"submit",className:"primary",disabled:K,children:"Save"})})]})]})]},E.id)})})]}),m==="history"&&s.jsxs("div",{className:"card history-card",children:[s.jsxs("div",{className:"history-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Consumption log"}),s.jsx("p",{className:"subtle",children:"Productive items and frivolous sessions you opened each day."})]}),s.jsxs("label",{className:"history-picker",children:["Day",s.jsx("input",{type:"date",value:j,onChange:E=>p(E.target.value)})]})]}),w.length>0&&s.jsx("div",{className:"history-days",children:w.map(E=>s.jsxs("button",{type:"button",className:`history-day ${E.day===j?"active":""}`,onClick:()=>p(E.day),children:[s.jsx("span",{children:Lp(E.day)}),s.jsx("span",{className:"history-day-count",children:E.count})]},E.day))}),f?s.jsx("div",{className:"subtle",children:"Loading history"}):u?s.jsx("div",{className:"error-text",children:u}):N.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"No entries for this day yet."}),s.jsx("p",{className:"subtle",children:"Mark items as consumed or open a session to see them here."})]}):s.jsx("ul",{className:"history-list",children:N.map(E=>{const G=E.kind==="frivolous-session",we=typeof E.meta?.purpose=="string"?E.meta.purpose:null,bt=G?"pill frivolity":`pill ${we==="temptation"?"frivolity":we==="productive"||we==="replace"?"productive":"neutral"}`,vt=E.title??E.domain??"Untitled",Ht=G?`Mode ${E.meta?.mode??"session"}`:E.url??E.domain??"Library item",Bt=typeof E.meta?.mode=="string"?E.meta.mode:null,Ut=G?Bt==="store"?"Store unlock":"Frivolous session":we?`${Rp(we)} item`:"Library item";return s.jsxs("li",{className:"history-item",children:[s.jsx("div",{className:"history-time",children:_p(E.occurredAt)}),s.jsxs("div",{className:"history-main",children:[s.jsx("strong",{children:vt}),s.jsx("span",{className:"subtle",children:Ht})]}),s.jsxs("div",{className:"history-actions",children:[s.jsx("span",{className:bt,children:Ut}),E.url&&s.jsx("a",{className:"ghost",href:E.url,target:"_blank",rel:"noopener noreferrer",children:"Open"})]})]},E.id)})})]})]})}function Xc(){return s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M14 4h6v6M10 14l10-10M20 14v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h4"})})}function Op(){return s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M5 13l4 4L19 7"})})}function Hp(){return s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M4 20h4l10-10-4-4L4 16v4zM14 6l4 4"})})}function Bp(){return s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M6 7h12M9 7V5h6v2M8 7l1 12h6l1-12"})})}function wi(e){return e.trim().replace(/^@/,"").toLowerCase()}function _s(e){const t=e/3600;return t>=10?`${t.toFixed(0)}h`:`${t.toFixed(1)}h`}function Hr(e){return`${Math.max(0,Math.min(100,Math.round(e)))}%`}function Ni(e){return`${Math.round(e/60)}m`}function Zc(e){return typeof e!="number"?"":String(e)}function Jc(e,t){const n=e?.categoryBreakdown.productive??0,r=t?.categoryBreakdown.productive??0,l=n+r;return l===0?50:Math.round(n/l*100)}function Up({api:e}){const[t,n]=d.useState(null),[r,l]=d.useState([]),[i,a]=d.useState({incoming:[],outgoing:[]}),[o,c]=d.useState({}),[m,x]=d.useState(null),[j,p]=d.useState(null),[N,g]=d.useState(null),[w,F]=d.useState(null),[f,h]=d.useState([]),[u,y]=d.useState(!1),[b,C]=d.useState([]),[v,S]=d.useState(""),[D,L]=d.useState(""),[W,Y]=d.useState(null),[$,H]=d.useState(!1),[Z,Q]=d.useState(null),[X,T]=d.useState(!1),[M,I]=d.useState(!1);async function O(){Q(null);try{const A=await e.sync.status(),V=A.configured&&A.authenticated;if(T(V),!V)return;const[ae,J,ge,Ee,K,xe,ye]=await Promise.all([e.friends.profile(),e.friends.list(),e.friends.requests(),e.friends.summaries(24),e.friends.meSummary(24),e.trophies.list(),e.settings.competitiveOptIn()]);n(ae),p(ae),S(ae?.handle??""),l(J),a(ge),c(Ee),x(K),C(xe),I(ye)}catch(A){console.error(A),Q(A.message)}}d.useEffect(()=>{O()},[]);const ee=d.useMemo(()=>r.map(A=>{const V=o[A.userId],ae=V?.categoryBreakdown??null,J=V?.totalActiveSeconds??0,ge=ae?.draining??0,Ee=J>0?ae.productive/J*100:0,K=J>0?ae.neutral/J*100:0,xe=J>0?ae.frivolity/J*100:0,ye=J>0?ge/J*100:0;return{friend:A,summary:V,totals:ae,productivePct:Ee,neutralPct:K,frivolityPct:xe,drainingPct:ye}}),[r,o]),le=d.useMemo(()=>{const A=new Map;return b.forEach(V=>A.set(V.id,V)),A},[b]);async function U(){Q(null),H(!0);try{const A=await e.friends.updateProfile({handle:wi(v)});n(A),S(A.handle??"")}catch(A){Q(A.message)}finally{H(!1)}}async function te(){Y(null);const A=wi(D);if(A)try{const V=await e.friends.findByHandle(A);Y(V)}catch{Y(null)}}async function ne(){Q(null),H(!0);try{await e.friends.request(wi(D)),L(""),Y(null),await O()}catch(A){Q(A.message)}finally{H(!1)}}async function se(A){H(!0),Q(null);try{await e.friends.accept(A),await O()}catch(V){Q(V.message)}finally{H(!1)}}async function pe(A){H(!0),Q(null);try{await e.friends.decline(A),await O()}catch(V){Q(V.message)}finally{H(!1)}}async function Le(A){H(!0),Q(null);try{await e.friends.cancel(A),await O()}catch(V){Q(V.message)}finally{H(!1)}}async function $e(A){if(confirm("Remove this friend?")){H(!0),Q(null);try{await e.friends.remove(A),await O()}catch(V){Q(V.message)}finally{H(!1)}}}async function Ce(A){g(A),F(null),h([]),y(!0);try{const[V,ae]=await Promise.all([e.friends.timeline(A.userId,24),e.friends.publicLibrary(A.userId,168)]);F(V),h(ae??[])}catch(V){console.error("Failed to load friend detail",V)}}async function Ze(A){I(A);try{await e.settings.updateCompetitiveOptIn(A)}catch(V){Q(V.message||"Failed to update preference"),I(!A)}}return X?s.jsxs("section",{className:"page store-page",children:[s.jsxs("header",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Friends"}),s.jsx("p",{className:"subtle",children:"A low-key feed of daily focus  aggregates only (no URLs)."})]}),s.jsx("div",{style:{display:"flex",gap:10},children:s.jsx("button",{className:"ghost",disabled:$,onClick:O,children:"Refresh"})})]}),Z&&s.jsx("p",{className:"error-text",children:Z}),s.jsxs("div",{className:"card settings-section",style:{marginBottom:16},children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Competitive view"}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Opt in to show winners/losers and head-to-head bars."})]}),s.jsx("div",{className:"settings-row",children:s.jsxs("label",{className:"settings-inline",style:{alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:M,onChange:A=>Ze(A.target.checked)}),s.jsx("span",{className:"subtle",children:M?"Enabled":"Disabled"})]})})]}),s.jsxs("div",{className:"card",style:{marginBottom:16},children:[s.jsx("h3",{children:"Your handle"}),s.jsxs("div",{className:"settings-grid",style:{gridTemplateColumns:"1fr auto",alignItems:"end"},children:[s.jsxs("label",{children:["Handle",s.jsx("input",{value:v,onChange:A=>S(A.target.value),placeholder:"e.g. timewell"})]}),s.jsx("button",{className:"primary",disabled:$,onClick:U,children:"Update"})]}),s.jsx("p",{className:"subtle",style:{marginTop:8},children:"Handles are lowercase letters, numbers, and underscores (3-20)."})]}),s.jsxs("div",{className:"card",style:{marginBottom:16},children:[s.jsx("h3",{children:"Add friend"}),s.jsxs("div",{className:"settings-grid",style:{gridTemplateColumns:"1fr auto",alignItems:"end"},children:[s.jsxs("label",{children:["Friend handle",s.jsx("input",{value:D,onChange:A=>L(A.target.value),onBlur:te,placeholder:"@friend"})]}),s.jsx("button",{className:"primary",disabled:$||!D.trim(),onClick:ne,children:"Send request"})]}),W&&s.jsxs("p",{className:"subtle",style:{marginTop:8},children:["Found ",W.displayName??W.handle??"friend","."]})]}),(i.incoming.length>0||i.outgoing.length>0)&&s.jsxs("div",{className:"card",style:{marginBottom:16},children:[s.jsx("h3",{children:"Requests"}),i.incoming.map(A=>s.jsxs("div",{className:"device-row",style:{marginBottom:8},children:[s.jsxs("div",{children:[s.jsx("strong",{children:A.displayName??A.handle??"Friend"}),s.jsx("span",{className:"subtle",children:"Incoming"})]}),s.jsxs("div",{className:"settings-actions",children:[s.jsx("button",{className:"primary",disabled:$,onClick:()=>se(A.id),children:"Accept"}),s.jsx("button",{className:"ghost",disabled:$,onClick:()=>pe(A.id),children:"Decline"})]})]},A.id)),i.outgoing.map(A=>s.jsxs("div",{className:"device-row",style:{marginBottom:8},children:[s.jsxs("div",{children:[s.jsx("strong",{children:A.displayName??A.handle??"Friend"}),s.jsx("span",{className:"subtle",children:"Pending"})]}),s.jsx("div",{className:"settings-actions",children:s.jsx("button",{className:"ghost",disabled:$,onClick:()=>Le(A.id),children:"Cancel"})})]},A.id))]}),s.jsx("div",{className:"store-grid",children:r.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"No friends yet."}),s.jsx("p",{className:"subtle",children:"Add a handle to start a tiny, supportive feed."})]}):ee.map(({friend:A,summary:V,totals:ae,productivePct:J,neutralPct:ge,frivolityPct:Ee,drainingPct:K})=>{const xe=(A.pinnedTrophies??[]).map(ye=>le.get(ye)).filter(ye=>!!ye);return s.jsxs("div",{className:"card store-item",children:[s.jsxs("div",{className:"store-item-headline",children:[s.jsxs("div",{children:[s.jsx("p",{className:"store-item-domain",children:A.displayName??A.handle??"Friend"}),s.jsx("h3",{className:"store-item-title",children:V?`${V.productivityScore}% productive`:"No data yet"})]}),s.jsxs("div",{className:"store-item-price-pill",children:[s.jsx("strong",{children:V?_s(V.totalActiveSeconds):""}),s.jsx("span",{children:"active"})]}),V&&s.jsxs("div",{className:"pill deepwork",style:{marginLeft:"auto"},children:[Ni(V.deepWorkSeconds)," deep work"]})]}),M?s.jsx("div",{className:"head-to-head",children:V?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"head-to-head-row",children:[s.jsx("span",{children:"You"}),s.jsx("span",{children:V?A.displayName??A.handle??"Friend":"Friend"})]}),s.jsxs("div",{className:"head-to-head-bar fancy",children:[s.jsx("span",{className:"head-to-head-left",style:{width:`${Jc(m,V)}%`,background:j?.color??"var(--accent)"}}),s.jsx("span",{className:"head-to-head-right",style:{width:`${100-Jc(m,V)}%`,background:A.color??"rgba(255, 255, 255, 0.3)"}}),s.jsx("div",{className:"head-to-head-glow"})]}),s.jsxs("div",{className:"head-to-head-row subtle",children:[s.jsxs("span",{children:[Ni(m?.categoryBreakdown.productive??0)," productive"]}),s.jsxs("span",{children:[Ni(V?.categoryBreakdown.productive??0)," productive"]})]}),s.jsxs("div",{className:"head-to-head-row subtle",children:[s.jsxs("span",{children:[Zc(m?.emergencySessions)," emergency"]}),s.jsxs("span",{children:[Zc(V?.emergencySessions)," emergency"]})]})]}):s.jsx("p",{className:"subtle",style:{marginTop:6},children:"Waiting for shared activity data."})}):s.jsx("p",{className:"subtle",style:{marginTop:10},children:"Competitive view is off."}),xe.length>0&&s.jsx("div",{className:"friends-trophies",children:xe.slice(0,3).map(ye=>s.jsxs("span",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:ye.emoji}),ye.name]},ye.id))}),V&&ae&&s.jsxs("div",{style:{marginTop:10},children:[s.jsxs("div",{className:"subtle",style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Productive"}),s.jsxs("span",{children:[_s(ae.productive)," (",Hr(J),")"]})]}),s.jsx("div",{className:"impact-meter",style:{marginTop:6},children:s.jsx("span",{style:{width:`${J}%`,background:"var(--cat-productive)"}})}),s.jsxs("div",{className:"subtle",style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[s.jsx("span",{children:"Neutral"}),s.jsxs("span",{children:[_s(ae.neutral)," (",Hr(ge),")"]})]}),s.jsx("div",{className:"impact-meter day",style:{marginTop:6},children:s.jsx("span",{style:{width:`${ge}%`,background:"var(--cat-neutral)"}})}),s.jsxs("div",{className:"subtle",style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[s.jsx("span",{children:"Frivolity"}),s.jsxs("span",{children:[_s(ae.frivolity)," (",Hr(Ee),")"]})]}),s.jsx("div",{className:"impact-meter",style:{marginTop:6},children:s.jsx("span",{style:{width:`${Ee}%`,background:"var(--cat-frivolity)"}})}),s.jsxs("div",{className:"subtle",style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[s.jsx("span",{children:"Draining"}),s.jsxs("span",{children:[_s(ae.draining??0)," (",Hr(K),")"]})]}),s.jsx("div",{className:"impact-meter",style:{marginTop:6},children:s.jsx("span",{style:{width:`${K}%`,background:"var(--cat-draining)"}})})]}),s.jsxs("div",{className:"store-item-meta",children:[s.jsxs("span",{children:["Last update ",V?new Date(V.updatedAt).toLocaleString():""]}),s.jsxs("span",{children:["@",A.handle??"no-handle"]})]}),s.jsxs("div",{className:"store-item-actions",children:[s.jsx("button",{className:"ghost",disabled:$,onClick:()=>Ce(A),children:"Details"}),s.jsx("button",{className:"ghost danger",disabled:$,onClick:()=>$e(A.id),children:"Remove"})]})]},A.id)})}),s.jsx(mh,{open:u,friend:N,summary:N?o[N.userId]??null:null,timeline:w,publicLibraryItems:f,trophies:b,onClose:()=>y(!1)})]}):s.jsxs("section",{className:"page store-page",children:[s.jsx("header",{className:"page-header",children:s.jsxs("div",{children:[s.jsx("h1",{children:"Friends"}),s.jsx("p",{className:"subtle",children:"Add a friend by handle once you are signed in."})]})}),s.jsxs("div",{className:"card",children:[s.jsx("h3",{children:"Connect Sync"}),s.jsx("p",{className:"subtle",children:"Friends require Supabase auth. Go to Settings  Cloud sync and connect."})]})]})}const Wp={attention:"Attention Control",recovery:"Recovery & Resilience",streaks:"Anti-Frivolity Streaks",economy:"Economy & Discipline",library:"Library & Intentionality",time:"Time-of-Day",stability:"Stability & Dynamics",fun:"Fun Flavor",social:"Social & Friends",secret:"Secret"},qc=6;function Vp(e){return`${Math.round(e)}m`}function Qp(e){return e>=10?`${e.toFixed(0)}h`:`${e.toFixed(1)}h`}function Kp({api:e}){const[t,n]=d.useState(null),[r,l]=d.useState([]),[i,a]=d.useState(!1),[o,c]=d.useState(!1),m=async()=>{const[u,y]=await Promise.all([e.trophies.profile(),e.trophies.list()]);n(u),l(y)};d.useEffect(()=>{m()},[]);const x=d.useMemo(()=>t?.pinnedTrophies?.length?t.pinnedTrophies:r.filter(u=>u.pinned).map(u=>u.id),[t,r]),j=d.useMemo(()=>{const u=new Map;return r.forEach(y=>u.set(y.id,y)),u},[r]),p=x.map(u=>j.get(u)).filter(u=>!!u),N=d.useMemo(()=>r.filter(u=>u.progress.state==="locked").sort((u,y)=>y.progress.ratio-u.progress.ratio).slice(0,4),[r]),g=d.useMemo(()=>{const u=new Map;return r.forEach(y=>{const b=y.category;u.has(b)||u.set(b,[]),u.get(b).push(y)}),u},[r]),w=async u=>{if(!o){c(!0);try{const y=x.includes(u)?x.filter(C=>C!==u):[...x,u].slice(0,qc),b=await e.trophies.pin(y);n(C=>C&&{...C,pinnedTrophies:b}),l(C=>C.map(v=>({...v,pinned:b.includes(v.id)})))}finally{c(!1)}}},F=t?.profile?.displayName??t?.profile?.handle??"You",f=t?.profile?.handle?`@${t.profile.handle}`:"Not synced yet",h=t?.profile?.color??"var(--accent)";return s.jsxs("section",{className:"panel",children:[s.jsxs("header",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Profile"}),s.jsx("h1",{children:"Trophy case"}),s.jsx("p",{className:"subtle",children:"Your public card, progression, and achievements."})]}),s.jsx("button",{type:"button",className:`pill ghost ${i?"active":""}`,onClick:()=>a(u=>!u),children:i?"Hide preview":"Public preview"})]}),s.jsxs("div",{className:"profile-grid",children:[s.jsxs("div",{className:"card profile-card",children:[s.jsxs("div",{className:"profile-card-header",children:[s.jsx("div",{className:"profile-avatar",style:{background:h},children:F.trim().slice(0,2).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h2",{children:F}),s.jsx("span",{className:"subtle",children:f})]})]}),s.jsxs("div",{className:"profile-stats",children:[s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Weekly productive"}),s.jsx("strong",{children:t?Vp(t.stats.weeklyProductiveMinutes):"--"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Best run"}),s.jsx("strong",{children:t?Qp(t.stats.bestRunMinutes/60):"--"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Recovery median"}),s.jsx("strong",{children:t?.stats.recoveryMedianMinutes!=null?`${Math.round(t.stats.recoveryMedianMinutes)}m`:"--"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Frivolity streak"}),s.jsx("strong",{children:t?`${t.stats.currentFrivolityStreakHours}h`:"--"})]})]}),s.jsxs("div",{className:"profile-pinned",children:[s.jsxs("div",{className:"profile-pinned-header",children:[s.jsx("span",{className:"label",children:"Pinned trophies"}),s.jsxs("span",{className:"subtle",children:[p.length,"/",qc]})]}),p.length===0?s.jsx("p",{className:"subtle",style:{margin:0},children:"Pin a few trophies so friends can see them."}):s.jsx("div",{className:"profile-badges",children:p.map(u=>s.jsxs("div",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:u.emoji}),s.jsx("span",{children:u.name})]},u.id))})]})]}),s.jsxs("div",{className:"card profile-next",children:[s.jsx("div",{className:"card-header-row",children:s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Next up"}),s.jsx("h2",{children:"Close to unlocking"})]})}),N.length===0?s.jsx("p",{className:"subtle",children:"No tracked trophies yet. Keep logging activity."}):s.jsx("div",{className:"next-list",children:N.map(u=>s.jsxs("div",{className:"next-item",children:[s.jsxs("div",{className:"next-item-header",children:[s.jsx("span",{className:"emoji",children:u.emoji}),s.jsxs("div",{children:[s.jsx("strong",{children:u.name}),s.jsx("span",{className:"subtle",children:u.description})]})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("span",{style:{width:`${Math.round(u.progress.ratio*100)}%`}})}),s.jsx("span",{className:"subtle",children:u.progress.label??`${u.progress.current}/${u.progress.target}`})]},u.id))}),t?.earnedToday?.length?s.jsxs("div",{className:"earned-today",children:[s.jsx("span",{className:"label",children:"Earned today"}),s.jsx("div",{className:"profile-badges",children:t.earnedToday.map(u=>{const y=j.get(u);return y?s.jsxs("div",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:y.emoji}),s.jsx("span",{children:y.name})]},u):null})})]}):null]})]}),i&&s.jsxs("div",{className:"card profile-preview",children:[s.jsx("div",{className:"card-header-row",children:s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Public preview"}),s.jsx("h2",{children:"What friends see"})]})}),s.jsxs("div",{className:"profile-preview-card",children:[s.jsx("div",{className:"profile-avatar",style:{background:h},children:F.trim().slice(0,2).toUpperCase()}),s.jsxs("div",{children:[s.jsx("strong",{children:F}),s.jsx("span",{className:"subtle",children:f})]}),s.jsx("div",{className:"profile-preview-badges",children:p.length===0?s.jsx("span",{className:"subtle",children:"No pinned trophies yet."}):p.map(u=>s.jsxs("span",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:u.emoji}),u.name]},u.id))})]})]}),s.jsxs("div",{className:"card trophy-case",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Trophy case"}),s.jsx("h2",{children:"Full collection"})]}),s.jsx("span",{className:"subtle",children:"Pin trophies to feature them on your card."})]}),Array.from(g.entries()).map(([u,y])=>s.jsxs("div",{className:"trophy-group",children:[s.jsx("h3",{children:Wp[u]}),s.jsx("div",{className:"trophy-grid",children:y.map(b=>{const C=!b.earnedAt,v=b.secret&&C;return s.jsxs("div",{className:`trophy-card ${C?"locked":"earned"}`,children:[s.jsxs("div",{className:"trophy-card-header",children:[s.jsx("span",{className:"emoji",children:v?"":b.emoji}),s.jsx("button",{type:"button",className:`pill ghost ${b.pinned?"active":""}`,onClick:()=>w(b.id),disabled:o||!b.earnedAt,title:b.earnedAt?"Pin to profile":"Earn to pin",children:b.pinned?"Pinned":"Pin"})]}),s.jsx("strong",{children:v?"Classified":b.name}),s.jsx("p",{className:"subtle",children:v?"Keep going to reveal this trophy.":b.description}),b.progress.state==="untracked"?s.jsx("span",{className:"subtle",children:b.progress.label}):s.jsx("div",{className:"progress-bar",children:s.jsx("span",{style:{width:`${Math.round(b.progress.ratio*100)}%`}})}),b.earnedAt&&s.jsxs("span",{className:"subtle",children:["Earned ",new Date(b.earnedAt).toLocaleDateString()]})]},b.id)})})]},u))]})]})}const Gp=[{name:"The Crossword",hint:"Full daily crossword.",url:"https://www.nytimes.com/crosswords/game/daily"},{name:"The Mini",hint:"Quick 5-minute crossword.",url:"https://www.nytimes.com/crosswords/game/mini"},{name:"Connections",hint:"Find the four hidden groups.",url:"https://www.nytimes.com/games/connections"},{name:"Wordle",hint:"One word, six tries.",url:"https://www.nytimes.com/games/wordle/index.html"},{name:"Spelling Bee",hint:"Build words from seven letters.",url:"https://www.nytimes.com/puzzles/spelling-bee"},{name:"Strands",hint:"Find the themed word web.",url:"https://www.nytimes.com/games/strands"}];function Yp({wallet:e}){return s.jsxs("section",{className:"games-view panel",children:[s.jsxs("header",{className:"games-hero",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Games"}),s.jsx("p",{className:"subtle",children:"Intentional time burners: quick fun, finite sessions, less doom-scroll."})]}),s.jsxs("div",{className:"games-wallet-pill",children:[s.jsx("span",{children:"Wallet"}),s.jsxs("strong",{children:[e.balance," f-coins"]})]})]}),s.jsxs("section",{className:"games-links-section",children:[s.jsxs("div",{className:"section-header-row",children:[s.jsxs("div",{children:[s.jsx("h3",{children:"NYT quick launch"}),s.jsx("p",{className:"subtle",children:"If you want to burn a little time, do it on purpose."})]}),s.jsx("a",{href:"https://www.nytimes.com/crosswords",target:"_blank",rel:"noopener noreferrer",className:"ghost button-link",children:"Open NYT games hub"})]}),s.jsx("div",{className:"games-links-grid",children:Gp.map(t=>s.jsxs("a",{className:"nyt-link-card",href:t.url,target:"_blank",rel:"noopener noreferrer",children:[s.jsx("div",{className:"nyt-link-title",children:t.name}),s.jsx("p",{className:"subtle",children:t.hint}),s.jsx("span",{className:"chip",children:"Open"})]},t.name))})]}),s.jsxs("section",{className:"games-sudoku-section",children:[s.jsx("div",{className:"section-header-row",children:s.jsxs("div",{children:[s.jsx("h3",{children:"Paywall Sudoku drill"}),s.jsx("p",{className:"subtle",children:"Practice the same challenge used in the paywall free-pass flow."})]})}),s.jsx(ph,{title:"Hard Sudoku practice",subtitle:"Solve any 9 blank squares correctly.",requiredCorrect:9})]})]})}const vh=window.twsp,Xp=160,Zp=120,Jp=4e3;function gh(e){return new Promise(t=>window.setTimeout(t,e))}async function qp(e){const t=Date.now();for(;Date.now()-t<Jp;){const n=e.videoWidth,r=e.videoHeight;if(e.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&n>=Xp&&r>=Zp)return{width:n,height:r};await gh(80)}throw new Error(`Camera stream resolution unusable (${e.videoWidth}x${e.videoHeight})`)}function eu(e,t,n){const r=Math.max(1,Math.min(48,t)),l=Math.max(1,Math.min(48,n)),{data:i}=e.getImageData(0,0,r,l);let a=0;for(let o=0;o<i.length;o+=16){const c=i[o]??0,m=i[o+1]??0,x=i[o+2]??0;.2126*c+.7152*m+.0722*x>10&&(a+=1)}return a<=1}async function ev(e){let t=null;try{t=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720}},audio:!1});const n=document.createElement("video");n.srcObject=t,n.playsInline=!0,n.muted=!0,await n.play();const{width:r,height:l}=await qp(n),a=Math.min(1,640/r),o=Math.round(r*a),c=Math.round(l*a),m=document.createElement("canvas");m.width=o,m.height=c;const x=m.getContext("2d");if(!x)throw new Error("Unable to capture camera frame");if(x.drawImage(n,0,0,o,c),eu(x,o,c)&&(await gh(180),x.drawImage(n,0,0,o,c),eu(x,o,c)))throw new Error("Captured frame appears blank");const j=m.toDataURL("image/jpeg",.82);await vh.camera.storePhoto({dataUrl:j,subject:e.subject??null,domain:e.domain??null})}finally{t&&t.getTracks().forEach(n=>n.stop())}}function tv(){const e=d.useRef(!1);return d.useEffect(()=>{const t=vh.events.on("camera:capture",async n=>{if(!e.current){e.current=!0;try{await ev(n??{})}catch(r){console.warn("Camera capture failed",r)}finally{e.current=!1}}});return()=>{t()}},[]),null}const nv=["Hello beautiful.","Good morning, bright mind.","Hey superstar.","Hello again, steady heart.","Welcome back, focus machine."],sv=["Set the tone. The day follows.","Small levers, huge outcomes.","One clear choice beats a thousand edits.","Pick your rules before the feed does.","Today is made in small agreements."];function rv(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}function tu(e,t){if(!e.length)return"";const n=rv(t)%e.length;return e[n]}function lv({open:e,dayKey:t,initial:n,saving:r,error:l,onSave:i,onSkip:a}){const[o,c]=d.useState(n.goalHours),[m,x]=d.useState(n.idleThreshold),[j,p]=d.useState(n.continuityWindowSeconds),[N,g]=d.useState(n.emergencyPolicy),[w,F]=d.useState(n.note);d.useEffect(()=>{e&&(c(n.goalHours),x(n.idleThreshold),p(n.continuityWindowSeconds),g(n.emergencyPolicy),F(n.note))},[e,n]);const f=d.useMemo(()=>tu(nv,t),[t]),h=d.useMemo(()=>tu(sv,t+"tag"),[t]);return e?s.jsx("div",{className:"daily-onboarding-overlay",role:"dialog","aria-modal":"true",children:s.jsxs("div",{className:"daily-onboarding-card",children:[s.jsxs("div",{className:"daily-onboarding-header",children:[s.jsxs("div",{className:"daily-onboarding-hero",children:[s.jsx("div",{className:"daily-onboarding-orb","aria-hidden":!0}),s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Daily landing"}),s.jsx("h2",{children:f}),s.jsx("p",{className:"subtle",children:h})]})]}),s.jsxs("div",{className:"daily-onboarding-meta",children:[s.jsx("span",{className:"pill ghost",children:"Morning tuning"}),s.jsx("span",{className:"pill ghost",children:"One screen"})]})]}),s.jsxs("div",{className:"daily-onboarding-panels",children:[s.jsxs("div",{className:"daily-onboarding-panel",children:[s.jsx("h3",{children:"Set your day"}),s.jsxs("div",{className:"daily-onboarding-grid",children:[s.jsxs("label",{children:["Productivity goal (hours)",s.jsx("input",{type:"number",min:"0.5",max:"12",step:"0.1",value:o,onChange:u=>c(Number(u.target.value))})]}),s.jsxs("label",{children:["Idle threshold (seconds)",s.jsx("input",{type:"number",min:"5",max:"300",value:m,onChange:u=>x(Number(u.target.value))})]}),s.jsxs("label",{children:["Continuity window (seconds)",s.jsx("input",{type:"number",min:"0",max:"900",value:j,onChange:u=>p(Number(u.target.value))})]}),s.jsxs("label",{children:["Emergency policy",s.jsxs("select",{value:N,onChange:u=>g(u.target.value),children:[s.jsx("option",{value:"off",children:"Off"}),s.jsx("option",{value:"gentle",children:"Gentle"}),s.jsx("option",{value:"balanced",children:"Balanced"}),s.jsx("option",{value:"strict",children:"Strict"})]})]})]})]}),s.jsxs("div",{className:"daily-onboarding-panel",children:[s.jsx("h3",{children:"Note for end-of-day you"}),s.jsx("label",{className:"daily-onboarding-note",children:s.jsx("textarea",{rows:4,value:w,onChange:u=>F(u.target.value),placeholder:"Write something kind, firm, or honest. We'll bring it back later."})})]})]}),l&&s.jsx("p",{className:"error-text",children:l}),s.jsxs("div",{className:"daily-onboarding-actions",children:[s.jsx("button",{type:"button",className:"ghost",onClick:()=>a({note:w}),disabled:r,children:"Not now"}),s.jsx("button",{type:"button",className:"primary",onClick:()=>i({goalHours:o,idleThreshold:m,continuityWindowSeconds:j,emergencyPolicy:N,note:w}),disabled:r,children:r?"Saving...":"Set my day"})]})]})}):null}function iv({open:e,note:t,onClose:n}){return e?s.jsx("div",{className:"daily-onboarding-overlay",role:"dialog","aria-modal":"true",children:s.jsxs("div",{className:"daily-onboarding-card daily-note-card",children:[s.jsxs("div",{className:"daily-onboarding-header",children:[s.jsx("p",{className:"eyebrow",children:"End-of-day note"}),s.jsx("h2",{children:"For you, from you."})]}),s.jsx("div",{className:"daily-note-body",children:s.jsx("p",{children:t})}),s.jsx("div",{className:"daily-onboarding-actions",children:s.jsx("button",{type:"button",className:"primary",onClick:n,children:"Got it"})})]})}):null}const oe=window.twsp,av=["dashboard","library","games","analytics","settings","friends","profile"],ov=e=>av.includes(e),cv=4,uv=17;function Ls(e){const t=new Date(e);t.getHours()<cv&&t.setDate(t.getDate()-1);const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${l}`}function dv(){const[e,t]=d.useState("dashboard"),[n,r]=d.useState({balance:0}),[l,i]=d.useState([]),[a,o]=d.useState(null),[c,m]=d.useState(()=>{try{return localStorage.getItem("tws-theme")==="olive"?"olive":"lavender"}catch{return"lavender"}}),[x,j]=d.useState({connected:!0,lastSeen:null}),[p,N]=d.useState(null),[g,w]=d.useState(null),[F,f]=d.useState(!1),[h,u]=d.useState(!1),[y,b]=d.useState(null),[C,v]=d.useState(2),[S,D]=d.useState(15),[L,W]=d.useState(120),[Y,$]=d.useState("balanced"),[H,Z]=d.useState(""),[Q,X]=d.useState(!1),[T,M]=d.useState(Date.now());d.useEffect(()=>{oe.wallet.get().then(r),oe.market.list().then(i),oe.economy.state().then(o)},[]),d.useEffect(()=>{const U=window.setInterval(()=>M(Date.now()),6e4);return()=>window.clearInterval(U)},[]),d.useEffect(()=>{let U=!0;return(async()=>{const ne=Ls(new Date),[se,pe,Le,$e,Ce]=await Promise.all([oe.settings.dailyOnboardingState(),oe.settings.productivityGoalHours(),oe.settings.idleThreshold(),oe.settings.continuityWindowSeconds(),oe.settings.emergencyPolicy()]);if(U&&(w(se),v(pe),D(Le),W($e),$(Ce),Z(se.note?.day===ne?se.note.message:""),se.completedDay!==ne&&se.lastPromptedDay!==ne)){const Ze=await oe.settings.updateDailyOnboardingState({lastPromptedDay:ne});if(!U)return;w(Ze),f(!0)}})().catch(()=>{}),()=>{U=!1}},[]),d.useEffect(()=>{if(!g?.note)return;const U=g.note,te=Ls(new Date(T));if(U.acknowledged||U.day&&U.day>te)return;const ne=new Date(T);if(!(U.day===te&&ne.getHours()<uv)&&!Q&&(X(!0),!U.deliveredAt)){const pe={...U,deliveredAt:new Date().toISOString()};oe.settings.updateDailyOnboardingState({note:pe}).then(w).catch(()=>{})}},[g,Q,T]),d.useEffect(()=>{const U=document.body;U.classList.remove("theme-olive"),c==="olive"&&U.classList.add("theme-olive");try{localStorage.setItem("tws-theme",c)}catch{}},[c]),d.useEffect(()=>{const U=oe.events.on("ui:navigate",te=>{const ne=te?.view;typeof ne=="string"&&ov(ne)&&t(ne)});return()=>{U()}},[]);const I=d.useRef(x);d.useEffect(()=>{I.current=x},[x]),d.useEffect(()=>{const U=oe.events.on("wallet:update",r),te=oe.events.on("economy:activity",o),ne=oe.events.on("market:update",()=>{oe.market.list().then(i)}),se=oe.events.on("paywall:required",Ce=>{if(I.current.connected&&["Google Chrome","Chrome","Brave Browser","Brave","Microsoft Edge","Edge","Arc","Firefox","Safari"].some(A=>Ce.appName.includes(A))){console.log("Ignoring desktop paywall for browser activity (extension active):",Ce);return}N({...Ce,reason:"blocked"})}),pe=oe.events.on("paywall:session-started",()=>{N(null)}),Le=oe.events.on("extension:status",Ce=>{j(Ce)}),$e=oe.events.on("paywall:session-ended",Ce=>{Ce.reason==="insufficient-funds"&&N({domain:Ce.domain,appName:"",reason:Ce.reason})});return()=>{U(),te(),ne(),se(),pe(),$e(),Le()}},[]);const O=async U=>{if(h)return;u(!0),b(null);const te=Ls(new Date);try{await oe.settings.updateProductivityGoalHours(U.goalHours),await oe.settings.updateIdleThreshold(U.idleThreshold),await oe.settings.updateContinuityWindowSeconds(U.continuityWindowSeconds),await oe.settings.updateEmergencyPolicy(U.emergencyPolicy),v(U.goalHours),D(U.idleThreshold),W(U.continuityWindowSeconds),$(U.emergencyPolicy);const ne=U.note.trim(),se={completedDay:te,lastPromptedDay:te,lastSkippedDay:null,note:ne?{day:te,message:ne,deliveredAt:null,acknowledged:!1}:null},pe=await oe.settings.updateDailyOnboardingState(se);w(pe),f(!1)}catch{b("Failed to save your settings. Try again.")}finally{u(!1)}},ee=async U=>{if(h)return;u(!0),b(null);const te=Ls(new Date);try{const ne=U.note.trim(),se={lastPromptedDay:te,lastSkippedDay:te,note:ne?{day:te,message:ne,deliveredAt:null,acknowledged:!1}:null},pe=await oe.settings.updateDailyOnboardingState(se);w(pe),f(!1)}catch{b("Failed to save your note. Try again.")}finally{u(!1)}},le=async()=>{if(!g?.note){X(!1);return}const U={...g.note,acknowledged:!0};try{const te=await oe.settings.updateDailyOnboardingState({note:U});w(te)}catch{}finally{X(!1)}};return s.jsxs("div",{className:"app-shell",children:[s.jsx(tv,{}),!x.connected&&s.jsxs("div",{className:"extension-banner",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Browser extension offline"}),s.jsx("span",{className:"subtle",children:" Install or enable the TimeWellSpent extension to enforce in-browser paywalls."})]}),s.jsx("button",{className:"primary",onClick:()=>window.open("https://chromewebstore.google.com","_blank","noopener"),children:"Get extension"})]}),s.jsxs("div",{className:"window-chrome",children:[s.jsxs("div",{className:"window-chrome-title","aria-hidden":!0,children:[s.jsx("div",{className:"title-dot"}),s.jsx("span",{children:"TimeWellSpent"})]}),s.jsx("div",{className:"window-chrome-meta",children:s.jsxs("span",{className:"pill ghost big",children:[n?.balance??0," f-coins"]})})]}),s.jsxs("aside",{className:"sidebar",children:[s.jsxs("div",{className:"brand",children:[s.jsx("div",{className:"logo",children:""}),s.jsx("span",{children:"TimeWellSpent"})]}),s.jsxs("nav",{className:"nav-menu",children:[s.jsx("button",{className:e==="dashboard"?"active":"",onClick:()=>t("dashboard"),children:"Dashboard"}),s.jsx("button",{className:e==="library"?"active":"",onClick:()=>t("library"),children:"Library"}),s.jsx("button",{className:e==="games"?"active":"",onClick:()=>t("games"),children:"Games"}),s.jsx("button",{className:e==="settings"?"active":"",onClick:()=>t("settings"),children:"Settings"}),s.jsx("button",{className:e==="analytics"?"active":"",onClick:()=>t("analytics"),children:"Analytics"}),s.jsx("button",{className:e==="friends"?"active":"",onClick:()=>t("friends"),children:"Friends"}),s.jsx("button",{className:e==="profile"?"active":"",onClick:()=>t("profile"),children:"Profile"})]}),s.jsxs("div",{className:"wallet-summary",children:[s.jsxs("div",{className:"balance",children:[s.jsx("span",{className:"coin",children:""}),s.jsx("span",{className:"amount",children:n?.balance??0})]}),s.jsx("div",{className:"rate",children:a?.activeCategory==="productive"?"+5/min":a?.activeCategory==="neutral"?"+3/min":"0/min"})]})]}),s.jsxs("main",{className:"content",children:[e==="dashboard"&&s.jsx(yp,{api:oe,wallet:n,economy:a,productivityGoalHoursOverride:C}),e==="analytics"&&s.jsx(Cp,{api:oe}),e==="settings"&&s.jsx(bp,{api:oe,theme:c,onThemeChange:U=>m(U)}),e==="library"&&s.jsx(zp,{api:oe}),e==="games"&&s.jsx(Yp,{wallet:n}),e==="friends"&&s.jsx(Up,{api:oe}),e==="profile"&&s.jsx(Kp,{api:oe})]}),s.jsx(lv,{open:F,dayKey:Ls(new Date),saving:h,error:y,initial:{goalHours:C,idleThreshold:S,continuityWindowSeconds:L,emergencyPolicy:Y,note:H},onSave:O,onSkip:ee}),s.jsx(iv,{open:Q,note:g?.note?.message??"",onClose:le}),p&&s.jsx(Pp,{open:!!p,state:{domain:p.domain||p.appName,mode:p.mode??"pack",reason:p.reason},wallet:n,api:oe,marketRates:l,onWallet:r,onClose:()=>N(null)})]})}Si.createRoot(document.getElementById("root")).render(s.jsx(Wh.StrictMode,{children:s.jsx(dv,{})}));
//# sourceMappingURL=index-Ci3YREFb.js.map
