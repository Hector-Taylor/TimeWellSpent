(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function xh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gc={exports:{}},wl={},Xc={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var or=Symbol.for("react.element"),jh=Symbol.for("react.portal"),wh=Symbol.for("react.fragment"),Nh=Symbol.for("react.strict_mode"),Sh=Symbol.for("react.profiler"),kh=Symbol.for("react.provider"),bh=Symbol.for("react.context"),Ch=Symbol.for("react.forward_ref"),Eh=Symbol.for("react.suspense"),Ph=Symbol.for("react.memo"),Mh=Symbol.for("react.lazy"),xo=Symbol.iterator;function Th(e){return e===null||typeof e!="object"?null:(e=xo&&e[xo]||e["@@iterator"],typeof e=="function"?e:null)}var Zc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jc=Object.assign,qc={};function ms(e,t,n){this.props=e,this.context=t,this.refs=qc,this.updater=n||Zc}ms.prototype.isReactComponent={};ms.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ms.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function eu(){}eu.prototype=ms.prototype;function da(e,t,n){this.props=e,this.context=t,this.refs=qc,this.updater=n||Zc}var ha=da.prototype=new eu;ha.constructor=da;Jc(ha,ms.prototype);ha.isPureReactComponent=!0;var jo=Array.isArray,tu=Object.prototype.hasOwnProperty,fa={current:null},nu={key:!0,ref:!0,__self:!0,__source:!0};function su(e,t,n){var r,l={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)tu.call(t,r)&&!nu.hasOwnProperty(r)&&(l[r]=t[r]);var o=arguments.length-2;if(o===1)l.children=n;else if(1<o){for(var c=Array(o),p=0;p<o;p++)c[p]=arguments[p+2];l.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)l[r]===void 0&&(l[r]=o[r]);return{$$typeof:or,type:e,key:i,ref:a,props:l,_owner:fa.current}}function Dh(e,t){return{$$typeof:or,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pa(e){return typeof e=="object"&&e!==null&&e.$$typeof===or}function Lh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wo=/\/+/g;function Hl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Lh(""+e.key):t.toString(36)}function zr(e,t,n,r,l){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case or:case jh:a=!0}}if(a)return a=e,l=l(a),e=r===""?"."+Hl(a,0):r,jo(l)?(n="",e!=null&&(n=e.replace(wo,"$&/")+"/"),zr(l,t,n,"",function(p){return p})):l!=null&&(pa(l)&&(l=Dh(l,n+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(wo,"$&/")+"/")+e)),t.push(l)),1;if(a=0,r=r===""?".":r+":",jo(e))for(var o=0;o<e.length;o++){i=e[o];var c=r+Hl(i,o);a+=zr(i,t,n,c,l)}else if(c=Th(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=r+Hl(i,o++),a+=zr(i,t,n,c,l);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function yr(e,t,n){if(e==null)return e;var r=[],l=0;return zr(e,r,"","",function(i){return t.call(n,i,l++)}),r}function _h(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nt={current:null},Or={transition:null},$h={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:Or,ReactCurrentOwner:fa};function ru(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:yr,forEach:function(e,t,n){yr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return yr(e,function(){t++}),t},toArray:function(e){return yr(e,function(t){return t})||[]},only:function(e){if(!pa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=ms;le.Fragment=wh;le.Profiler=Sh;le.PureComponent=da;le.StrictMode=Nh;le.Suspense=Eh;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$h;le.act=ru;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Jc({},e.props),l=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=fa.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)tu.call(t,c)&&!nu.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var p=0;p<c;p++)o[p]=arguments[p+2];r.children=o}return{$$typeof:or,type:e.type,key:l,ref:i,props:r,_owner:a}};le.createContext=function(e){return e={$$typeof:bh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kh,_context:e},e.Consumer=e};le.createElement=su;le.createFactory=function(e){var t=su.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:Ch,render:e}};le.isValidElement=pa;le.lazy=function(e){return{$$typeof:Mh,_payload:{_status:-1,_result:e},_init:_h}};le.memo=function(e,t){return{$$typeof:Ph,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=Or.transition;Or.transition={};try{e()}finally{Or.transition=t}};le.unstable_act=ru;le.useCallback=function(e,t){return nt.current.useCallback(e,t)};le.useContext=function(e){return nt.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return nt.current.useDeferredValue(e)};le.useEffect=function(e,t){return nt.current.useEffect(e,t)};le.useId=function(){return nt.current.useId()};le.useImperativeHandle=function(e,t,n){return nt.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return nt.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return nt.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return nt.current.useMemo(e,t)};le.useReducer=function(e,t,n){return nt.current.useReducer(e,t,n)};le.useRef=function(e){return nt.current.useRef(e)};le.useState=function(e){return nt.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return nt.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return nt.current.useTransition()};le.version="18.3.1";Xc.exports=le;var d=Xc.exports;const Rh=xh(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ih=d,Fh=Symbol.for("react.element"),Ah=Symbol.for("react.fragment"),zh=Object.prototype.hasOwnProperty,Oh=Ih.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hh={key:!0,ref:!0,__self:!0,__source:!0};function lu(e,t,n){var r,l={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)zh.call(t,r)&&!Hh.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Fh,type:e,key:i,ref:a,props:l,_owner:Oh.current}}wl.Fragment=Ah;wl.jsx=lu;wl.jsxs=lu;Gc.exports=wl;var s=Gc.exports,gi={},iu={exports:{}},pt={},au={exports:{}},ou={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,I){var H=b.length;b.push(I);e:for(;0<H;){var z=H-1>>>1,te=b[z];if(0<l(te,I))b[z]=I,b[H]=te,H=z;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var I=b[0],H=b.pop();if(H!==I){b[0]=H;e:for(var z=0,te=b.length,oe=te>>>1;z<oe;){var U=2*(z+1)-1,ne=b[U],se=U+1,re=b[se];if(0>l(ne,H))se<te&&0>l(re,ne)?(b[z]=re,b[se]=H,z=se):(b[z]=ne,b[U]=H,z=U);else if(se<te&&0>l(re,H))b[z]=re,b[se]=H,z=se;else break e}}return I}function l(b,I){var H=b.sortIndex-I.sortIndex;return H!==0?H:b.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],p=[],x=1,j=null,m=3,w=!1,g=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function u(b){for(var I=n(p);I!==null;){if(I.callback===null)r(p);else if(I.startTime<=b)r(p),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(p)}}function y(b){if(N=!1,u(b),!g)if(n(c)!==null)g=!0,K(S);else{var I=n(p);I!==null&&X(y,I.startTime-b)}}function S(b,I){g=!1,N&&(N=!1,f(C),C=-1),w=!0;var H=m;try{for(u(I),j=n(c);j!==null&&(!(j.expirationTime>I)||b&&!Y());){var z=j.callback;if(typeof z=="function"){j.callback=null,m=j.priorityLevel;var te=z(j.expirationTime<=I);I=e.unstable_now(),typeof te=="function"?j.callback=te:j===n(c)&&r(c),u(I)}else r(c);j=n(c)}if(j!==null)var oe=!0;else{var U=n(p);U!==null&&X(y,U.startTime-I),oe=!1}return oe}finally{j=null,m=H,w=!1}}var P=!1,v=null,C=-1,D=5,$=-1;function Y(){return!(e.unstable_now()-$<D)}function J(){if(v!==null){var b=e.unstable_now();$=b;var I=!0;try{I=v(!0,b)}finally{I?_():(P=!1,v=null)}}else P=!1}var _;if(typeof h=="function")_=function(){h(J)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Z=O.port2;O.port1.onmessage=J,_=function(){Z.postMessage(null)}}else _=function(){R(J,0)};function K(b){v=b,P||(P=!0,_())}function X(b,I){C=R(function(){b(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){g||w||(g=!0,K(S))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(b){switch(m){case 1:case 2:case 3:var I=3;break;default:I=m}var H=m;m=I;try{return b()}finally{m=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,I){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var H=m;m=b;try{return I()}finally{m=H}},e.unstable_scheduleCallback=function(b,I,H){var z=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?z+H:z):H=z,b){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=H+te,b={id:x++,callback:I,priorityLevel:b,startTime:H,expirationTime:te,sortIndex:-1},H>z?(b.sortIndex=H,t(p,b),n(c)===null&&b===n(p)&&(N?(f(C),C=-1):N=!0,X(y,H-z))):(b.sortIndex=te,t(c,b),g||w||(g=!0,K(S))),b},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(b){var I=m;return function(){var H=m;m=I;try{return b.apply(this,arguments)}finally{m=H}}}})(ou);au.exports=ou;var Bh=au.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh=d,ft=Bh;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cu=new Set,Vs={};function An(e,t){os(e,t),os(e+"Capture",t)}function os(e,t){for(Vs[e]=t,e=0;e<t.length;e++)cu.add(t[e])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yi=Object.prototype.hasOwnProperty,Wh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,No={},So={};function Vh(e){return yi.call(So,e)?!0:yi.call(No,e)?!1:Wh.test(e)?So[e]=!0:(No[e]=!0,!1)}function Qh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kh(e,t,n,r){if(t===null||typeof t>"u"||Qh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function st(e,t,n,r,l,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qe[e]=new st(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qe[t]=new st(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qe[e]=new st(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qe[e]=new st(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qe[e]=new st(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qe[e]=new st(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qe[e]=new st(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qe[e]=new st(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qe[e]=new st(e,5,!1,e.toLowerCase(),null,!1,!1)});var ma=/[\-:]([a-z])/g;function va(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ma,va);Qe[t]=new st(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ma,va);Qe[t]=new st(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ma,va);Qe[t]=new st(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qe[e]=new st(e,1,!1,e.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qe[e]=new st(e,1,!1,e.toLowerCase(),null,!0,!0)});function ga(e,t,n,r){var l=Qe.hasOwnProperty(t)?Qe[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kh(t,n,l,r)&&(n=null),r||l===null?Vh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zt=Uh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xr=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),Vn=Symbol.for("react.fragment"),ya=Symbol.for("react.strict_mode"),xi=Symbol.for("react.profiler"),uu=Symbol.for("react.provider"),du=Symbol.for("react.context"),xa=Symbol.for("react.forward_ref"),ji=Symbol.for("react.suspense"),wi=Symbol.for("react.suspense_list"),ja=Symbol.for("react.memo"),rn=Symbol.for("react.lazy"),hu=Symbol.for("react.offscreen"),ko=Symbol.iterator;function xs(e){return e===null||typeof e!="object"?null:(e=ko&&e[ko]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Bl;function Ls(e){if(Bl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bl=t&&t[1]||""}return`
`+Bl+e}var Ul=!1;function Wl(e,t){if(!e||Ul)return"";Ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var r=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){r=p}e.call(t.prototype)}else{try{throw Error()}catch(p){r=p}e()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var l=p.stack.split(`
`),i=r.stack.split(`
`),a=l.length-1,o=i.length-1;1<=a&&0<=o&&l[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(l[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||l[a]!==i[o]){var c=`
`+l[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{Ul=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ls(e):""}function Yh(e){switch(e.tag){case 5:return Ls(e.type);case 16:return Ls("Lazy");case 13:return Ls("Suspense");case 19:return Ls("SuspenseList");case 0:case 2:case 15:return e=Wl(e.type,!1),e;case 11:return e=Wl(e.type.render,!1),e;case 1:return e=Wl(e.type,!0),e;default:return""}}function Ni(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vn:return"Fragment";case Wn:return"Portal";case xi:return"Profiler";case ya:return"StrictMode";case ji:return"Suspense";case wi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case du:return(e.displayName||"Context")+".Consumer";case uu:return(e._context.displayName||"Context")+".Provider";case xa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ja:return t=e.displayName||null,t!==null?t:Ni(e.type)||"Memo";case rn:t=e._payload,e=e._init;try{return Ni(e(t))}catch{}}return null}function Gh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ni(t);case 8:return t===ya?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xh(e){var t=fu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jr(e){e._valueTracker||(e._valueTracker=Xh(e))}function pu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=fu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Zr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Si(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function bo(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mu(e,t){t=t.checked,t!=null&&ga(e,"checked",t,!1)}function ki(e,t){mu(e,t);var n=xn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bi(e,t.type,n):t.hasOwnProperty("defaultValue")&&bi(e,t.type,xn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Co(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function bi(e,t,n){(t!=="number"||Zr(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _s=Array.isArray;function ns(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Ci(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Eo(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(_s(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xn(n)}}function vu(e,t){var n=xn(t.value),r=xn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Po(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ei(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wr,yu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wr=wr||document.createElement("div"),wr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zh=["Webkit","ms","Moz","O"];Object.keys(Is).forEach(function(e){Zh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Is[t]=Is[e]})});function xu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Is.hasOwnProperty(e)&&Is[e]?(""+t).trim():t+"px"}function ju(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=xu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Jh=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pi(e,t){if(t){if(Jh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function Mi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ti=null;function wa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Di=null,ss=null,rs=null;function Mo(e){if(e=dr(e)){if(typeof Di!="function")throw Error(L(280));var t=e.stateNode;t&&(t=Cl(t),Di(e.stateNode,e.type,t))}}function wu(e){ss?rs?rs.push(e):rs=[e]:ss=e}function Nu(){if(ss){var e=ss,t=rs;if(rs=ss=null,Mo(e),t)for(e=0;e<t.length;e++)Mo(t[e])}}function Su(e,t){return e(t)}function ku(){}var Vl=!1;function bu(e,t,n){if(Vl)return e(t,n);Vl=!0;try{return Su(e,t,n)}finally{Vl=!1,(ss!==null||rs!==null)&&(ku(),Nu())}}function Ks(e,t){var n=e.stateNode;if(n===null)return null;var r=Cl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var Li=!1;if(Kt)try{var js={};Object.defineProperty(js,"passive",{get:function(){Li=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Li=!1}function qh(e,t,n,r,l,i,a,o,c){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(x){this.onError(x)}}var Fs=!1,Jr=null,qr=!1,_i=null,ef={onError:function(e){Fs=!0,Jr=e}};function tf(e,t,n,r,l,i,a,o,c){Fs=!1,Jr=null,qh.apply(ef,arguments)}function nf(e,t,n,r,l,i,a,o,c){if(tf.apply(this,arguments),Fs){if(Fs){var p=Jr;Fs=!1,Jr=null}else throw Error(L(198));qr||(qr=!0,_i=p)}}function zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Cu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function To(e){if(zn(e)!==e)throw Error(L(188))}function sf(e){var t=e.alternate;if(!t){if(t=zn(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var i=l.alternate;if(i===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===n)return To(l),e;if(i===r)return To(l),t;i=i.sibling}throw Error(L(188))}if(n.return!==r.return)n=l,r=i;else{for(var a=!1,o=l.child;o;){if(o===n){a=!0,n=l,r=i;break}if(o===r){a=!0,r=l,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=l;break}if(o===r){a=!0,r=i,n=l;break}o=o.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function Eu(e){return e=sf(e),e!==null?Pu(e):null}function Pu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Pu(e);if(t!==null)return t;e=e.sibling}return null}var Mu=ft.unstable_scheduleCallback,Do=ft.unstable_cancelCallback,rf=ft.unstable_shouldYield,lf=ft.unstable_requestPaint,Fe=ft.unstable_now,af=ft.unstable_getCurrentPriorityLevel,Na=ft.unstable_ImmediatePriority,Tu=ft.unstable_UserBlockingPriority,el=ft.unstable_NormalPriority,of=ft.unstable_LowPriority,Du=ft.unstable_IdlePriority,Nl=null,At=null;function cf(e){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Nl,e,void 0,(e.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:hf,uf=Math.log,df=Math.LN2;function hf(e){return e>>>=0,e===0?32:31-(uf(e)/df|0)|0}var Nr=64,Sr=4194304;function $s(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~l;o!==0?r=$s(o):(i&=a,i!==0&&(r=$s(i)))}else a=n&~l,a!==0?r=$s(a):i!==0&&(r=$s(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,i=t&-t,l>=i||l===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tt(t),l=1<<n,r|=e[n],t&=~l;return r}function ff(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Tt(i),o=1<<a,c=l[a];c===-1?(!(o&n)||o&r)&&(l[a]=ff(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function $i(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lu(){var e=Nr;return Nr<<=1,!(Nr&4194240)&&(Nr=64),e}function Ql(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function cr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tt(t),e[t]=n}function mf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Tt(n),i=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~i}}function Sa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tt(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var pe=0;function _u(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $u,ka,Ru,Iu,Fu,Ri=!1,kr=[],dn=null,hn=null,fn=null,Ys=new Map,Gs=new Map,an=[],vf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lo(e,t){switch(e){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":Ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(t.pointerId)}}function ws(e,t,n,r,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[l]},t!==null&&(t=dr(t),t!==null&&ka(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function gf(e,t,n,r,l){switch(t){case"focusin":return dn=ws(dn,e,t,n,r,l),!0;case"dragenter":return hn=ws(hn,e,t,n,r,l),!0;case"mouseover":return fn=ws(fn,e,t,n,r,l),!0;case"pointerover":var i=l.pointerId;return Ys.set(i,ws(Ys.get(i)||null,e,t,n,r,l)),!0;case"gotpointercapture":return i=l.pointerId,Gs.set(i,ws(Gs.get(i)||null,e,t,n,r,l)),!0}return!1}function Au(e){var t=Pn(e.target);if(t!==null){var n=zn(t);if(n!==null){if(t=n.tag,t===13){if(t=Cu(n),t!==null){e.blockedOn=t,Fu(e.priority,function(){Ru(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ii(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ti=r,n.target.dispatchEvent(r),Ti=null}else return t=dr(n),t!==null&&ka(t),e.blockedOn=n,!1;t.shift()}return!0}function _o(e,t,n){Hr(e)&&n.delete(t)}function yf(){Ri=!1,dn!==null&&Hr(dn)&&(dn=null),hn!==null&&Hr(hn)&&(hn=null),fn!==null&&Hr(fn)&&(fn=null),Ys.forEach(_o),Gs.forEach(_o)}function Ns(e,t){e.blockedOn===t&&(e.blockedOn=null,Ri||(Ri=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,yf)))}function Xs(e){function t(l){return Ns(l,e)}if(0<kr.length){Ns(kr[0],e);for(var n=1;n<kr.length;n++){var r=kr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(dn!==null&&Ns(dn,e),hn!==null&&Ns(hn,e),fn!==null&&Ns(fn,e),Ys.forEach(t),Gs.forEach(t),n=0;n<an.length;n++)r=an[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<an.length&&(n=an[0],n.blockedOn===null);)Au(n),n.blockedOn===null&&an.shift()}var ls=Zt.ReactCurrentBatchConfig,nl=!0;function xf(e,t,n,r){var l=pe,i=ls.transition;ls.transition=null;try{pe=1,ba(e,t,n,r)}finally{pe=l,ls.transition=i}}function jf(e,t,n,r){var l=pe,i=ls.transition;ls.transition=null;try{pe=4,ba(e,t,n,r)}finally{pe=l,ls.transition=i}}function ba(e,t,n,r){if(nl){var l=Ii(e,t,n,r);if(l===null)ni(e,t,r,sl,n),Lo(e,r);else if(gf(l,e,t,n,r))r.stopPropagation();else if(Lo(e,r),t&4&&-1<vf.indexOf(e)){for(;l!==null;){var i=dr(l);if(i!==null&&$u(i),i=Ii(e,t,n,r),i===null&&ni(e,t,r,sl,n),i===l)break;l=i}l!==null&&r.stopPropagation()}else ni(e,t,r,null,n)}}var sl=null;function Ii(e,t,n,r){if(sl=null,e=wa(r),e=Pn(e),e!==null)if(t=zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Cu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sl=e,null}function zu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(af()){case Na:return 1;case Tu:return 4;case el:case of:return 16;case Du:return 536870912;default:return 16}default:return 16}}var cn=null,Ca=null,Br=null;function Ou(){if(Br)return Br;var e,t=Ca,n=t.length,r,l="value"in cn?cn.value:cn.textContent,i=l.length;for(e=0;e<n&&t[e]===l[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===l[i-r];r++);return Br=l.slice(e,1<r?1-r:void 0)}function Ur(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function br(){return!0}function $o(){return!1}function mt(e){function t(n,r,l,i,a){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?br:$o,this.isPropagationStopped=$o,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),t}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ea=mt(vs),ur=Le({},vs,{view:0,detail:0}),wf=mt(ur),Kl,Yl,Ss,Sl=Le({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ss&&(Ss&&e.type==="mousemove"?(Kl=e.screenX-Ss.screenX,Yl=e.screenY-Ss.screenY):Yl=Kl=0,Ss=e),Kl)},movementY:function(e){return"movementY"in e?e.movementY:Yl}}),Ro=mt(Sl),Nf=Le({},Sl,{dataTransfer:0}),Sf=mt(Nf),kf=Le({},ur,{relatedTarget:0}),Gl=mt(kf),bf=Le({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),Cf=mt(bf),Ef=Le({},vs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pf=mt(Ef),Mf=Le({},vs,{data:0}),Io=mt(Mf),Tf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Df={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _f(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lf[e])?!!t[e]:!1}function Pa(){return _f}var $f=Le({},ur,{key:function(e){if(e.key){var t=Tf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ur(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Df[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pa,charCode:function(e){return e.type==="keypress"?Ur(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ur(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rf=mt($f),If=Le({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fo=mt(If),Ff=Le({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pa}),Af=mt(Ff),zf=Le({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Of=mt(zf),Hf=Le({},Sl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bf=mt(Hf),Uf=[9,13,27,32],Ma=Kt&&"CompositionEvent"in window,As=null;Kt&&"documentMode"in document&&(As=document.documentMode);var Wf=Kt&&"TextEvent"in window&&!As,Hu=Kt&&(!Ma||As&&8<As&&11>=As),Ao=" ",zo=!1;function Bu(e,t){switch(e){case"keyup":return Uf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qn=!1;function Vf(e,t){switch(e){case"compositionend":return Uu(t);case"keypress":return t.which!==32?null:(zo=!0,Ao);case"textInput":return e=t.data,e===Ao&&zo?null:e;default:return null}}function Qf(e,t){if(Qn)return e==="compositionend"||!Ma&&Bu(e,t)?(e=Ou(),Br=Ca=cn=null,Qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hu&&t.locale!=="ko"?null:t.data;default:return null}}var Kf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kf[e.type]:t==="textarea"}function Wu(e,t,n,r){wu(r),t=rl(t,"onChange"),0<t.length&&(n=new Ea("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zs=null,Zs=null;function Yf(e){td(e,0)}function kl(e){var t=Gn(e);if(pu(t))return e}function Gf(e,t){if(e==="change")return t}var Vu=!1;if(Kt){var Xl;if(Kt){var Zl="oninput"in document;if(!Zl){var Ho=document.createElement("div");Ho.setAttribute("oninput","return;"),Zl=typeof Ho.oninput=="function"}Xl=Zl}else Xl=!1;Vu=Xl&&(!document.documentMode||9<document.documentMode)}function Bo(){zs&&(zs.detachEvent("onpropertychange",Qu),Zs=zs=null)}function Qu(e){if(e.propertyName==="value"&&kl(Zs)){var t=[];Wu(t,Zs,e,wa(e)),bu(Yf,t)}}function Xf(e,t,n){e==="focusin"?(Bo(),zs=t,Zs=n,zs.attachEvent("onpropertychange",Qu)):e==="focusout"&&Bo()}function Zf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kl(Zs)}function Jf(e,t){if(e==="click")return kl(t)}function qf(e,t){if(e==="input"||e==="change")return kl(t)}function ep(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:ep;function Js(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!yi.call(t,l)||!Lt(e[l],t[l]))return!1}return!0}function Uo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wo(e,t){var n=Uo(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uo(n)}}function Ku(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ku(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yu(){for(var e=window,t=Zr();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Zr(e.document)}return t}function Ta(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tp(e){var t=Yu(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ku(n.ownerDocument.documentElement,n)){if(r!==null&&Ta(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,i=Math.min(r.start,l);r=r.end===void 0?i:Math.min(r.end,l),!e.extend&&i>r&&(l=r,r=i,i=l),l=Wo(n,i);var a=Wo(n,r);l&&a&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var np=Kt&&"documentMode"in document&&11>=document.documentMode,Kn=null,Fi=null,Os=null,Ai=!1;function Vo(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ai||Kn==null||Kn!==Zr(r)||(r=Kn,"selectionStart"in r&&Ta(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Os&&Js(Os,r)||(Os=r,r=rl(Fi,"onSelect"),0<r.length&&(t=new Ea("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Kn)))}function Cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yn={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionend:Cr("Transition","TransitionEnd")},Jl={},Gu={};Kt&&(Gu=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function bl(e){if(Jl[e])return Jl[e];if(!Yn[e])return e;var t=Yn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gu)return Jl[e]=t[n];return e}var Xu=bl("animationend"),Zu=bl("animationiteration"),Ju=bl("animationstart"),qu=bl("transitionend"),ed=new Map,Qo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(e,t){ed.set(e,t),An(t,[e])}for(var ql=0;ql<Qo.length;ql++){var ei=Qo[ql],sp=ei.toLowerCase(),rp=ei[0].toUpperCase()+ei.slice(1);wn(sp,"on"+rp)}wn(Xu,"onAnimationEnd");wn(Zu,"onAnimationIteration");wn(Ju,"onAnimationStart");wn("dblclick","onDoubleClick");wn("focusin","onFocus");wn("focusout","onBlur");wn(qu,"onTransitionEnd");os("onMouseEnter",["mouseout","mouseover"]);os("onMouseLeave",["mouseout","mouseover"]);os("onPointerEnter",["pointerout","pointerover"]);os("onPointerLeave",["pointerout","pointerover"]);An("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));An("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));An("onBeforeInput",["compositionend","keypress","textInput","paste"]);An("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));An("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));An("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function Ko(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,nf(r,t,void 0,e),e.currentTarget=null}function td(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,p=o.currentTarget;if(o=o.listener,c!==i&&l.isPropagationStopped())break e;Ko(l,o,p),i=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,p=o.currentTarget,o=o.listener,c!==i&&l.isPropagationStopped())break e;Ko(l,o,p),i=c}}}if(qr)throw e=_i,qr=!1,_i=null,e}function ke(e,t){var n=t[Ui];n===void 0&&(n=t[Ui]=new Set);var r=e+"__bubble";n.has(r)||(nd(t,e,2,!1),n.add(r))}function ti(e,t,n){var r=0;t&&(r|=4),nd(n,e,r,t)}var Er="_reactListening"+Math.random().toString(36).slice(2);function qs(e){if(!e[Er]){e[Er]=!0,cu.forEach(function(n){n!=="selectionchange"&&(lp.has(n)||ti(n,!1,e),ti(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Er]||(t[Er]=!0,ti("selectionchange",!1,t))}}function nd(e,t,n,r){switch(zu(t)){case 1:var l=xf;break;case 4:l=jf;break;default:l=ba}n=l.bind(null,t,n,e),l=void 0,!Li||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function ni(e,t,n,r,l){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===l||o.nodeType===8&&o.parentNode===l)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===l||c.nodeType===8&&c.parentNode===l))return;a=a.return}for(;o!==null;){if(a=Pn(o),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}o=o.parentNode}}r=r.return}bu(function(){var p=i,x=wa(n),j=[];e:{var m=ed.get(e);if(m!==void 0){var w=Ea,g=e;switch(e){case"keypress":if(Ur(n)===0)break e;case"keydown":case"keyup":w=Rf;break;case"focusin":g="focus",w=Gl;break;case"focusout":g="blur",w=Gl;break;case"beforeblur":case"afterblur":w=Gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Ro;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Af;break;case Xu:case Zu:case Ju:w=Cf;break;case qu:w=Of;break;case"scroll":w=wf;break;case"wheel":w=Bf;break;case"copy":case"cut":case"paste":w=Pf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Fo}var N=(t&4)!==0,R=!N&&e==="scroll",f=N?m!==null?m+"Capture":null:m;N=[];for(var h=p,u;h!==null;){u=h;var y=u.stateNode;if(u.tag===5&&y!==null&&(u=y,f!==null&&(y=Ks(h,f),y!=null&&N.push(er(h,y,u)))),R)break;h=h.return}0<N.length&&(m=new w(m,g,null,n,x),j.push({event:m,listeners:N}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",m&&n!==Ti&&(g=n.relatedTarget||n.fromElement)&&(Pn(g)||g[Yt]))break e;if((w||m)&&(m=x.window===x?x:(m=x.ownerDocument)?m.defaultView||m.parentWindow:window,w?(g=n.relatedTarget||n.toElement,w=p,g=g?Pn(g):null,g!==null&&(R=zn(g),g!==R||g.tag!==5&&g.tag!==6)&&(g=null)):(w=null,g=p),w!==g)){if(N=Ro,y="onMouseLeave",f="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(N=Fo,y="onPointerLeave",f="onPointerEnter",h="pointer"),R=w==null?m:Gn(w),u=g==null?m:Gn(g),m=new N(y,h+"leave",w,n,x),m.target=R,m.relatedTarget=u,y=null,Pn(x)===p&&(N=new N(f,h+"enter",g,n,x),N.target=u,N.relatedTarget=R,y=N),R=y,w&&g)t:{for(N=w,f=g,h=0,u=N;u;u=On(u))h++;for(u=0,y=f;y;y=On(y))u++;for(;0<h-u;)N=On(N),h--;for(;0<u-h;)f=On(f),u--;for(;h--;){if(N===f||f!==null&&N===f.alternate)break t;N=On(N),f=On(f)}N=null}else N=null;w!==null&&Yo(j,m,w,N,!1),g!==null&&R!==null&&Yo(j,R,g,N,!0)}}e:{if(m=p?Gn(p):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var S=Gf;else if(Oo(m))if(Vu)S=qf;else{S=Zf;var P=Xf}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=Jf);if(S&&(S=S(e,p))){Wu(j,S,n,x);break e}P&&P(e,m,p),e==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&bi(m,"number",m.value)}switch(P=p?Gn(p):window,e){case"focusin":(Oo(P)||P.contentEditable==="true")&&(Kn=P,Fi=p,Os=null);break;case"focusout":Os=Fi=Kn=null;break;case"mousedown":Ai=!0;break;case"contextmenu":case"mouseup":case"dragend":Ai=!1,Vo(j,n,x);break;case"selectionchange":if(np)break;case"keydown":case"keyup":Vo(j,n,x)}var v;if(Ma)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Qn?Bu(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Hu&&n.locale!=="ko"&&(Qn||C!=="onCompositionStart"?C==="onCompositionEnd"&&Qn&&(v=Ou()):(cn=x,Ca="value"in cn?cn.value:cn.textContent,Qn=!0)),P=rl(p,C),0<P.length&&(C=new Io(C,e,null,n,x),j.push({event:C,listeners:P}),v?C.data=v:(v=Uu(n),v!==null&&(C.data=v)))),(v=Wf?Vf(e,n):Qf(e,n))&&(p=rl(p,"onBeforeInput"),0<p.length&&(x=new Io("onBeforeInput","beforeinput",null,n,x),j.push({event:x,listeners:p}),x.data=v))}td(j,t)})}function er(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rl(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=Ks(e,n),i!=null&&r.unshift(er(e,i,l)),i=Ks(e,t),i!=null&&r.push(er(e,i,l))),e=e.return}return r}function On(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yo(e,t,n,r,l){for(var i=t._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,p=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&p!==null&&(o=p,l?(c=Ks(n,i),c!=null&&a.unshift(er(n,c,o))):l||(c=Ks(n,i),c!=null&&a.push(er(n,c,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ip=/\r\n?/g,ap=/\u0000|\uFFFD/g;function Go(e){return(typeof e=="string"?e:""+e).replace(ip,`
`).replace(ap,"")}function Pr(e,t,n){if(t=Go(t),Go(e)!==t&&n)throw Error(L(425))}function ll(){}var zi=null,Oi=null;function Hi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bi=typeof setTimeout=="function"?setTimeout:void 0,op=typeof clearTimeout=="function"?clearTimeout:void 0,Xo=typeof Promise=="function"?Promise:void 0,cp=typeof queueMicrotask=="function"?queueMicrotask:typeof Xo<"u"?function(e){return Xo.resolve(null).then(e).catch(up)}:Bi;function up(e){setTimeout(function(){throw e})}function si(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),Xs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);Xs(t)}function pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Zo(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gs=Math.random().toString(36).slice(2),Ft="__reactFiber$"+gs,tr="__reactProps$"+gs,Yt="__reactContainer$"+gs,Ui="__reactEvents$"+gs,dp="__reactListeners$"+gs,hp="__reactHandles$"+gs;function Pn(e){var t=e[Ft];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yt]||n[Ft]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Zo(e);e!==null;){if(n=e[Ft])return n;e=Zo(e)}return t}e=n,n=e.parentNode}return null}function dr(e){return e=e[Ft]||e[Yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function Cl(e){return e[tr]||null}var Wi=[],Xn=-1;function Nn(e){return{current:e}}function be(e){0>Xn||(e.current=Wi[Xn],Wi[Xn]=null,Xn--)}function we(e,t){Xn++,Wi[Xn]=e.current,e.current=t}var jn={},Ze=Nn(jn),it=Nn(!1),_n=jn;function cs(e,t){var n=e.type.contextTypes;if(!n)return jn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in n)l[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function at(e){return e=e.childContextTypes,e!=null}function il(){be(it),be(Ze)}function Jo(e,t,n){if(Ze.current!==jn)throw Error(L(168));we(Ze,t),we(it,n)}function sd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(L(108,Gh(e)||"Unknown",l));return Le({},n,r)}function al(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jn,_n=Ze.current,we(Ze,e),we(it,it.current),!0}function qo(e,t,n){var r=e.stateNode;if(!r)throw Error(L(169));n?(e=sd(e,t,_n),r.__reactInternalMemoizedMergedChildContext=e,be(it),be(Ze),we(Ze,e)):be(it),we(it,n)}var Ut=null,El=!1,ri=!1;function rd(e){Ut===null?Ut=[e]:Ut.push(e)}function fp(e){El=!0,rd(e)}function Sn(){if(!ri&&Ut!==null){ri=!0;var e=0,t=pe;try{var n=Ut;for(pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ut=null,El=!1}catch(l){throw Ut!==null&&(Ut=Ut.slice(e+1)),Mu(Na,Sn),l}finally{pe=t,ri=!1}}return null}var Zn=[],Jn=0,ol=null,cl=0,xt=[],jt=0,$n=null,Wt=1,Vt="";function Cn(e,t){Zn[Jn++]=cl,Zn[Jn++]=ol,ol=e,cl=t}function ld(e,t,n){xt[jt++]=Wt,xt[jt++]=Vt,xt[jt++]=$n,$n=e;var r=Wt;e=Vt;var l=32-Tt(r)-1;r&=~(1<<l),n+=1;var i=32-Tt(t)+l;if(30<i){var a=l-l%5;i=(r&(1<<a)-1).toString(32),r>>=a,l-=a,Wt=1<<32-Tt(t)+l|n<<l|r,Vt=i+e}else Wt=1<<i|n<<l|r,Vt=e}function Da(e){e.return!==null&&(Cn(e,1),ld(e,1,0))}function La(e){for(;e===ol;)ol=Zn[--Jn],Zn[Jn]=null,cl=Zn[--Jn],Zn[Jn]=null;for(;e===$n;)$n=xt[--jt],xt[jt]=null,Vt=xt[--jt],xt[jt]=null,Wt=xt[--jt],xt[jt]=null}var ht=null,dt=null,Pe=!1,Mt=null;function id(e,t){var n=wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ec(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,dt=pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=$n!==null?{id:Wt,overflow:Vt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ht=e,dt=null,!0):!1;default:return!1}}function Vi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qi(e){if(Pe){var t=dt;if(t){var n=t;if(!ec(e,t)){if(Vi(e))throw Error(L(418));t=pn(n.nextSibling);var r=ht;t&&ec(e,t)?id(r,n):(e.flags=e.flags&-4097|2,Pe=!1,ht=e)}}else{if(Vi(e))throw Error(L(418));e.flags=e.flags&-4097|2,Pe=!1,ht=e}}}function tc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function Mr(e){if(e!==ht)return!1;if(!Pe)return tc(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hi(e.type,e.memoizedProps)),t&&(t=dt)){if(Vi(e))throw ad(),Error(L(418));for(;t;)id(e,t),t=pn(t.nextSibling)}if(tc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){dt=pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}dt=null}}else dt=ht?pn(e.stateNode.nextSibling):null;return!0}function ad(){for(var e=dt;e;)e=pn(e.nextSibling)}function us(){dt=ht=null,Pe=!1}function _a(e){Mt===null?Mt=[e]:Mt.push(e)}var pp=Zt.ReactCurrentBatchConfig;function ks(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,e));var l=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var o=l.refs;a===null?delete o[i]:o[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function Tr(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nc(e){var t=e._init;return t(e._payload)}function od(e){function t(f,h){if(e){var u=f.deletions;u===null?(f.deletions=[h],f.flags|=16):u.push(h)}}function n(f,h){if(!e)return null;for(;h!==null;)t(f,h),h=h.sibling;return null}function r(f,h){for(f=new Map;h!==null;)h.key!==null?f.set(h.key,h):f.set(h.index,h),h=h.sibling;return f}function l(f,h){return f=yn(f,h),f.index=0,f.sibling=null,f}function i(f,h,u){return f.index=u,e?(u=f.alternate,u!==null?(u=u.index,u<h?(f.flags|=2,h):u):(f.flags|=2,h)):(f.flags|=1048576,h)}function a(f){return e&&f.alternate===null&&(f.flags|=2),f}function o(f,h,u,y){return h===null||h.tag!==6?(h=di(u,f.mode,y),h.return=f,h):(h=l(h,u),h.return=f,h)}function c(f,h,u,y){var S=u.type;return S===Vn?x(f,h,u.props.children,y,u.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===rn&&nc(S)===h.type)?(y=l(h,u.props),y.ref=ks(f,h,u),y.return=f,y):(y=Xr(u.type,u.key,u.props,null,f.mode,y),y.ref=ks(f,h,u),y.return=f,y)}function p(f,h,u,y){return h===null||h.tag!==4||h.stateNode.containerInfo!==u.containerInfo||h.stateNode.implementation!==u.implementation?(h=hi(u,f.mode,y),h.return=f,h):(h=l(h,u.children||[]),h.return=f,h)}function x(f,h,u,y,S){return h===null||h.tag!==7?(h=Ln(u,f.mode,y,S),h.return=f,h):(h=l(h,u),h.return=f,h)}function j(f,h,u){if(typeof h=="string"&&h!==""||typeof h=="number")return h=di(""+h,f.mode,u),h.return=f,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case xr:return u=Xr(h.type,h.key,h.props,null,f.mode,u),u.ref=ks(f,null,h),u.return=f,u;case Wn:return h=hi(h,f.mode,u),h.return=f,h;case rn:var y=h._init;return j(f,y(h._payload),u)}if(_s(h)||xs(h))return h=Ln(h,f.mode,u,null),h.return=f,h;Tr(f,h)}return null}function m(f,h,u,y){var S=h!==null?h.key:null;if(typeof u=="string"&&u!==""||typeof u=="number")return S!==null?null:o(f,h,""+u,y);if(typeof u=="object"&&u!==null){switch(u.$$typeof){case xr:return u.key===S?c(f,h,u,y):null;case Wn:return u.key===S?p(f,h,u,y):null;case rn:return S=u._init,m(f,h,S(u._payload),y)}if(_s(u)||xs(u))return S!==null?null:x(f,h,u,y,null);Tr(f,u)}return null}function w(f,h,u,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return f=f.get(u)||null,o(h,f,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case xr:return f=f.get(y.key===null?u:y.key)||null,c(h,f,y,S);case Wn:return f=f.get(y.key===null?u:y.key)||null,p(h,f,y,S);case rn:var P=y._init;return w(f,h,u,P(y._payload),S)}if(_s(y)||xs(y))return f=f.get(u)||null,x(h,f,y,S,null);Tr(h,y)}return null}function g(f,h,u,y){for(var S=null,P=null,v=h,C=h=0,D=null;v!==null&&C<u.length;C++){v.index>C?(D=v,v=null):D=v.sibling;var $=m(f,v,u[C],y);if($===null){v===null&&(v=D);break}e&&v&&$.alternate===null&&t(f,v),h=i($,h,C),P===null?S=$:P.sibling=$,P=$,v=D}if(C===u.length)return n(f,v),Pe&&Cn(f,C),S;if(v===null){for(;C<u.length;C++)v=j(f,u[C],y),v!==null&&(h=i(v,h,C),P===null?S=v:P.sibling=v,P=v);return Pe&&Cn(f,C),S}for(v=r(f,v);C<u.length;C++)D=w(v,f,C,u[C],y),D!==null&&(e&&D.alternate!==null&&v.delete(D.key===null?C:D.key),h=i(D,h,C),P===null?S=D:P.sibling=D,P=D);return e&&v.forEach(function(Y){return t(f,Y)}),Pe&&Cn(f,C),S}function N(f,h,u,y){var S=xs(u);if(typeof S!="function")throw Error(L(150));if(u=S.call(u),u==null)throw Error(L(151));for(var P=S=null,v=h,C=h=0,D=null,$=u.next();v!==null&&!$.done;C++,$=u.next()){v.index>C?(D=v,v=null):D=v.sibling;var Y=m(f,v,$.value,y);if(Y===null){v===null&&(v=D);break}e&&v&&Y.alternate===null&&t(f,v),h=i(Y,h,C),P===null?S=Y:P.sibling=Y,P=Y,v=D}if($.done)return n(f,v),Pe&&Cn(f,C),S;if(v===null){for(;!$.done;C++,$=u.next())$=j(f,$.value,y),$!==null&&(h=i($,h,C),P===null?S=$:P.sibling=$,P=$);return Pe&&Cn(f,C),S}for(v=r(f,v);!$.done;C++,$=u.next())$=w(v,f,C,$.value,y),$!==null&&(e&&$.alternate!==null&&v.delete($.key===null?C:$.key),h=i($,h,C),P===null?S=$:P.sibling=$,P=$);return e&&v.forEach(function(J){return t(f,J)}),Pe&&Cn(f,C),S}function R(f,h,u,y){if(typeof u=="object"&&u!==null&&u.type===Vn&&u.key===null&&(u=u.props.children),typeof u=="object"&&u!==null){switch(u.$$typeof){case xr:e:{for(var S=u.key,P=h;P!==null;){if(P.key===S){if(S=u.type,S===Vn){if(P.tag===7){n(f,P.sibling),h=l(P,u.props.children),h.return=f,f=h;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===rn&&nc(S)===P.type){n(f,P.sibling),h=l(P,u.props),h.ref=ks(f,P,u),h.return=f,f=h;break e}n(f,P);break}else t(f,P);P=P.sibling}u.type===Vn?(h=Ln(u.props.children,f.mode,y,u.key),h.return=f,f=h):(y=Xr(u.type,u.key,u.props,null,f.mode,y),y.ref=ks(f,h,u),y.return=f,f=y)}return a(f);case Wn:e:{for(P=u.key;h!==null;){if(h.key===P)if(h.tag===4&&h.stateNode.containerInfo===u.containerInfo&&h.stateNode.implementation===u.implementation){n(f,h.sibling),h=l(h,u.children||[]),h.return=f,f=h;break e}else{n(f,h);break}else t(f,h);h=h.sibling}h=hi(u,f.mode,y),h.return=f,f=h}return a(f);case rn:return P=u._init,R(f,h,P(u._payload),y)}if(_s(u))return g(f,h,u,y);if(xs(u))return N(f,h,u,y);Tr(f,u)}return typeof u=="string"&&u!==""||typeof u=="number"?(u=""+u,h!==null&&h.tag===6?(n(f,h.sibling),h=l(h,u),h.return=f,f=h):(n(f,h),h=di(u,f.mode,y),h.return=f,f=h),a(f)):n(f,h)}return R}var ds=od(!0),cd=od(!1),ul=Nn(null),dl=null,qn=null,$a=null;function Ra(){$a=qn=dl=null}function Ia(e){var t=ul.current;be(ul),e._currentValue=t}function Ki(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function is(e,t){dl=e,$a=qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if($a!==e)if(e={context:e,memoizedValue:t,next:null},qn===null){if(dl===null)throw Error(L(308));qn=e,dl.dependencies={lanes:0,firstContext:e}}else qn=qn.next=e;return t}var Mn=null;function Fa(e){Mn===null?Mn=[e]:Mn.push(e)}function ud(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,Fa(t)):(n.next=l.next,l.next=n),t.interleaved=n,Gt(e,r)}function Gt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ln=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Gt(e,n)}return l=r.interleaved,l===null?(t.next=t,Fa(r)):(t.next=l.next,l.next=t),r.interleaved=t,Gt(e,n)}function Wr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sa(e,n)}}function sc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?l=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?l=i=t:i=i.next=t}else l=i=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hl(e,t,n,r){var l=e.updateQueue;ln=!1;var i=l.firstBaseUpdate,a=l.lastBaseUpdate,o=l.shared.pending;if(o!==null){l.shared.pending=null;var c=o,p=c.next;c.next=null,a===null?i=p:a.next=p,a=c;var x=e.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==a&&(o===null?x.firstBaseUpdate=p:o.next=p,x.lastBaseUpdate=c))}if(i!==null){var j=l.baseState;a=0,x=p=c=null,o=i;do{var m=o.lane,w=o.eventTime;if((r&m)===m){x!==null&&(x=x.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,N=o;switch(m=t,w=n,N.tag){case 1:if(g=N.payload,typeof g=="function"){j=g.call(w,j,m);break e}j=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=N.payload,m=typeof g=="function"?g.call(w,j,m):g,m==null)break e;j=Le({},j,m);break e;case 2:ln=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=l.effects,m===null?l.effects=[o]:m.push(o))}else w={eventTime:w,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(p=x=w,c=j):x=x.next=w,a|=m;if(o=o.next,o===null){if(o=l.shared.pending,o===null)break;m=o,o=m.next,m.next=null,l.lastBaseUpdate=m,l.shared.pending=null}}while(!0);if(x===null&&(c=j),l.baseState=c,l.firstBaseUpdate=p,l.lastBaseUpdate=x,t=l.shared.interleaved,t!==null){l=t;do a|=l.lane,l=l.next;while(l!==t)}else i===null&&(l.shared.lanes=0);In|=a,e.lanes=a,e.memoizedState=j}}function rc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(L(191,l));l.call(r)}}}var hr={},zt=Nn(hr),nr=Nn(hr),sr=Nn(hr);function Tn(e){if(e===hr)throw Error(L(174));return e}function za(e,t){switch(we(sr,t),we(nr,e),we(zt,hr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ei(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ei(t,e)}be(zt),we(zt,t)}function hs(){be(zt),be(nr),be(sr)}function hd(e){Tn(sr.current);var t=Tn(zt.current),n=Ei(t,e.type);t!==n&&(we(nr,e),we(zt,n))}function Oa(e){nr.current===e&&(be(zt),be(nr))}var Te=Nn(0);function fl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var li=[];function Ha(){for(var e=0;e<li.length;e++)li[e]._workInProgressVersionPrimary=null;li.length=0}var Vr=Zt.ReactCurrentDispatcher,ii=Zt.ReactCurrentBatchConfig,Rn=0,De=null,Oe=null,Be=null,pl=!1,Hs=!1,rr=0,mp=0;function Ye(){throw Error(L(321))}function Ba(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Lt(e[n],t[n]))return!1;return!0}function Ua(e,t,n,r,l,i){if(Rn=i,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vr.current=e===null||e.memoizedState===null?xp:jp,e=n(r,l),Hs){i=0;do{if(Hs=!1,rr=0,25<=i)throw Error(L(301));i+=1,Be=Oe=null,t.updateQueue=null,Vr.current=wp,e=n(r,l)}while(Hs)}if(Vr.current=ml,t=Oe!==null&&Oe.next!==null,Rn=0,Be=Oe=De=null,pl=!1,t)throw Error(L(300));return e}function Wa(){var e=rr!==0;return rr=0,e}function It(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?De.memoizedState=Be=e:Be=Be.next=e,Be}function kt(){if(Oe===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Be===null?De.memoizedState:Be.next;if(t!==null)Be=t,Oe=e;else{if(e===null)throw Error(L(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Be===null?De.memoizedState=Be=e:Be=Be.next=e}return Be}function lr(e,t){return typeof t=="function"?t(e):t}function ai(e){var t=kt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=Oe,l=r.baseQueue,i=n.pending;if(i!==null){if(l!==null){var a=l.next;l.next=i.next,i.next=a}r.baseQueue=l=i,n.pending=null}if(l!==null){i=l.next,r=r.baseState;var o=a=null,c=null,p=i;do{var x=p.lane;if((Rn&x)===x)c!==null&&(c=c.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:e(r,p.action);else{var j={lane:x,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};c===null?(o=c=j,a=r):c=c.next=j,De.lanes|=x,In|=x}p=p.next}while(p!==null&&p!==i);c===null?a=r:c.next=o,Lt(r,t.memoizedState)||(lt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do i=l.lane,De.lanes|=i,In|=i,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function oi(e){var t=kt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,i=t.memoizedState;if(l!==null){n.pending=null;var a=l=l.next;do i=e(i,a.action),a=a.next;while(a!==l);Lt(i,t.memoizedState)||(lt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function fd(){}function pd(e,t){var n=De,r=kt(),l=t(),i=!Lt(r.memoizedState,l);if(i&&(r.memoizedState=l,lt=!0),r=r.queue,Va(gd.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,ir(9,vd.bind(null,n,r,l,t),void 0,null),Ue===null)throw Error(L(349));Rn&30||md(n,t,l)}return l}function md(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function vd(e,t,n,r){t.value=n,t.getSnapshot=r,yd(t)&&xd(e)}function gd(e,t,n){return n(function(){yd(t)&&xd(e)})}function yd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Lt(e,n)}catch{return!0}}function xd(e){var t=Gt(e,1);t!==null&&Dt(t,e,1,-1)}function lc(e){var t=It();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:e},t.queue=e,e=e.dispatch=yp.bind(null,De,e),[t.memoizedState,e]}function ir(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function jd(){return kt().memoizedState}function Qr(e,t,n,r){var l=It();De.flags|=e,l.memoizedState=ir(1|t,n,void 0,r===void 0?null:r)}function Pl(e,t,n,r){var l=kt();r=r===void 0?null:r;var i=void 0;if(Oe!==null){var a=Oe.memoizedState;if(i=a.destroy,r!==null&&Ba(r,a.deps)){l.memoizedState=ir(t,n,i,r);return}}De.flags|=e,l.memoizedState=ir(1|t,n,i,r)}function ic(e,t){return Qr(8390656,8,e,t)}function Va(e,t){return Pl(2048,8,e,t)}function wd(e,t){return Pl(4,2,e,t)}function Nd(e,t){return Pl(4,4,e,t)}function Sd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kd(e,t,n){return n=n!=null?n.concat([e]):null,Pl(4,4,Sd.bind(null,t,e),n)}function Qa(){}function bd(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ba(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Cd(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ba(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ed(e,t,n){return Rn&21?(Lt(n,t)||(n=Lu(),De.lanes|=n,In|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=n)}function vp(e,t){var n=pe;pe=n!==0&&4>n?n:4,e(!0);var r=ii.transition;ii.transition={};try{e(!1),t()}finally{pe=n,ii.transition=r}}function Pd(){return kt().memoizedState}function gp(e,t,n){var r=gn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Md(e))Td(t,n);else if(n=ud(e,t,n,r),n!==null){var l=tt();Dt(n,e,r,l),Dd(n,t,r)}}function yp(e,t,n){var r=gn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Md(e))Td(t,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,o=i(a,n);if(l.hasEagerState=!0,l.eagerState=o,Lt(o,a)){var c=t.interleaved;c===null?(l.next=l,Fa(t)):(l.next=c.next,c.next=l),t.interleaved=l;return}}catch{}finally{}n=ud(e,t,l,r),n!==null&&(l=tt(),Dt(n,e,r,l),Dd(n,t,r))}}function Md(e){var t=e.alternate;return e===De||t!==null&&t===De}function Td(e,t){Hs=pl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Dd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sa(e,n)}}var ml={readContext:St,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},xp={readContext:St,useCallback:function(e,t){return It().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:ic,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qr(4194308,4,Sd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qr(4,2,e,t)},useMemo:function(e,t){var n=It();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=It();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gp.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=It();return e={current:e},t.memoizedState=e},useState:lc,useDebugValue:Qa,useDeferredValue:function(e){return It().memoizedState=e},useTransition:function(){var e=lc(!1),t=e[0];return e=vp.bind(null,e[1]),It().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,l=It();if(Pe){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Ue===null)throw Error(L(349));Rn&30||md(r,t,n)}l.memoizedState=n;var i={value:n,getSnapshot:t};return l.queue=i,ic(gd.bind(null,r,i,e),[e]),r.flags|=2048,ir(9,vd.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=It(),t=Ue.identifierPrefix;if(Pe){var n=Vt,r=Wt;n=(r&~(1<<32-Tt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=rr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=mp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jp={readContext:St,useCallback:bd,useContext:St,useEffect:Va,useImperativeHandle:kd,useInsertionEffect:wd,useLayoutEffect:Nd,useMemo:Cd,useReducer:ai,useRef:jd,useState:function(){return ai(lr)},useDebugValue:Qa,useDeferredValue:function(e){var t=kt();return Ed(t,Oe.memoizedState,e)},useTransition:function(){var e=ai(lr)[0],t=kt().memoizedState;return[e,t]},useMutableSource:fd,useSyncExternalStore:pd,useId:Pd,unstable_isNewReconciler:!1},wp={readContext:St,useCallback:bd,useContext:St,useEffect:Va,useImperativeHandle:kd,useInsertionEffect:wd,useLayoutEffect:Nd,useMemo:Cd,useReducer:oi,useRef:jd,useState:function(){return oi(lr)},useDebugValue:Qa,useDeferredValue:function(e){var t=kt();return Oe===null?t.memoizedState=e:Ed(t,Oe.memoizedState,e)},useTransition:function(){var e=oi(lr)[0],t=kt().memoizedState;return[e,t]},useMutableSource:fd,useSyncExternalStore:pd,useId:Pd,unstable_isNewReconciler:!1};function Et(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Yi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ml={isMounted:function(e){return(e=e._reactInternals)?zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tt(),l=gn(e),i=Qt(r,l);i.payload=t,n!=null&&(i.callback=n),t=mn(e,i,l),t!==null&&(Dt(t,e,l,r),Wr(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tt(),l=gn(e),i=Qt(r,l);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=mn(e,i,l),t!==null&&(Dt(t,e,l,r),Wr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tt(),r=gn(e),l=Qt(n,r);l.tag=2,t!=null&&(l.callback=t),t=mn(e,l,r),t!==null&&(Dt(t,e,r,n),Wr(t,e,r))}};function ac(e,t,n,r,l,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Js(n,r)||!Js(l,i):!0}function Ld(e,t,n){var r=!1,l=jn,i=t.contextType;return typeof i=="object"&&i!==null?i=St(i):(l=at(t)?_n:Ze.current,r=t.contextTypes,i=(r=r!=null)?cs(e,l):jn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=i),t}function oc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ml.enqueueReplaceState(t,t.state,null)}function Gi(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Aa(e);var i=t.contextType;typeof i=="object"&&i!==null?l.context=St(i):(i=at(t)?_n:Ze.current,l.context=cs(e,i)),l.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Yi(e,t,i,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Ml.enqueueReplaceState(l,l.state,null),hl(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function fs(e,t){try{var n="",r=t;do n+=Yh(r),r=r.return;while(r);var l=n}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:l,digest:null}}function ci(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Xi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Np=typeof WeakMap=="function"?WeakMap:Map;function _d(e,t,n){n=Qt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){gl||(gl=!0,ia=r),Xi(e,t)},n}function $d(e,t,n){n=Qt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){Xi(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xi(e,t),typeof r!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function cc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Np;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Ip.bind(null,e,t,n),t.then(e,e))}function uc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dc(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qt(-1,1),t.tag=2,mn(n,t,1))),n.lanes|=1),e)}var Sp=Zt.ReactCurrentOwner,lt=!1;function et(e,t,n,r){t.child=e===null?cd(t,null,n,r):ds(t,e.child,n,r)}function hc(e,t,n,r,l){n=n.render;var i=t.ref;return is(t,l),r=Ua(e,t,n,r,i,l),n=Wa(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Xt(e,t,l)):(Pe&&n&&Da(t),t.flags|=1,et(e,t,r,l),t.child)}function fc(e,t,n,r,l){if(e===null){var i=n.type;return typeof i=="function"&&!eo(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Rd(e,t,i,r,l)):(e=Xr(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&l)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Js,n(a,r)&&e.ref===t.ref)return Xt(e,t,l)}return t.flags|=1,e=yn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Rd(e,t,n,r,l){if(e!==null){var i=e.memoizedProps;if(Js(i,r)&&e.ref===t.ref)if(lt=!1,t.pendingProps=r=i,(e.lanes&l)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,Xt(e,t,l)}return Zi(e,t,n,r,l)}function Id(e,t,n){var r=t.pendingProps,l=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(ts,ut),ut|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(ts,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(ts,ut),ut|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,we(ts,ut),ut|=r;return et(e,t,l,n),t.child}function Fd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zi(e,t,n,r,l){var i=at(n)?_n:Ze.current;return i=cs(t,i),is(t,l),n=Ua(e,t,n,r,i,l),r=Wa(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Xt(e,t,l)):(Pe&&r&&Da(t),t.flags|=1,et(e,t,n,l),t.child)}function pc(e,t,n,r,l){if(at(n)){var i=!0;al(t)}else i=!1;if(is(t,l),t.stateNode===null)Kr(e,t),Ld(t,n,r),Gi(t,n,r,l),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=St(p):(p=at(n)?_n:Ze.current,p=cs(t,p));var x=n.getDerivedStateFromProps,j=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function";j||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==p)&&oc(t,a,r,p),ln=!1;var m=t.memoizedState;a.state=m,hl(t,r,a,l),c=t.memoizedState,o!==r||m!==c||it.current||ln?(typeof x=="function"&&(Yi(t,n,x,r),c=t.memoizedState),(o=ln||ac(t,n,o,r,m,c,p))?(j||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=p,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,dd(e,t),o=t.memoizedProps,p=t.type===t.elementType?o:Et(t.type,o),a.props=p,j=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=St(c):(c=at(n)?_n:Ze.current,c=cs(t,c));var w=n.getDerivedStateFromProps;(x=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==j||m!==c)&&oc(t,a,r,c),ln=!1,m=t.memoizedState,a.state=m,hl(t,r,a,l);var g=t.memoizedState;o!==j||m!==g||it.current||ln?(typeof w=="function"&&(Yi(t,n,w,r),g=t.memoizedState),(p=ln||ac(t,n,p,r,m,g,c)||!1)?(x||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=p):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Ji(e,t,n,r,i,l)}function Ji(e,t,n,r,l,i){Fd(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return l&&qo(t,n,!1),Xt(e,t,i);r=t.stateNode,Sp.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ds(t,e.child,null,i),t.child=ds(t,null,o,i)):et(e,t,o,i),t.memoizedState=r.state,l&&qo(t,n,!0),t.child}function Ad(e){var t=e.stateNode;t.pendingContext?Jo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jo(e,t.context,!1),za(e,t.containerInfo)}function mc(e,t,n,r,l){return us(),_a(l),t.flags|=256,et(e,t,n,r),t.child}var qi={dehydrated:null,treeContext:null,retryLane:0};function ea(e){return{baseLanes:e,cachePool:null,transitions:null}}function zd(e,t,n){var r=t.pendingProps,l=Te.current,i=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(l&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),we(Te,l&1),e===null)return Qi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ll(a,r,0,null),e=Ln(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ea(n),t.memoizedState=qi,e):Ka(t,a));if(l=e.memoizedState,l!==null&&(o=l.dehydrated,o!==null))return kp(e,t,a,r,o,l,n);if(i){i=r.fallback,a=t.mode,l=e.child,o=l.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=yn(l,c),r.subtreeFlags=l.subtreeFlags&14680064),o!==null?i=yn(o,i):(i=Ln(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?ea(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=qi,r}return i=e.child,e=i.sibling,r=yn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ka(e,t){return t=Ll({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Dr(e,t,n,r){return r!==null&&_a(r),ds(t,e.child,null,n),e=Ka(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kp(e,t,n,r,l,i,a){if(n)return t.flags&256?(t.flags&=-257,r=ci(Error(L(422))),Dr(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,l=t.mode,r=Ll({mode:"visible",children:r.children},l,0,null),i=Ln(i,l,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ds(t,e.child,null,a),t.child.memoizedState=ea(a),t.memoizedState=qi,i);if(!(t.mode&1))return Dr(e,t,a,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(L(419)),r=ci(i,r,void 0),Dr(e,t,a,r)}if(o=(a&e.childLanes)!==0,lt||o){if(r=Ue,r!==null){switch(a&-a){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|a)?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,Gt(e,l),Dt(r,e,l,-1))}return qa(),r=ci(Error(L(421))),Dr(e,t,a,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Fp.bind(null,e),l._reactRetry=t,null):(e=i.treeContext,dt=pn(l.nextSibling),ht=t,Pe=!0,Mt=null,e!==null&&(xt[jt++]=Wt,xt[jt++]=Vt,xt[jt++]=$n,Wt=e.id,Vt=e.overflow,$n=t),t=Ka(t,r.children),t.flags|=4096,t)}function vc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ki(e.return,t,n)}function ui(e,t,n,r,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=l)}function Od(e,t,n){var r=t.pendingProps,l=r.revealOrder,i=r.tail;if(et(e,t,r.children,n),r=Te.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vc(e,n,t);else if(e.tag===19)vc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(we(Te,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&fl(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ui(t,!1,l,n,i);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&fl(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ui(t,!0,n,null,i);break;case"together":ui(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),In|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bp(e,t,n){switch(t.tag){case 3:Ad(t),us();break;case 5:hd(t);break;case 1:at(t.type)&&al(t);break;case 4:za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;we(ul,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(we(Te,Te.current&1),t.flags|=128,null):n&t.child.childLanes?zd(e,t,n):(we(Te,Te.current&1),e=Xt(e,t,n),e!==null?e.sibling:null);we(Te,Te.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Od(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),we(Te,Te.current),r)break;return null;case 22:case 23:return t.lanes=0,Id(e,t,n)}return Xt(e,t,n)}var Hd,ta,Bd,Ud;Hd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ta=function(){};Bd=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,Tn(zt.current);var i=null;switch(n){case"input":l=Si(e,l),r=Si(e,r),i=[];break;case"select":l=Le({},l,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":l=Ci(e,l),r=Ci(e,r),i=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ll)}Pi(n,r);var a;n=null;for(p in l)if(!r.hasOwnProperty(p)&&l.hasOwnProperty(p)&&l[p]!=null)if(p==="style"){var o=l[p];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Vs.hasOwnProperty(p)?i||(i=[]):(i=i||[]).push(p,null));for(p in r){var c=r[p];if(o=l?.[p],r.hasOwnProperty(p)&&c!==o&&(c!=null||o!=null))if(p==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(p,n)),n=c;else p==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(p,c)):p==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(p,""+c):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Vs.hasOwnProperty(p)?(c!=null&&p==="onScroll"&&ke("scroll",e),i||o===c||(i=[])):(i=i||[]).push(p,c))}n&&(i=i||[]).push("style",n);var p=i;(t.updateQueue=p)&&(t.flags|=4)}};Ud=function(e,t,n,r){n!==r&&(t.flags|=4)};function bs(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Cp(e,t,n){var r=t.pendingProps;switch(La(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(t),null;case 1:return at(t.type)&&il(),Ge(t),null;case 3:return r=t.stateNode,hs(),be(it),be(Ze),Ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Mr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mt!==null&&(ca(Mt),Mt=null))),ta(e,t),Ge(t),null;case 5:Oa(t);var l=Tn(sr.current);if(n=t.type,e!==null&&t.stateNode!=null)Bd(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(L(166));return Ge(t),null}if(e=Tn(zt.current),Mr(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ft]=t,r[tr]=i,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(l=0;l<Rs.length;l++)ke(Rs[l],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":bo(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":Eo(r,i),ke("invalid",r)}Pi(n,i),l=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Pr(r.textContent,o,e),l=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Pr(r.textContent,o,e),l=["children",""+o]):Vs.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ke("scroll",r)}switch(n){case"input":jr(r),Co(r,i,!0);break;case"textarea":jr(r),Po(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ll)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Ft]=t,e[tr]=r,Hd(e,t,!1,!1),t.stateNode=e;e:{switch(a=Mi(n,r),n){case"dialog":ke("cancel",e),ke("close",e),l=r;break;case"iframe":case"object":case"embed":ke("load",e),l=r;break;case"video":case"audio":for(l=0;l<Rs.length;l++)ke(Rs[l],e);l=r;break;case"source":ke("error",e),l=r;break;case"img":case"image":case"link":ke("error",e),ke("load",e),l=r;break;case"details":ke("toggle",e),l=r;break;case"input":bo(e,r),l=Si(e,r),ke("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=Le({},r,{value:void 0}),ke("invalid",e);break;case"textarea":Eo(e,r),l=Ci(e,r),ke("invalid",e);break;default:l=r}Pi(n,l),o=l;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?ju(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&yu(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Qs(e,c):typeof c=="number"&&Qs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ke("scroll",e):c!=null&&ga(e,i,c,a))}switch(n){case"input":jr(e),Co(e,r,!1);break;case"textarea":jr(e),Po(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ns(e,!!r.multiple,i,!1):r.defaultValue!=null&&ns(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=ll)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ge(t),null;case 6:if(e&&t.stateNode!=null)Ud(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(L(166));if(n=Tn(sr.current),Tn(zt.current),Mr(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ft]=t,(i=r.nodeValue!==n)&&(e=ht,e!==null))switch(e.tag){case 3:Pr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pr(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ft]=t,t.stateNode=r}return Ge(t),null;case 13:if(be(Te),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&dt!==null&&t.mode&1&&!(t.flags&128))ad(),us(),t.flags|=98560,i=!1;else if(i=Mr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(L(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Ft]=t}else us(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ge(t),i=!1}else Mt!==null&&(ca(Mt),Mt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Te.current&1?He===0&&(He=3):qa())),t.updateQueue!==null&&(t.flags|=4),Ge(t),null);case 4:return hs(),ta(e,t),e===null&&qs(t.stateNode.containerInfo),Ge(t),null;case 10:return Ia(t.type._context),Ge(t),null;case 17:return at(t.type)&&il(),Ge(t),null;case 19:if(be(Te),i=t.memoizedState,i===null)return Ge(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)bs(i,!1);else{if(He!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=fl(e),a!==null){for(t.flags|=128,bs(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(Te,Te.current&1|2),t.child}e=e.sibling}i.tail!==null&&Fe()>ps&&(t.flags|=128,r=!0,bs(i,!1),t.lanes=4194304)}else{if(!r)if(e=fl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),bs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Pe)return Ge(t),null}else 2*Fe()-i.renderingStartTime>ps&&n!==1073741824&&(t.flags|=128,r=!0,bs(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Fe(),t.sibling=null,n=Te.current,we(Te,r?n&1|2:n&1),t):(Ge(t),null);case 22:case 23:return Ja(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ut&1073741824&&(Ge(t),t.subtreeFlags&6&&(t.flags|=8192)):Ge(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function Ep(e,t){switch(La(t),t.tag){case 1:return at(t.type)&&il(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hs(),be(it),be(Ze),Ha(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Oa(t),null;case 13:if(be(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));us()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Te),null;case 4:return hs(),null;case 10:return Ia(t.type._context),null;case 22:case 23:return Ja(),null;case 24:return null;default:return null}}var Lr=!1,Xe=!1,Pp=typeof WeakSet=="function"?WeakSet:Set,B=null;function es(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(e,t,r)}else n.current=null}function na(e,t,n){try{n()}catch(r){Re(e,t,r)}}var gc=!1;function Mp(e,t){if(zi=nl,e=Yu(),Ta(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,p=0,x=0,j=e,m=null;t:for(;;){for(var w;j!==n||l!==0&&j.nodeType!==3||(o=a+l),j!==i||r!==0&&j.nodeType!==3||(c=a+r),j.nodeType===3&&(a+=j.nodeValue.length),(w=j.firstChild)!==null;)m=j,j=w;for(;;){if(j===e)break t;if(m===n&&++p===l&&(o=a),m===i&&++x===r&&(c=a),(w=j.nextSibling)!==null)break;j=m,m=j.parentNode}j=w}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oi={focusedElem:e,selectionRange:n},nl=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var N=g.memoizedProps,R=g.memoizedState,f=t.stateNode,h=f.getSnapshotBeforeUpdate(t.elementType===t.type?N:Et(t.type,N),R);f.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var u=t.stateNode.containerInfo;u.nodeType===1?u.textContent="":u.nodeType===9&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(y){Re(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return g=gc,gc=!1,g}function Bs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var i=l.destroy;l.destroy=void 0,i!==void 0&&na(t,n,i)}l=l.next}while(l!==r)}}function Tl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Wd(e){var t=e.alternate;t!==null&&(e.alternate=null,Wd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ft],delete t[tr],delete t[Ui],delete t[dp],delete t[hp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vd(e){return e.tag===5||e.tag===3||e.tag===4}function yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ra(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ll));else if(r!==4&&(e=e.child,e!==null))for(ra(e,t,n),e=e.sibling;e!==null;)ra(e,t,n),e=e.sibling}function la(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(la(e,t,n),e=e.sibling;e!==null;)la(e,t,n),e=e.sibling}var We=null,Pt=!1;function sn(e,t,n){for(n=n.child;n!==null;)Qd(e,t,n),n=n.sibling}function Qd(e,t,n){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Nl,n)}catch{}switch(n.tag){case 5:Xe||es(n,t);case 6:var r=We,l=Pt;We=null,sn(e,t,n),We=r,Pt=l,We!==null&&(Pt?(e=We,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&(Pt?(e=We,n=n.stateNode,e.nodeType===8?si(e.parentNode,n):e.nodeType===1&&si(e,n),Xs(e)):si(We,n.stateNode));break;case 4:r=We,l=Pt,We=n.stateNode.containerInfo,Pt=!0,sn(e,t,n),We=r,Pt=l;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var i=l,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&na(n,t,a),l=l.next}while(l!==r)}sn(e,t,n);break;case 1:if(!Xe&&(es(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Re(n,t,o)}sn(e,t,n);break;case 21:sn(e,t,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,sn(e,t,n),Xe=r):sn(e,t,n);break;default:sn(e,t,n)}}function xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Pp),t.forEach(function(r){var l=Ap.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function Ct(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var i=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:We=o.stateNode,Pt=!1;break e;case 3:We=o.stateNode.containerInfo,Pt=!0;break e;case 4:We=o.stateNode.containerInfo,Pt=!0;break e}o=o.return}if(We===null)throw Error(L(160));Qd(i,a,l),We=null,Pt=!1;var c=l.alternate;c!==null&&(c.return=null),l.return=null}catch(p){Re(l,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Kd(t,e),t=t.sibling}function Kd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),Rt(e),r&4){try{Bs(3,e,e.return),Tl(3,e)}catch(N){Re(e,e.return,N)}try{Bs(5,e,e.return)}catch(N){Re(e,e.return,N)}}break;case 1:Ct(t,e),Rt(e),r&512&&n!==null&&es(n,n.return);break;case 5:if(Ct(t,e),Rt(e),r&512&&n!==null&&es(n,n.return),e.flags&32){var l=e.stateNode;try{Qs(l,"")}catch(N){Re(e,e.return,N)}}if(r&4&&(l=e.stateNode,l!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&mu(l,i),Mi(o,a);var p=Mi(o,i);for(a=0;a<c.length;a+=2){var x=c[a],j=c[a+1];x==="style"?ju(l,j):x==="dangerouslySetInnerHTML"?yu(l,j):x==="children"?Qs(l,j):ga(l,x,j,p)}switch(o){case"input":ki(l,i);break;case"textarea":vu(l,i);break;case"select":var m=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?ns(l,!!i.multiple,w,!1):m!==!!i.multiple&&(i.defaultValue!=null?ns(l,!!i.multiple,i.defaultValue,!0):ns(l,!!i.multiple,i.multiple?[]:"",!1))}l[tr]=i}catch(N){Re(e,e.return,N)}}break;case 6:if(Ct(t,e),Rt(e),r&4){if(e.stateNode===null)throw Error(L(162));l=e.stateNode,i=e.memoizedProps;try{l.nodeValue=i}catch(N){Re(e,e.return,N)}}break;case 3:if(Ct(t,e),Rt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xs(t.containerInfo)}catch(N){Re(e,e.return,N)}break;case 4:Ct(t,e),Rt(e);break;case 13:Ct(t,e),Rt(e),l=e.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(Xa=Fe())),r&4&&xc(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(Xe=(p=Xe)||x,Ct(t,e),Xe=p):Ct(t,e),Rt(e),r&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!x&&e.mode&1)for(B=e,x=e.child;x!==null;){for(j=B=x;B!==null;){switch(m=B,w=m.child,m.tag){case 0:case 11:case 14:case 15:Bs(4,m,m.return);break;case 1:es(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(N){Re(r,n,N)}}break;case 5:es(m,m.return);break;case 22:if(m.memoizedState!==null){wc(j);continue}}w!==null?(w.return=m,B=w):wc(j)}x=x.sibling}e:for(x=null,j=e;;){if(j.tag===5){if(x===null){x=j;try{l=j.stateNode,p?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=j.stateNode,c=j.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=xu("display",a))}catch(N){Re(e,e.return,N)}}}else if(j.tag===6){if(x===null)try{j.stateNode.nodeValue=p?"":j.memoizedProps}catch(N){Re(e,e.return,N)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===e)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===e)break e;for(;j.sibling===null;){if(j.return===null||j.return===e)break e;x===j&&(x=null),j=j.return}x===j&&(x=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:Ct(t,e),Rt(e),r&4&&xc(e);break;case 21:break;default:Ct(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Vd(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Qs(l,""),r.flags&=-33);var i=yc(e);la(e,i,l);break;case 3:case 4:var a=r.stateNode.containerInfo,o=yc(e);ra(e,o,a);break;default:throw Error(L(161))}}catch(c){Re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tp(e,t,n){B=e,Yd(e)}function Yd(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var l=B,i=l.child;if(l.tag===22&&r){var a=l.memoizedState!==null||Lr;if(!a){var o=l.alternate,c=o!==null&&o.memoizedState!==null||Xe;o=Lr;var p=Xe;if(Lr=a,(Xe=c)&&!p)for(B=l;B!==null;)a=B,c=a.child,a.tag===22&&a.memoizedState!==null?Nc(l):c!==null?(c.return=a,B=c):Nc(l);for(;i!==null;)B=i,Yd(i),i=i.sibling;B=l,Lr=o,Xe=p}jc(e)}else l.subtreeFlags&8772&&i!==null?(i.return=l,B=i):jc(e)}}function jc(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||Tl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Et(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&rc(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}rc(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var x=p.memoizedState;if(x!==null){var j=x.dehydrated;j!==null&&Xs(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Xe||t.flags&512&&sa(t)}catch(m){Re(t,t.return,m)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function wc(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function Nc(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Tl(4,t)}catch(c){Re(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(c){Re(t,l,c)}}var i=t.return;try{sa(t)}catch(c){Re(t,i,c)}break;case 5:var a=t.return;try{sa(t)}catch(c){Re(t,a,c)}}}catch(c){Re(t,t.return,c)}if(t===e){B=null;break}var o=t.sibling;if(o!==null){o.return=t.return,B=o;break}B=t.return}}var Dp=Math.ceil,vl=Zt.ReactCurrentDispatcher,Ya=Zt.ReactCurrentOwner,Nt=Zt.ReactCurrentBatchConfig,ue=0,Ue=null,Ae=null,Ve=0,ut=0,ts=Nn(0),He=0,ar=null,In=0,Dl=0,Ga=0,Us=null,rt=null,Xa=0,ps=1/0,Bt=null,gl=!1,ia=null,vn=null,_r=!1,un=null,yl=0,Ws=0,aa=null,Yr=-1,Gr=0;function tt(){return ue&6?Fe():Yr!==-1?Yr:Yr=Fe()}function gn(e){return e.mode&1?ue&2&&Ve!==0?Ve&-Ve:pp.transition!==null?(Gr===0&&(Gr=Lu()),Gr):(e=pe,e!==0||(e=window.event,e=e===void 0?16:zu(e.type)),e):1}function Dt(e,t,n,r){if(50<Ws)throw Ws=0,aa=null,Error(L(185));cr(e,n,r),(!(ue&2)||e!==Ue)&&(e===Ue&&(!(ue&2)&&(Dl|=n),He===4&&on(e,Ve)),ot(e,r),n===1&&ue===0&&!(t.mode&1)&&(ps=Fe()+500,El&&Sn()))}function ot(e,t){var n=e.callbackNode;pf(e,t);var r=tl(e,e===Ue?Ve:0);if(r===0)n!==null&&Do(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Do(n),t===1)e.tag===0?fp(Sc.bind(null,e)):rd(Sc.bind(null,e)),cp(function(){!(ue&6)&&Sn()}),n=null;else{switch(_u(r)){case 1:n=Na;break;case 4:n=Tu;break;case 16:n=el;break;case 536870912:n=Du;break;default:n=el}n=nh(n,Gd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gd(e,t){if(Yr=-1,Gr=0,ue&6)throw Error(L(327));var n=e.callbackNode;if(as()&&e.callbackNode!==n)return null;var r=tl(e,e===Ue?Ve:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xl(e,r);else{t=r;var l=ue;ue|=2;var i=Zd();(Ue!==e||Ve!==t)&&(Bt=null,ps=Fe()+500,Dn(e,t));do try{$p();break}catch(o){Xd(e,o)}while(!0);Ra(),vl.current=i,ue=l,Ae!==null?t=0:(Ue=null,Ve=0,t=He)}if(t!==0){if(t===2&&(l=$i(e),l!==0&&(r=l,t=oa(e,l))),t===1)throw n=ar,Dn(e,0),on(e,r),ot(e,Fe()),n;if(t===6)on(e,r);else{if(l=e.current.alternate,!(r&30)&&!Lp(l)&&(t=xl(e,r),t===2&&(i=$i(e),i!==0&&(r=i,t=oa(e,i))),t===1))throw n=ar,Dn(e,0),on(e,r),ot(e,Fe()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(L(345));case 2:En(e,rt,Bt);break;case 3:if(on(e,r),(r&130023424)===r&&(t=Xa+500-Fe(),10<t)){if(tl(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){tt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Bi(En.bind(null,e,rt,Bt),t);break}En(e,rt,Bt);break;case 4:if(on(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var a=31-Tt(r);i=1<<a,a=t[a],a>l&&(l=a),r&=~i}if(r=l,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dp(r/1960))-r,10<r){e.timeoutHandle=Bi(En.bind(null,e,rt,Bt),r);break}En(e,rt,Bt);break;case 5:En(e,rt,Bt);break;default:throw Error(L(329))}}}return ot(e,Fe()),e.callbackNode===n?Gd.bind(null,e):null}function oa(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(Dn(e,t).flags|=256),e=xl(e,t),e!==2&&(t=rt,rt=n,t!==null&&ca(t)),e}function ca(e){rt===null?rt=e:rt.push.apply(rt,e)}function Lp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],i=l.getSnapshot;l=l.value;try{if(!Lt(i(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function on(e,t){for(t&=~Ga,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tt(t),r=1<<n;e[n]=-1,t&=~r}}function Sc(e){if(ue&6)throw Error(L(327));as();var t=tl(e,0);if(!(t&1))return ot(e,Fe()),null;var n=xl(e,t);if(e.tag!==0&&n===2){var r=$i(e);r!==0&&(t=r,n=oa(e,r))}if(n===1)throw n=ar,Dn(e,0),on(e,t),ot(e,Fe()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,En(e,rt,Bt),ot(e,Fe()),null}function Za(e,t){var n=ue;ue|=1;try{return e(t)}finally{ue=n,ue===0&&(ps=Fe()+500,El&&Sn())}}function Fn(e){un!==null&&un.tag===0&&!(ue&6)&&as();var t=ue;ue|=1;var n=Nt.transition,r=pe;try{if(Nt.transition=null,pe=1,e)return e()}finally{pe=r,Nt.transition=n,ue=t,!(ue&6)&&Sn()}}function Ja(){ut=ts.current,be(ts)}function Dn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,op(n)),Ae!==null)for(n=Ae.return;n!==null;){var r=n;switch(La(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&il();break;case 3:hs(),be(it),be(Ze),Ha();break;case 5:Oa(r);break;case 4:hs();break;case 13:be(Te);break;case 19:be(Te);break;case 10:Ia(r.type._context);break;case 22:case 23:Ja()}n=n.return}if(Ue=e,Ae=e=yn(e.current,null),Ve=ut=t,He=0,ar=null,Ga=Dl=In=0,rt=Us=null,Mn!==null){for(t=0;t<Mn.length;t++)if(n=Mn[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=l,r.next=a}n.pending=r}Mn=null}return e}function Xd(e,t){do{var n=Ae;try{if(Ra(),Vr.current=ml,pl){for(var r=De.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}pl=!1}if(Rn=0,Be=Oe=De=null,Hs=!1,rr=0,Ya.current=null,n===null||n.return===null){He=1,ar=t,Ae=null;break}e:{var i=e,a=n.return,o=n,c=t;if(t=Ve,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var p=c,x=o,j=x.tag;if(!(x.mode&1)&&(j===0||j===11||j===15)){var m=x.alternate;m?(x.updateQueue=m.updateQueue,x.memoizedState=m.memoizedState,x.lanes=m.lanes):(x.updateQueue=null,x.memoizedState=null)}var w=uc(a);if(w!==null){w.flags&=-257,dc(w,a,o,i,t),w.mode&1&&cc(i,p,t),t=w,c=p;var g=t.updateQueue;if(g===null){var N=new Set;N.add(c),t.updateQueue=N}else g.add(c);break e}else{if(!(t&1)){cc(i,p,t),qa();break e}c=Error(L(426))}}else if(Pe&&o.mode&1){var R=uc(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),dc(R,a,o,i,t),_a(fs(c,o));break e}}i=c=fs(c,o),He!==4&&(He=2),Us===null?Us=[i]:Us.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var f=_d(i,c,t);sc(i,f);break e;case 1:o=c;var h=i.type,u=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(vn===null||!vn.has(u)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=$d(i,o,t);sc(i,y);break e}}i=i.return}while(i!==null)}qd(n)}catch(S){t=S,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function Zd(){var e=vl.current;return vl.current=ml,e===null?ml:e}function qa(){(He===0||He===3||He===2)&&(He=4),Ue===null||!(In&268435455)&&!(Dl&268435455)||on(Ue,Ve)}function xl(e,t){var n=ue;ue|=2;var r=Zd();(Ue!==e||Ve!==t)&&(Bt=null,Dn(e,t));do try{_p();break}catch(l){Xd(e,l)}while(!0);if(Ra(),ue=n,vl.current=r,Ae!==null)throw Error(L(261));return Ue=null,Ve=0,He}function _p(){for(;Ae!==null;)Jd(Ae)}function $p(){for(;Ae!==null&&!rf();)Jd(Ae)}function Jd(e){var t=th(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?qd(e):Ae=t,Ya.current=null}function qd(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ep(n,t),n!==null){n.flags&=32767,Ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,Ae=null;return}}else if(n=Cp(n,t,ut),n!==null){Ae=n;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);He===0&&(He=5)}function En(e,t,n){var r=pe,l=Nt.transition;try{Nt.transition=null,pe=1,Rp(e,t,n,r)}finally{Nt.transition=l,pe=r}return null}function Rp(e,t,n,r){do as();while(un!==null);if(ue&6)throw Error(L(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(mf(e,i),e===Ue&&(Ae=Ue=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_r||(_r=!0,nh(el,function(){return as(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var a=pe;pe=1;var o=ue;ue|=4,Ya.current=null,Mp(e,n),Kd(n,e),tp(Oi),nl=!!zi,Oi=zi=null,e.current=n,Tp(n),lf(),ue=o,pe=a,Nt.transition=i}else e.current=n;if(_r&&(_r=!1,un=e,yl=l),i=e.pendingLanes,i===0&&(vn=null),cf(n.stateNode),ot(e,Fe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(gl)throw gl=!1,e=ia,ia=null,e;return yl&1&&e.tag!==0&&as(),i=e.pendingLanes,i&1?e===aa?Ws++:(Ws=0,aa=e):Ws=0,Sn(),null}function as(){if(un!==null){var e=_u(yl),t=Nt.transition,n=pe;try{if(Nt.transition=null,pe=16>e?16:e,un===null)var r=!1;else{if(e=un,un=null,yl=0,ue&6)throw Error(L(331));var l=ue;for(ue|=4,B=e.current;B!==null;){var i=B,a=i.child;if(B.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var p=o[c];for(B=p;B!==null;){var x=B;switch(x.tag){case 0:case 11:case 15:Bs(8,x,i)}var j=x.child;if(j!==null)j.return=x,B=j;else for(;B!==null;){x=B;var m=x.sibling,w=x.return;if(Wd(x),x===p){B=null;break}if(m!==null){m.return=w,B=m;break}B=w}}}var g=i.alternate;if(g!==null){var N=g.child;if(N!==null){g.child=null;do{var R=N.sibling;N.sibling=null,N=R}while(N!==null)}}B=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,B=a;else e:for(;B!==null;){if(i=B,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bs(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,B=f;break e}B=i.return}}var h=e.current;for(B=h;B!==null;){a=B;var u=a.child;if(a.subtreeFlags&2064&&u!==null)u.return=a,B=u;else e:for(a=h;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Tl(9,o)}}catch(S){Re(o,o.return,S)}if(o===a){B=null;break e}var y=o.sibling;if(y!==null){y.return=o.return,B=y;break e}B=o.return}}if(ue=l,Sn(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Nl,e)}catch{}r=!0}return r}finally{pe=n,Nt.transition=t}}return!1}function kc(e,t,n){t=fs(n,t),t=_d(e,t,1),e=mn(e,t,1),t=tt(),e!==null&&(cr(e,1,t),ot(e,t))}function Re(e,t,n){if(e.tag===3)kc(e,e,n);else for(;t!==null;){if(t.tag===3){kc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vn===null||!vn.has(r))){e=fs(n,e),e=$d(t,e,1),t=mn(t,e,1),e=tt(),t!==null&&(cr(t,1,e),ot(t,e));break}}t=t.return}}function Ip(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=tt(),e.pingedLanes|=e.suspendedLanes&n,Ue===e&&(Ve&n)===n&&(He===4||He===3&&(Ve&130023424)===Ve&&500>Fe()-Xa?Dn(e,0):Ga|=n),ot(e,t)}function eh(e,t){t===0&&(e.mode&1?(t=Sr,Sr<<=1,!(Sr&130023424)&&(Sr=4194304)):t=1);var n=tt();e=Gt(e,t),e!==null&&(cr(e,t,n),ot(e,n))}function Fp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),eh(e,n)}function Ap(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(t),eh(e,n)}var th;th=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)lt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return lt=!1,bp(e,t,n);lt=!!(e.flags&131072)}else lt=!1,Pe&&t.flags&1048576&&ld(t,cl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Kr(e,t),e=t.pendingProps;var l=cs(t,Ze.current);is(t,n),l=Ua(null,t,r,e,l,n);var i=Wa();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,at(r)?(i=!0,al(t)):i=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Aa(t),l.updater=Ml,t.stateNode=l,l._reactInternals=t,Gi(t,r,e,n),t=Ji(null,t,r,!0,i,n)):(t.tag=0,Pe&&i&&Da(t),et(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Kr(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Op(r),e=Et(r,e),l){case 0:t=Zi(null,t,r,e,n);break e;case 1:t=pc(null,t,r,e,n);break e;case 11:t=hc(null,t,r,e,n);break e;case 14:t=fc(null,t,r,Et(r.type,e),n);break e}throw Error(L(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Et(r,l),Zi(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Et(r,l),pc(e,t,r,l,n);case 3:e:{if(Ad(t),e===null)throw Error(L(387));r=t.pendingProps,i=t.memoizedState,l=i.element,dd(e,t),hl(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){l=fs(Error(L(423)),t),t=mc(e,t,r,n,l);break e}else if(r!==l){l=fs(Error(L(424)),t),t=mc(e,t,r,n,l);break e}else for(dt=pn(t.stateNode.containerInfo.firstChild),ht=t,Pe=!0,Mt=null,n=cd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(us(),r===l){t=Xt(e,t,n);break e}et(e,t,r,n)}t=t.child}return t;case 5:return hd(t),e===null&&Qi(t),r=t.type,l=t.pendingProps,i=e!==null?e.memoizedProps:null,a=l.children,Hi(r,l)?a=null:i!==null&&Hi(r,i)&&(t.flags|=32),Fd(e,t),et(e,t,a,n),t.child;case 6:return e===null&&Qi(t),null;case 13:return zd(e,t,n);case 4:return za(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ds(t,null,r,n):et(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Et(r,l),hc(e,t,r,l,n);case 7:return et(e,t,t.pendingProps,n),t.child;case 8:return et(e,t,t.pendingProps.children,n),t.child;case 12:return et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,i=t.memoizedProps,a=l.value,we(ul,r._currentValue),r._currentValue=a,i!==null)if(Lt(i.value,a)){if(i.children===l.children&&!it.current){t=Xt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Qt(-1,n&-n),c.tag=2;var p=i.updateQueue;if(p!==null){p=p.shared;var x=p.pending;x===null?c.next=c:(c.next=x.next,x.next=c),p.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ki(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(L(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Ki(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}et(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,is(t,n),l=St(l),r=r(l),t.flags|=1,et(e,t,r,n),t.child;case 14:return r=t.type,l=Et(r,t.pendingProps),l=Et(r.type,l),fc(e,t,r,l,n);case 15:return Rd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Et(r,l),Kr(e,t),t.tag=1,at(r)?(e=!0,al(t)):e=!1,is(t,n),Ld(t,r,l),Gi(t,r,l,n),Ji(null,t,r,!0,e,n);case 19:return Od(e,t,n);case 22:return Id(e,t,n)}throw Error(L(156,t.tag))};function nh(e,t){return Mu(e,t)}function zp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,n,r){return new zp(e,t,n,r)}function eo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Op(e){if(typeof e=="function")return eo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xa)return 11;if(e===ja)return 14}return 2}function yn(e,t){var n=e.alternate;return n===null?(n=wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xr(e,t,n,r,l,i){var a=2;if(r=e,typeof e=="function")eo(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Vn:return Ln(n.children,l,i,t);case ya:a=8,l|=8;break;case xi:return e=wt(12,n,t,l|2),e.elementType=xi,e.lanes=i,e;case ji:return e=wt(13,n,t,l),e.elementType=ji,e.lanes=i,e;case wi:return e=wt(19,n,t,l),e.elementType=wi,e.lanes=i,e;case hu:return Ll(n,l,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uu:a=10;break e;case du:a=9;break e;case xa:a=11;break e;case ja:a=14;break e;case rn:a=16,r=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=wt(a,n,t,l),t.elementType=e,t.type=r,t.lanes=i,t}function Ln(e,t,n,r){return e=wt(7,e,r,t),e.lanes=n,e}function Ll(e,t,n,r){return e=wt(22,e,r,t),e.elementType=hu,e.lanes=n,e.stateNode={isHidden:!1},e}function di(e,t,n){return e=wt(6,e,null,t),e.lanes=n,e}function hi(e,t,n){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hp(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ql(0),this.expirationTimes=Ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ql(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function to(e,t,n,r,l,i,a,o,c){return e=new Hp(e,t,n,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=wt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(i),e}function Bp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function sh(e){if(!e)return jn;e=e._reactInternals;e:{if(zn(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(at(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(at(n))return sd(e,n,t)}return t}function rh(e,t,n,r,l,i,a,o,c){return e=to(n,r,!0,e,l,i,a,o,c),e.context=sh(null),n=e.current,r=tt(),l=gn(n),i=Qt(r,l),i.callback=t??null,mn(n,i,l),e.current.lanes=l,cr(e,l,r),ot(e,r),e}function _l(e,t,n,r){var l=t.current,i=tt(),a=gn(l);return n=sh(n),t.context===null?t.context=n:t.pendingContext=n,t=Qt(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mn(l,t,a),e!==null&&(Dt(e,l,a,i),Wr(e,l,a)),a}function jl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function no(e,t){bc(e,t),(e=e.alternate)&&bc(e,t)}function Up(){return null}var lh=typeof reportError=="function"?reportError:function(e){console.error(e)};function so(e){this._internalRoot=e}$l.prototype.render=so.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));_l(e,t,null,null)};$l.prototype.unmount=so.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fn(function(){_l(null,e,null,null)}),t[Yt]=null}};function $l(e){this._internalRoot=e}$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=Iu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<an.length&&t!==0&&t<an[n].priority;n++);an.splice(n,0,e),n===0&&Au(e)}};function ro(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Rl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cc(){}function Wp(e,t,n,r,l){if(l){if(typeof r=="function"){var i=r;r=function(){var p=jl(a);i.call(p)}}var a=rh(t,r,e,0,null,!1,!1,"",Cc);return e._reactRootContainer=a,e[Yt]=a.current,qs(e.nodeType===8?e.parentNode:e),Fn(),a}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var o=r;r=function(){var p=jl(c);o.call(p)}}var c=to(e,0,!1,null,null,!1,!1,"",Cc);return e._reactRootContainer=c,e[Yt]=c.current,qs(e.nodeType===8?e.parentNode:e),Fn(function(){_l(t,c,n,r)}),c}function Il(e,t,n,r,l){var i=n._reactRootContainer;if(i){var a=i;if(typeof l=="function"){var o=l;l=function(){var c=jl(a);o.call(c)}}_l(t,a,e,l)}else a=Wp(n,t,e,l,r);return jl(a)}$u=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$s(t.pendingLanes);n!==0&&(Sa(t,n|1),ot(t,Fe()),!(ue&6)&&(ps=Fe()+500,Sn()))}break;case 13:Fn(function(){var r=Gt(e,1);if(r!==null){var l=tt();Dt(r,e,1,l)}}),no(e,1)}};ka=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var n=tt();Dt(t,e,134217728,n)}no(e,134217728)}};Ru=function(e){if(e.tag===13){var t=gn(e),n=Gt(e,t);if(n!==null){var r=tt();Dt(n,e,t,r)}no(e,t)}};Iu=function(){return pe};Fu=function(e,t){var n=pe;try{return pe=e,t()}finally{pe=n}};Di=function(e,t,n){switch(t){case"input":if(ki(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=Cl(r);if(!l)throw Error(L(90));pu(r),ki(r,l)}}}break;case"textarea":vu(e,n);break;case"select":t=n.value,t!=null&&ns(e,!!n.multiple,t,!1)}};Su=Za;ku=Fn;var Vp={usingClientEntryPoint:!1,Events:[dr,Gn,Cl,wu,Nu,Za]},Cs={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qp={bundleType:Cs.bundleType,version:Cs.version,rendererPackageName:Cs.rendererPackageName,rendererConfig:Cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Eu(e),e===null?null:e.stateNode},findFiberByHostInstance:Cs.findFiberByHostInstance||Up,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$r.isDisabled&&$r.supportsFiber)try{Nl=$r.inject(Qp),At=$r}catch{}}pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vp;pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ro(t))throw Error(L(200));return Bp(e,t,null,n)};pt.createRoot=function(e,t){if(!ro(e))throw Error(L(299));var n=!1,r="",l=lh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=to(e,1,!1,null,null,n,!1,r,l),e[Yt]=t.current,qs(e.nodeType===8?e.parentNode:e),new so(t)};pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=Eu(t),e=e===null?null:e.stateNode,e};pt.flushSync=function(e){return Fn(e)};pt.hydrate=function(e,t,n){if(!Rl(t))throw Error(L(200));return Il(null,e,t,!0,n)};pt.hydrateRoot=function(e,t,n){if(!ro(e))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,l=!1,i="",a=lh;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=rh(t,null,e,1,n??null,l,!1,i,a),e[Yt]=t.current,qs(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new $l(t)};pt.render=function(e,t,n){if(!Rl(t))throw Error(L(200));return Il(null,e,t,!1,n)};pt.unmountComponentAtNode=function(e){if(!Rl(e))throw Error(L(40));return e._reactRootContainer?(Fn(function(){Il(null,null,e,!1,function(){e._reactRootContainer=null,e[Yt]=null})}),!0):!1};pt.unstable_batchedUpdates=Za;pt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Rl(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return Il(e,t,n,!1,r)};pt.version="18.3.1-next-f1338f8080-20240426";function ih(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ih)}catch(e){console.error(e)}}ih(),iu.exports=pt;var Kp=iu.exports,Ec=Kp;gi.createRoot=Ec.createRoot,gi.hydrateRoot=Ec.hydrateRoot;const Fl=4;function Yp(e,t=Fl){return((e-t)%24+24)%24}function Gp(e,t=Fl){const n=new Date(e);return n.getHours()<t&&n.setDate(n.getDate()-1),n.setHours(t,0,0,0),n.getTime()}function Xp({api:e}){const[t,n]=d.useState(null),[r,l]=d.useState(0),[i,a]=d.useState("strict"),[o,c]=d.useState(25),[p,x]=d.useState(5),[j,m]=d.useState(5),[w,g]=d.useState([]),[N,R]=d.useState([]),[f,h]=d.useState(""),[u,y]=d.useState(!1);d.useEffect(()=>{e.pomodoro.status().then(b=>{b&&(n(b),l(b.remainingMs),a(b.mode))});const _=e.events.on("pomodoro:tick",b=>{n(I=>I?{...I,...b}:b),l(b.remainingMs)}),O=e.events.on("pomodoro:start",b=>{n(b),l(b.remainingMs),a(b.mode)}),Z=e.events.on("pomodoro:stop",()=>{n(null),l(0)}),K=e.events.on("pomodoro:pause",b=>n(b)),X=e.events.on("pomodoro:resume",b=>n(b));return()=>{_(),O(),Z(),K(),X()}},[e]),d.useEffect(()=>{e.settings.categorisation().then(_=>{const O=(_?.productive??[]).map(I=>({value:I,kind:"site"})),Z=[{value:"docs.google.com",kind:"site"},{value:"notion.so",kind:"site"},{value:"linear.app",kind:"site"},{value:"github.com",kind:"site"},{value:"stackoverflow.com",kind:"site"}],K=[...O,...Z],X=[],b=new Set;for(const I of K){const H=`${I.kind}:${I.value.toLowerCase()}`;b.has(H)||(b.add(H),X.push(I))}R(X),g(X.slice(0,3))}).catch(()=>{R([{value:"docs.google.com",kind:"site"},{value:"notion.so",kind:"site"},{value:"linear.app",kind:"site"}]),g([{value:"docs.google.com",kind:"site"},{value:"notion.so",kind:"site"},{value:"linear.app",kind:"site"}])})},[e.settings]);const S=d.useMemo(()=>{const _=t?r:o*60*1e3,O=Math.max(0,Math.round(_/1e3)),Z=Math.floor(O/60),K=O%60;return`${Z.toString().padStart(2,"0")}:${K.toString().padStart(2,"0")}`},[r,o,t]);async function P(){try{y(!0);const _=w.map((K,X)=>({id:`${K.value}-${X}`,kind:K.kind,value:K.value})),O={durationSec:o*60,breakDurationSec:p*60,mode:i,allowlist:_,temporaryUnlockSec:j*60},Z=await e.pomodoro.start(O);n(Z),l(Z.remainingMs)}catch(_){console.error("Failed to start pomodoro",_)}finally{y(!1)}}function v(_){const O=_.trim();O&&(w.some(Z=>Z.value.toLowerCase()===O.toLowerCase())||g(Z=>[...Z,{value:O,kind:"site"}]))}function C(_){g(O=>O.filter(Z=>Z.value!==_))}async function D(_="canceled"){y(!0);try{await e.pomodoro.stop(_),n(null),l(0)}catch(O){console.error("Failed to stop pomodoro",O)}finally{y(!1)}}async function $(){y(!0);try{const _=await e.pomodoro.pause();n(_)}catch(_){console.error(_)}finally{y(!1)}}async function Y(){y(!0);try{const _=await e.pomodoro.resume();n(_)}catch(_){console.error(_)}finally{y(!1)}}async function J(){y(!0);try{const _=await e.pomodoro.startBreak(p*60);n(_)}catch(_){console.error(_)}finally{y(!1)}}return s.jsxs("div",{className:"card pomodoro-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Pomodoro"}),s.jsx("h2",{children:"Allowlist focus"})]}),s.jsx("span",{className:"pill ghost",children:t?t.mode:i})]}),s.jsxs("div",{className:"pomodoro-grid",children:[s.jsxs("div",{className:"pomodoro-timer",children:[s.jsxs("div",{className:"pomodoro-face",children:[s.jsx("span",{className:"pomodoro-time",children:S}),s.jsx("span",{className:"pomodoro-label",children:t?t.state:"idle"})]}),s.jsx("div",{className:"pomodoro-controls",children:t?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>D("canceled"),disabled:u,className:"ghost",children:"End"}),t.state==="paused"?s.jsx("button",{onClick:Y,disabled:u,className:"primary",children:"Resume"}):s.jsx("button",{onClick:$,disabled:u,className:"ghost",children:"Pause"}),s.jsx("button",{onClick:J,disabled:u,className:"ghost",children:"Start break"})]}):s.jsx("button",{onClick:P,disabled:u,className:"primary",children:"Start focus"})})]}),s.jsxs("div",{className:"pomodoro-config",children:[s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Duration (minutes)"}),s.jsx("input",{type:"number",min:5,max:180,value:o,onChange:_=>c(Number(_.target.value)||0)})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Break length (minutes)"}),s.jsx("input",{type:"number",min:1,max:60,value:p,onChange:_=>x(Number(_.target.value)||0)})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Mode"}),s.jsxs("div",{className:"segmented",children:[s.jsx("button",{className:i==="strict"?"active":"",onClick:()=>a("strict"),children:"Strict"}),s.jsx("button",{className:i==="soft"?"active":"",onClick:()=>a("soft"),children:"Soft"})]})]}),s.jsxs("label",{className:"field",children:[s.jsx("span",{children:"Soft unlock minutes"}),s.jsx("input",{type:"number",min:1,max:30,value:j,onChange:_=>m(Number(_.target.value)||0)})]}),s.jsxs("label",{className:"field",children:[s.jsxs("div",{className:"field-label",children:[s.jsx("span",{children:"Allowlist"}),s.jsx("span",{className:"info-tooltip",title:"Add productive domains in the Domains section!",children:"?"})]}),s.jsxs("div",{className:"allowlist-picker",children:[s.jsxs("select",{value:"",onChange:_=>{v(_.target.value)},children:[s.jsx("option",{value:"",disabled:!0,children:"Select a site"}),N.filter(_=>!w.some(O=>O.value===_.value&&O.kind===_.kind)).map(_=>s.jsx("option",{value:_.value,children:_.value},_.value))]}),s.jsxs("div",{className:"allowlist-custom",children:[s.jsx("input",{type:"text",placeholder:"custom site or app",value:f,onChange:_=>h(_.target.value)}),s.jsx("button",{type:"button",className:"ghost",onClick:()=>{v(f),h("")},disabled:!f.trim(),children:"Add"})]}),w.length>0&&s.jsx("div",{className:"allowlist-tags",children:w.map(_=>s.jsxs("span",{className:"pill",children:[_.value,s.jsx("button",{type:"button",className:"chip-remove",onClick:()=>C(_.value),"aria-label":`Remove ${_.value}`,children:""})]},_.value))})]})]})]})]})]})}const gt={productive:"var(--cat-productive)",neutral:"var(--cat-neutral)",frivolity:"var(--cat-frivolity)",draining:"var(--cat-draining)",idle:"var(--cat-idle)"};function Zp({summary:e,economy:t}){const[n,r]=d.useState("aggregate"),[l,i]=d.useState(null),a=d.useMemo(()=>{if(!e)return null;const g=e.totalsByCategory,N=[{key:"productive",label:"Productive",seconds:g.productive??0,color:gt.productive},{key:"neutral",label:"Neutral",seconds:(g.neutral??0)+(g.uncategorised??0),color:gt.neutral},{key:"frivolity",label:"Frivolity",seconds:g.frivolity??0,color:gt.frivolity},{key:"draining",label:"Draining",seconds:g.draining??0,color:gt.draining},{key:"idle",label:"Idle",seconds:g.idle??0,color:gt.idle}].filter(u=>u.seconds>0),R=N.reduce((u,y)=>u+y.seconds,0);let f=-90;return{arcs:N.map(u=>{const y=R?u.seconds/R*360:0,S=Pc(150,150,120,f,f+y);return f+=y,{path:S,color:u.color,label:u.label,seconds:u.seconds}}),slices:N,totalSeconds:Math.max(0,R)}},[e]),o=d.useMemo(()=>{if(!e||e.timeline.length===0)return{arcs:[],centerSeconds:0};const g=360/e.timeline.length,N=(e.windowHours??24)*3600,R=e.timeline.map((h,u)=>{const y=u*g-90,S=y+g,P=Pc(150,150,120,y,S),v=gt[h.dominant]??gt.neutral;return{path:P,color:v,label:h.hour,slot:h,seconds:h.productive+h.neutral+h.frivolity+h.draining+h.idle}}),f=Math.min(N,(e.totalSeconds??0)+(e.totalsByCategory.idle??0));return{arcs:R,centerSeconds:f}},[e]);if(!e)return s.jsxs("article",{className:"card compass-card",children:[s.jsx("h2",{children:"Day compass"}),s.jsx("p",{className:"subtle",children:"We need at least one tracked session to build your orbit."})]});const c=n==="timeline"?l!==null?e.timeline[l]:e.timeline[e.timeline.length-1]:null,p=c?.dominant,x=n==="aggregate"?a?.slices??[]:c?[{label:"Productive",seconds:c.productive,color:gt.productive},{label:"Neutral",seconds:c.neutral,color:gt.neutral},{label:"Frivolity",seconds:c.frivolity,color:gt.frivolity},{label:"Draining",seconds:c.draining,color:gt.draining},{label:"Idle",seconds:c.idle,color:gt.idle}]:[],j=(e?.windowHours??24)*3600,m=n==="aggregate"?Math.min(j,a?.totalSeconds??0):o.centerSeconds,w=n==="aggregate"?a?.arcs??[]:o.arcs;return s.jsxs("article",{className:"card compass-card",children:[s.jsxs("div",{className:"card-header-row compass-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Day diagram"}),s.jsx("h2",{children:"Orbit of attention"})]}),s.jsxs("div",{className:"compass-controls",children:[s.jsxs("div",{className:"compass-toggle",children:[s.jsx("button",{className:n==="aggregate"?"active":"",onClick:()=>{r("aggregate"),i(null)},children:"Total day"}),s.jsx("button",{className:n==="timeline"?"active":"",onClick:()=>{r("timeline"),i(null)},children:"24h orbit"})]}),s.jsxs("span",{className:"pill ghost",children:[t?.activeCategory??"idle","  live"]})]})]}),s.jsxs("div",{className:"compass-body",children:[s.jsxs("div",{className:"compass-visual",children:[s.jsxs("svg",{viewBox:"0 0 300 300",role:"img","aria-label":"Day compass",children:[s.jsx("circle",{cx:"150",cy:"150",r:"140",fill:"rgba(255,255,255,0.02)",stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"}),w.map((g,N)=>s.jsx("path",{d:g.path,fill:g.color,opacity:l!==null&&l!==N?.35:.92,onMouseEnter:()=>i(N),onMouseLeave:()=>i(null)},`${g.label}-${N}`)),s.jsx("circle",{cx:"150",cy:"150",r:"80",fill:"var(--bg-soft)",stroke:"rgba(255,255,255,0.08)",strokeWidth:"2"}),s.jsx("text",{x:"150",y:"140",textAnchor:"middle",className:"compass-center",children:qp(m)}),s.jsx("text",{x:"150",y:"165",textAnchor:"middle",className:"compass-center-sub",children:n==="aggregate"?"hours captured":`${e.windowHours}h window`})]}),n==="timeline"&&c&&s.jsxs("div",{className:"compass-tooltip",children:[s.jsxs("div",{children:[s.jsx("span",{className:"tooltip-hour",children:c.hour}),s.jsx("span",{className:"tooltip-dominant",children:p})]}),c.topContext?s.jsxs("p",{children:[c.topContext.label,s.jsx("br",{}),s.jsxs("small",{children:[Math.round(c.topContext.seconds/60)," min captured"]})]}):s.jsx("p",{children:"No activity recorded"})]})]}),s.jsx("div",{className:"compass-details",children:x.map(g=>s.jsxs("div",{className:"detail-row",children:[s.jsxs("div",{className:"legend-chip",children:[s.jsx("span",{style:{background:g.color}}),s.jsx("span",{children:g.label})]}),s.jsx("strong",{children:Jp(g.seconds)})]},g.label))})]})]})}function Pc(e,t,n,r,l){const i=Mc(e,t,n,l),a=Mc(e,t,n,r),o=l-r<=180?"0":"1";return["M",i.x,i.y,"A",n,n,0,o,0,a.x,a.y,"L",e,t,"Z"].join(" ")}function Mc(e,t,n,r){const l=r*Math.PI/180;return{x:e+n*Math.cos(l),y:t+n*Math.sin(l)}}function Jp(e){return e?`${Math.round(e/60)}m`:"0m"}function qp(e){const t=Math.max(0,e)/3600;return`${Math.round(t*10)/10}h`}function em({activities:e,summary:t}){const n={productive:"var(--cat-productive)",neutral:"var(--cat-neutral)",frivolity:"var(--cat-frivolity)",draining:"var(--cat-draining)",idle:"var(--cat-idle)"},[r,l]=d.useState(null),i=Date.now()-24*60*60*1e3,a=d.useMemo(()=>{if(t){const P=t.totalsByCategory,v=P.productive??0,C=(P.neutral??0)+(P.uncategorised??0),D=P.frivolity??0,$=P.draining??0,Y=P.idle??0;return{total:v+C+D+$+Y,byCategory:{productive:v,neutral:C,frivolity:D,draining:$,idle:Y}}}const f=e.filter(P=>new Date(P.startedAt).getTime()>=i),h=f.reduce((P,v)=>P+v.secondsActive,0),u=f.reduce((P,v)=>P+v.idleSeconds,0),y=h+u,S={productive:0,neutral:0,frivolity:0,draining:0,idle:0};return f.forEach(P=>{const v=P.category||"neutral";S[v]=(S[v]||0)+P.secondsActive}),S.idle=u,{total:y,byCategory:S}},[e,t,i]),o=d.useMemo(()=>{const f={productive:[],neutral:[],frivolity:[],draining:[],idle:[]};if(t?.topContexts)t.topContexts.forEach(h=>{if(!h.category)return;const u=h.category;f[u].push({label:h.label,seconds:h.seconds})});else{const h=e.filter(y=>new Date(y.startedAt).getTime()>=i),u=new Map;h.forEach(y=>{const P=y.category||"neutral",v=y.domain??y.appName??"Unknown",C=`${P}:${v}`;u.has(C)||u.set(C,{label:v,cat:P,seconds:0});const D=u.get(C);D.seconds+=y.secondsActive}),u.forEach(y=>f[y.cat].push({label:y.label,seconds:y.seconds}))}return Object.keys(f).forEach(h=>{f[h]=f[h].sort((u,y)=>y.seconds-u.seconds)}),f},[e,t,i]);if(a.total===0)return s.jsx("div",{className:"card",style:{alignItems:"center",justifyContent:"center",minHeight:"240px"},children:s.jsx("p",{className:"subtle",children:"No activity recorded yet"})});let c=0;const p=90,x=110,m=Object.entries(a.byCategory).map(([f,h])=>{const u=h/a.total,y=u*360,S=x+p*Math.cos(Math.PI*c/180),P=x+p*Math.sin(Math.PI*c/180),v=x+p*Math.cos(Math.PI*(c+y)/180),C=x+p*Math.sin(Math.PI*(c+y)/180),D=y>180?1:0,$=[`M ${x} ${x}`,`L ${S} ${P}`,`A ${p} ${p} 0 ${D} 1 ${v} ${C}`,"Z"].join(" ");return c+=y,{category:f,path:$,color:n[f]||n.neutral,percentage:Math.round(u*100)}}),w=t?.topContexts?.[0],g=r,N=g?a.byCategory[g]??0:0,R=g&&a.total>0?Math.round(N/a.total*100):0;return s.jsxs("div",{className:"card activity-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Time distribution"}),s.jsx("p",{className:"subtle",children:"Blended from desktop apps and the extension feed."})]}),w&&s.jsxs("div",{className:"pill ghost",children:[w.label,"  ",Math.round(w.seconds/60),"m"]})]}),s.jsxs("div",{className:"activity-chart",style:{position:"relative",overflow:"visible"},children:[g&&s.jsxs("div",{className:"activity-tooltip",style:{position:"absolute",top:"50%",left:"260px",transform:"translateY(-50%)",background:"var(--bg-raised, #12141a)",border:`1px solid ${n[g]}`,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",zIndex:100,padding:"14px 16px",borderRadius:"10px",minWidth:"200px",maxWidth:"260px",lineHeight:1.45,fontSize:"13px",color:"var(--fg, #f0f0f0)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",paddingBottom:"10px",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[s.jsx("span",{style:{width:"10px",height:"10px",borderRadius:"50%",background:n[g],flexShrink:0}}),s.jsx("strong",{style:{textTransform:"capitalize",fontSize:"14px"},children:g}),s.jsxs("span",{style:{marginLeft:"auto",opacity:.6,fontSize:"12px"},children:[R,"%"]})]}),s.jsxs("div",{style:{marginBottom:"10px",fontSize:"11px",opacity:.7},children:[Tc(N)," total"]}),s.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0,maxHeight:"160px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"3px"},children:[o[g]?.length===0&&s.jsx("li",{style:{opacity:.5,fontSize:"12px"},children:"No entries"}),o[g]?.slice(0,6).map(f=>s.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px 6px",borderRadius:"4px",background:"rgba(255,255,255,0.04)",fontSize:"12px"},children:[s.jsx("span",{style:{maxWidth:"60%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:f.label}),s.jsxs("span",{style:{opacity:.6,fontSize:"11px"},children:[Math.round(f.seconds/60),"m"]})]},`${g}-${f.label}`))]})]}),s.jsxs("div",{className:"donut-shell",style:{position:"relative"},children:[s.jsx("div",{className:"donut-glow"}),s.jsxs("svg",{width:"240",height:"240",viewBox:"0 0 220 220",children:[m.map(f=>s.jsx("path",{d:f.path,fill:f.color,stroke:"rgba(255,255,255,0.14)",strokeWidth:"2",onMouseEnter:()=>l(f.category),onMouseLeave:()=>l(null)},f.category)),s.jsx("circle",{cx:x,cy:x,r:p*.6,fill:"var(--bg-soft)"})]}),s.jsxs("div",{className:"donut-center",children:[s.jsx("strong",{children:Tc(a.total)}),s.jsx("span",{children:"logged"})]})]}),s.jsx("ul",{className:"detail-list",style:{flex:1},children:m.map(f=>s.jsxs("li",{onMouseEnter:()=>l(f.category),onMouseLeave:()=>l(null),children:[s.jsxs("div",{className:"legend-chip",children:[s.jsx("span",{style:{width:"12px",height:"12px",borderRadius:"50%",background:f.color}}),s.jsx("span",{style:{textTransform:"capitalize"},children:f.category})]}),s.jsxs("div",{className:"legend-values",children:[s.jsxs("strong",{children:[f.percentage,"%"]}),s.jsxs("span",{className:"subtle",children:[Math.round((a.byCategory[f.category]??0)/60),"m"]})]})]},f.category))})]})]})}function Tc(e){const t=Math.max(0,Math.round(e/60)),n=Math.floor(t/60),r=t%60;return`${n}h ${r}m`}const Dc={productive:"Productive",neutral:"Neutral",frivolity:"Frivolity",draining:"Draining",idle:"Idle"};function tm({journey:e,loading:t,isRemote:n}){const r=d.useMemo(()=>e?e.segments.reduce((i,a)=>i+a.seconds,0):0,[e]);if(!e||e.segments.length===0)return s.jsxs("div",{className:"card journey-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Day journey"}),s.jsx("h2",{children:"Attention trail"})]}),s.jsx("span",{className:"pill ghost",children:t?"Loading...":n?"Local device only":"Local device"})]}),s.jsx("p",{className:"subtle",children:n?"Journey data is available on the active device.":"No activity recorded in this window yet."})]});const l=e.neutralCounts??[];return s.jsxs("div",{className:"card journey-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Day journey"}),s.jsx("h2",{children:"Attention trail"})]}),s.jsxs("span",{className:"pill ghost",children:[e.windowHours,"h window"]})]}),s.jsxs("div",{className:"journey-layout",children:[s.jsxs("div",{className:"journey-bar-wrap",children:[s.jsx("div",{className:"journey-bar",role:"img","aria-label":"Timeline of context switches",children:e.segments.map((i,a)=>{const o=r>0?i.seconds/r*100:0,c=i.label??"",p=[c||Dc[i.category]||"Session",`${Lc(i.seconds)} active`].join(" - ");return s.jsx("div",{className:`journey-seg ${i.category}`,style:{flexGrow:i.seconds},title:p,children:c&&o>=6?s.jsx("span",{children:c}):null},`${i.start}-${a}`)})}),s.jsx("div",{className:"journey-legend",children:["productive","neutral","draining","frivolity","idle"].map(i=>s.jsxs("span",{className:"legend-chip",children:[s.jsx("span",{className:`dot ${i}`}),Dc[i]]},i))})]}),s.jsxs("div",{className:"journey-neutral",children:[s.jsx("span",{className:"label",children:"Neutral touchpoints"}),l.length===0?s.jsx("span",{className:"subtle",children:"No neutral apps surfaced yet."}):s.jsx("div",{className:"journey-neutral-list",children:l.slice(0,5).map(i=>s.jsxs("div",{className:"journey-neutral-row",children:[s.jsx("span",{children:i.label}),s.jsxs("span",{className:"subtle",children:[i.count,"  ",Lc(i.seconds)]})]},i.label))})]})]})]})}function Lc(e){return`${Math.max(1,Math.round(e/60))}m`}const nm=8,sm=14,_c=32,fi=520,Hn=24;function rm({journey:e,loading:t,isRemote:n}){const[r,l]=d.useState("flow"),{nodes:i,transitions:a}=d.useMemo(()=>{if(!e?.segments?.length)return{nodes:[],transitions:[]};const g=e.segments.filter(u=>!!u.label);if(g.length<2)return{nodes:[],transitions:[]};const N=new Map;for(let u=1;u<g.length;u+=1){const y=g[u-1].label??"",S=g[u].label??"";if(!y||!S||y===S)continue;const P=`${y}->${S}`,v=N.get(P);v?v.count+=1:N.set(P,{from:y,to:S,count:1})}const R=new Map;for(const u of N.values())R.set(u.from,(R.get(u.from)??0)+u.count),R.set(u.to,(R.get(u.to)??0)+u.count);const f=Array.from(R.entries()).sort((u,y)=>y[1]-u[1]).slice(0,nm).map(([u])=>u),h=Array.from(N.values()).filter(u=>f.includes(u.from)&&f.includes(u.to)).sort((u,y)=>y.count-u.count).slice(0,sm);return{nodes:f,transitions:h}},[e]),o=d.useMemo(()=>e?.segments?.length?e.segments.filter(N=>!!N.label).slice(-36):[],[e]),c=a.reduce((g,N)=>Math.max(g,N.count),1),p=Math.max(220,i.length*_c+Hn*2),x=140,j=fi-140,m=fi/2,w=new Map;return i.forEach((g,N)=>{w.set(g,Hn+N*_c)}),!e||e.segments.length===0?s.jsxs("div",{className:"card attention-map-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Attention map"}),s.jsx("h2",{children:"Context flow"})]}),s.jsx("span",{className:"pill ghost",children:t?"Loading...":n?"Local device only":"Local device"})]}),s.jsx("p",{className:"subtle",children:n?"Flow maps are generated on the active device.":"No activity recorded in this window yet."})]}):s.jsxs("div",{className:"card attention-map-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Attention map"}),s.jsx("h2",{children:"Context flow"})]}),s.jsxs("div",{className:"attention-map-controls",children:[s.jsx("button",{type:"button",className:`pill ghost ${r==="flow"?"active":""}`,onClick:()=>l("flow"),children:"Flow map"}),s.jsx("button",{type:"button",className:`pill ghost ${r==="path"?"active":""}`,onClick:()=>l("path"),children:"Day path"})]})]}),r==="flow"?s.jsxs("div",{className:"attention-map",children:[i.length===0||a.length===0?s.jsx("p",{className:"subtle",children:"Not enough context changes yet."}):s.jsxs("svg",{className:"attention-map-svg",viewBox:`0 0 ${fi} ${p}`,preserveAspectRatio:"xMidYMid meet",role:"img","aria-label":"Most common context switches",children:[s.jsx("defs",{children:s.jsx("marker",{id:"arrow",markerWidth:"8",markerHeight:"8",refX:"6",refY:"3",orient:"auto",children:s.jsx("path",{d:"M0,0 L6,3 L0,6",fill:"currentColor"})})}),a.map(g=>{const N=w.get(g.from)??Hn,R=w.get(g.to)??Hn,f=1+g.count/c*6,h=`M ${x} ${N} C ${m} ${N}, ${m} ${R}, ${j} ${R}`;return s.jsx("path",{d:h,className:"attention-map-link",strokeWidth:f,markerEnd:"url(#arrow)"},`${g.from}-${g.to}`)}),i.map(g=>{const N=w.get(g)??Hn;return s.jsxs("g",{children:[s.jsx("circle",{cx:x,cy:N,r:4,className:"attention-map-node"}),s.jsx("text",{x:x-12,y:N+4,textAnchor:"end",className:"attention-map-label",children:g})]},`left-${g}`)}),i.map(g=>{const N=w.get(g)??Hn;return s.jsxs("g",{children:[s.jsx("circle",{cx:j,cy:N,r:4,className:"attention-map-node"}),s.jsx("text",{x:j+12,y:N+4,textAnchor:"start",className:"attention-map-label",children:g})]},`right-${g}`)})]}),a.length>0&&s.jsx("div",{className:"attention-map-list",children:a.map(g=>s.jsxs("div",{className:"attention-map-row",children:[s.jsx("span",{children:g.from}),s.jsx("span",{className:"subtle",children:"->"}),s.jsx("span",{children:g.to}),s.jsxs("span",{className:"attention-map-count",children:[g.count,"x"]})]},`list-${g.from}-${g.to}`))})]}):s.jsxs("div",{className:"attention-path",children:[o.length===0?s.jsx("p",{className:"subtle",children:"Not enough labeled context yet."}):s.jsx("div",{className:"attention-path-strip",children:o.map((g,N)=>s.jsxs("div",{className:"attention-path-item",children:[s.jsx("span",{className:`attention-chip ${g.category}`,children:g.label}),s.jsx("span",{className:"subtle",children:lm(g.start)})]},`${g.start}-${N}`))}),s.jsx("p",{className:"subtle",children:"Showing recent labeled contexts in order."})]})]})}function lm(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function im({api:e,overview:t,loading:n,onRefresh:r}){const l=typeof t<"u"||typeof n<"u",[i,a]=d.useState(null),[o,c]=d.useState(!0),[p,x]=d.useState([]),j=d.useCallback(async()=>{if(r){r();return}c(!0);try{const h=await e.analytics.overview(7);a(h)}catch(h){console.error("Failed to load insights:",h)}c(!1)},[e,r]);d.useEffect(()=>{l||j()},[l,j]),d.useEffect(()=>{e.settings.excludedKeywords().then(x).catch(()=>{})},[e]);const m=l?t??null:i,w=l?!!n:o,g=h=>{const u=h>=12?"PM":"AM";return`${h%12||12}${u}`};if(w)return s.jsxs("div",{className:"card insights-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:"Insights"}),s.jsx("span",{className:"loading-spinner"})]}),s.jsxs("div",{className:"insights-loading",children:[s.jsx("div",{className:"skeleton skeleton-text"}),s.jsx("div",{className:"skeleton skeleton-text short"}),s.jsx("div",{className:"skeleton skeleton-text"})]})]});if(!m)return null;const N=m.focusTrend==="improving"?"":m.focusTrend==="declining"?"":"",R=m.focusTrend==="improving"?"Improving":m.focusTrend==="declining"?"Declining":"Stable",f=h=>{if(!p.length)return h;let u=h;for(const y of p){if(!y)continue;const S=y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");u=u.replace(new RegExp(S,"gi"),"[hidden]")}return u};return s.jsxs("div",{className:"card insights-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:"Insights"}),s.jsx("button",{className:"pill ghost",onClick:j,disabled:w,children:"Refresh"})]}),s.jsxs("div",{className:"insights-summary",children:[s.jsxs("div",{className:"insight-metric",children:[s.jsxs("span",{className:"insight-value",children:[m.productivityScore,"%"]}),s.jsx("span",{className:"insight-label",children:"Productivity"})]}),s.jsxs("div",{className:"insight-metric",children:[s.jsx("span",{className:"insight-value",children:g(m.peakProductiveHour)}),s.jsx("span",{className:"insight-label",children:"Peak hour"})]}),s.jsxs("div",{className:"insight-metric",children:[s.jsx("span",{className:"insight-value",children:N}),s.jsx("span",{className:"insight-label",children:R})]})]}),s.jsxs("ul",{className:"insights-list",children:[m.insights.map((h,u)=>s.jsx("li",{className:"insight-item",children:f(h)},u)),m.insights.length===0&&s.jsx("li",{className:"insight-item subtle",children:"Not enough data yet. Keep tracking your activity!"})]}),m.riskHour!==m.peakProductiveHour&&s.jsxs("div",{className:"insight-warning",children:[s.jsx("span",{className:"warning-icon",children:""}),s.jsxs("span",{children:["Watch out at ",s.jsx("strong",{children:g(m.riskHour)})," - that's when you're most likely to get distracted."]})]})]})}function ah({open:e,friend:t,summary:n,timeline:r,publicLibraryItems:l=[],trophies:i=[],onClose:a}){if(!e||!t)return null;const o=r?.totalsByCategory??n?.categoryBreakdown??null,c=n?.totalActiveSeconds??0,p=n?.productivityScore??0,x=new Map(i.map(m=>[m.id,m])),j=(t.pinnedTrophies??[]).map(m=>x.get(m)).filter(m=>!!m);return s.jsx("div",{className:"friend-modal-overlay",onClick:a,children:s.jsxs("div",{className:"friend-modal",onClick:m=>m.stopPropagation(),children:[s.jsxs("div",{className:"friend-modal-header",children:[s.jsxs("div",{children:[s.jsx("h3",{children:t.displayName??t.handle??"Friend"}),s.jsxs("p",{className:"subtle",children:["@",t.handle??"no-handle"]})]}),s.jsx("button",{className:"ghost",onClick:a,children:"Close"})]}),s.jsxs("div",{className:"friend-modal-metrics",children:[s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Productivity"}),s.jsx("strong",{children:n?`${p}%`:"--"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Active time"}),s.jsx("strong",{children:n?Bn(c):"--"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Updated"}),s.jsx("strong",{children:n?new Date(n.updatedAt).toLocaleTimeString():"--"})]})]}),j.length>0&&s.jsx("div",{className:"friends-trophies",children:j.slice(0,4).map(m=>s.jsxs("span",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:m.emoji}),m.name]},m.id))}),o&&s.jsxs("div",{className:"friend-modal-breakdown",children:[s.jsxs("div",{className:"friend-modal-break-row",children:[s.jsx("span",{children:"Productive"}),s.jsx("span",{children:Bn(o.productive)})]}),s.jsxs("div",{className:"friend-modal-bar",children:[s.jsx("span",{className:"cat-productive",style:{width:`${Es(o,"productive")}%`}}),s.jsx("span",{className:"cat-neutral",style:{width:`${Es(o,"neutral")}%`}}),s.jsx("span",{className:"cat-frivolity",style:{width:`${Es(o,"frivolity")}%`}}),s.jsx("span",{className:"cat-draining",style:{width:`${Es(o,"draining")}%`}}),s.jsx("span",{className:"cat-idle",style:{width:`${Es(o,"idle")}%`}})]}),s.jsxs("div",{className:"friend-modal-break-row",children:[s.jsx("span",{children:"Neutral"}),s.jsx("span",{children:Bn(o.neutral)})]}),s.jsxs("div",{className:"friend-modal-break-row",children:[s.jsx("span",{children:"Frivolity"}),s.jsx("span",{children:Bn(o.frivolity)})]}),s.jsxs("div",{className:"friend-modal-break-row",children:[s.jsx("span",{children:"Draining"}),s.jsx("span",{children:Bn(o.draining??0)})]}),s.jsxs("div",{className:"friend-modal-break-row",children:[s.jsx("span",{children:"Idle"}),s.jsx("span",{children:Bn(o.idle)})]})]}),l.length>0&&s.jsxs("div",{className:"friend-modal-library",children:[s.jsxs("div",{className:"friend-modal-timeline-header",style:{marginBottom:12},children:[s.jsx("span",{className:"label",children:"Public library"}),s.jsx("span",{className:"subtle",children:"Shared links"})]}),s.jsx("div",{className:"friend-modal-library-list",children:l.map(m=>{const w=m.title??m.domain??m.url;return s.jsxs("div",{className:"friend-modal-library-item",children:[s.jsxs("div",{className:"friend-modal-library-main",children:[s.jsx("strong",{children:w}),s.jsx("span",{className:"subtle",children:m.note??m.url})]}),s.jsxs("div",{className:"friend-modal-library-meta",children:[s.jsxs("span",{children:["Added ",om(m.createdAt)]}),typeof m.price=="number"&&s.jsxs("span",{children:[m.price," f-coins"]}),s.jsx("a",{className:"ghost",href:m.url,target:"_blank",rel:"noopener noreferrer",children:"Open"})]})]},m.id)})})]}),s.jsxs("div",{className:"friend-modal-timeline",children:[s.jsxs("div",{className:"friend-modal-timeline-header",children:[s.jsxs("span",{className:"label",children:["Last ",r?.windowHours??24,"h"]}),s.jsx("span",{className:"subtle",children:"Dominant attention per hour"})]}),s.jsx("div",{className:"friend-modal-timeline-bars",children:(r?.timeline??[]).map((m,w)=>{const g=m.productive+m.neutral+m.frivolity+m.draining+m.idle,N=g===0?8:Math.max(12,Math.min(52,Math.round(g/am(r)*52))),R=m.dominant;return s.jsx("div",{className:"friend-modal-bar-col",title:`${m.hour}`,children:s.jsx("span",{className:`friend-modal-bar-fill cat-${R}`,style:{height:`${N}px`}})},`${m.start}-${w}`)})})]})]})})}function Es(e,t){const n=e.productive+e.neutral+e.frivolity+(e.draining??0)+e.idle,r=e[t]??0;return n>0?Math.round(r/n*100):0}function Bn(e){const t=e/3600;return t>=10?`${t.toFixed(0)}h`:`${t.toFixed(1)}h`}function am(e){return!e||e.timeline.length===0?1:Math.max(...e.timeline.map(t=>t.productive+t.neutral+t.frivolity+t.draining+t.idle),1)}function om(e){const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString([],{month:"short",day:"numeric"})}const $c=[{id:"focus",label:"Focus",hint:"Ring, streak, and core metrics"},{id:"signals",label:"Signals",hint:"Flow quality and attention telemetry"},{id:"journey",label:"Journey",hint:"Day timeline and orbit map"},{id:"social",label:"Social",hint:"Friends and trophy highlights"}];function cm({api:e,wallet:t,economy:n,productivityGoalHoursOverride:r}){const[l,i]=d.useState([]),[a,o]=d.useState(null),[c,p]=d.useState(!0),[x,j]=d.useState(null),[m,w]=d.useState(!0),[g,N]=d.useState(null),[R,f]=d.useState(!1),[h,u]=d.useState(null),[y,S]=d.useState(Date.now()),[P,v]=d.useState([]),[C,D]=d.useState(null),[$,Y]=d.useState(null),[J,_]=d.useState([]),[O,Z]=d.useState({}),[K,X]=d.useState(!1),[b,I]=d.useState(null),[H,z]=d.useState(null),[te,oe]=d.useState(null),[U,ne]=d.useState(null),[se,re]=d.useState([]),[me,_e]=d.useState(!1),[$e,Ce]=d.useState([]),[Je,F]=d.useState(null),[W,ae]=d.useState(null),[q,ge]=d.useState("productivity"),[Ee,V]=d.useState(null),[xe,ye]=d.useState([]),[T,ie]=d.useState(!1),[fe,ve]=d.useState(!1),[Ie,Ne]=d.useState(2),[Se,he]=d.useState(()=>{try{const k=window.localStorage.getItem("tws-dashboard-scene");if(k&&$c.some(A=>A.id===k))return k}catch{}return"focus"}),vt=d.useCallback(async(k=!1)=>{k||p(!0);const A=!!(C&&(C==="all"||$&&C!==$)),[ee,de,Me]=await Promise.all([A?Promise.resolve([]):e.activities.recent(30),e.activities.summary(24,C??void 0),A?Promise.resolve(null):e.activities.journey(24,C??void 0)]);i(ee),o(de),V(Me),p(!1)},[e,$,C]),E=d.useCallback(async()=>{w(!0);try{const k=await e.analytics.overview(7);j(k)}catch(k){console.error("Failed to load analytics overview:",k)}finally{w(!1)}},[e]),G=d.useCallback(async()=>{f(!1);try{const k=Date.now()-864e5,A=Bc(new Date),ee=Bc(new Date(Date.now()-24*60*60*1e3)),_t=(await Promise.all([e.history.list(A),e.history.list(ee)])).flat().filter($t=>$t.kind==="frivolous-session"&&Date.parse($t.occurredAt)>=k).length;u(_t);const Ht=await e.history.days(60);for(const $t of Ht){const yo=(await e.history.list($t.day)).find(yh=>yh.kind==="frivolous-session");if(yo){N(new Date(yo.occurredAt).getTime()),f(!0);return}}N(null)}catch(k){console.error("Failed to load frivolity history:",k),N(null),u(null)}finally{f(!0)}},[e]),je=d.useCallback(async()=>{try{const k=await e.sync.status(),A=k.configured&&k.authenticated?await e.sync.listDevices():[],ee=k.device?.id??null,de=A.map(Me=>({id:Me.id,name:Me.name,isCurrent:Me.id===ee}));v(de),Y(ee),ee&&!C&&D(ee)}catch(k){console.error("Failed to load devices",k)}},[e,C]),qe=d.useCallback(async()=>{try{const k=await e.sync.status();if(!k.configured||!k.authenticated){_([]),Z({}),X(!1);return}const[A,ee,de]=await Promise.all([e.friends.list(),e.friends.summaries(24),e.friends.meSummary(24)]);_(A),Z(ee),I(de);const Me=await e.friends.profile();z(Me),X(!0)}catch(k){console.error("Failed to load friends",k),_([]),Z({}),X(!1),I(null)}},[e]),ct=d.useCallback(async()=>{try{const[k,A]=await Promise.all([e.trophies.profile(),e.trophies.list()]);F(k),Ce(A)}catch(k){console.error("Failed to load trophies",k)}},[e]),Jt=d.useCallback(async k=>{oe(k),ne(null),re([]),_e(!0);try{const[A,ee]=await Promise.all([e.friends.timeline(k.userId,24),e.friends.publicLibrary(k.userId,168)]);ne(A),re(ee??[])}catch(A){console.error("Failed to load friend timeline",A)}},[e]);d.useEffect(()=>{vt(),E(),G(),je(),qe(),ct()},[vt,E,G,je,qe,ct]),d.useEffect(()=>{e.settings.excludedKeywords().then(ye).catch(()=>{})},[e]),d.useEffect(()=>{e.settings.competitiveOptIn().then(ie).catch(()=>{})},[e]),d.useEffect(()=>{e.settings.productivityGoalHours().then(Ne).catch(()=>{})},[e]),d.useEffect(()=>{try{window.localStorage.setItem("tws-dashboard-scene",Se)}catch{}},[Se]),d.useEffect(()=>{const k=e.events.on("economy:activity",()=>{vt(!0)}),A=e.events.on("paywall:session-started",()=>{N(Date.now()),f(!0)});return()=>{k(),A()}},[e,vt]),d.useEffect(()=>{const k=window.setInterval(()=>{S(Date.now())},1e3);return()=>window.clearInterval(k)},[]),d.useEffect(()=>{const k=e.events.on("trophies:earned",A=>{ae(A),ct(),window.setTimeout(()=>ae(null),6e3)});return()=>{k()}},[e,ct]);const qt=C==="all",Ot=!!(C&&$&&C!==$&&!qt),en=qt?"All devices":Ot?P.find(k=>k.id===C)?.name??"Remote device":n?.activeDomain??n?.activeApp??"Waiting...",tn=Ot?"neutral":n?.activeCategory??"idle",kn=d.useMemo(()=>Math.max(0,Math.round((a?.totalSeconds??0)/3600*10)/10),[a]),M=d.useCallback(k=>{if(!xe.length)return!1;const A=k.toLowerCase();return xe.some(ee=>ee&&A.includes(ee))},[xe]),Q=d.useMemo(()=>a?.topContexts?.length?a.topContexts.filter(k=>!M(k.label)):[],[a,M]),ze=a?.windowHours??24,bt=(a?.timeline??[]).slice(-ze),Ke=d.useMemo(()=>[...l].sort((k,A)=>Date.parse(k.startedAt)-Date.parse(A.startedAt)),[l]),lo=90,io=d.useMemo(()=>{const k=new Map;if(!Ke.length)return k;let A=null,ee=null;for(const de of Ke){const Me=Oc(de.startedAt);k.has(Me)||k.set(Me,0);const _t=de.domain??de.appName??de.windowTitle??"unknown";ee===Me&&A&&_t!==A&&k.set(Me,(k.get(Me)??0)+1),ee=Me,A=_t}return k},[Ke]),ao=d.useMemo(()=>{const k=new Map;if(Ke.length<2)return k;let A=Ke[0];for(let ee=1;ee<Ke.length;ee+=1){const de=Ke[ee],Me=A.domain??A.appName??A.windowTitle??"unknown",_t=de.domain??de.appName??de.windowTitle??"unknown",Ht=(A.secondsActive??0)+(A.idleSeconds??0);if(Me&&_t!==Me&&Ht>0&&Ht<=lo){const $t=Oc(de.startedAt);k.set($t,(k.get($t)??0)+1)}A=de}return k},[Ke]),oo=d.useMemo(()=>{if(!a||Ke.length<2)return null;let k=0,A=null;for(const ee of Ke){const de=ee.domain??ee.appName??ee.windowTitle??"unknown";A&&de!==A&&(k+=1),A=de}return k/a.windowHours},[Ke,a]),co=d.useMemo(()=>{if(!a||Ke.length<2)return null;let k=0,A=Ke[0];for(let ee=1;ee<Ke.length;ee+=1){const de=Ke[ee],Me=A.domain??A.appName??A.windowTitle??"unknown",_t=de.domain??de.appName??de.windowTitle??"unknown",Ht=(A.secondsActive??0)+(A.idleSeconds??0);Me&&_t!==Me&&Ht>0&&Ht<=lo&&(k+=1),A=de}return k/a.windowHours},[Ke,a]),fr=d.useMemo(()=>b||(a?hm(a):null),[b,a]),uo=d.useMemo(()=>bt.length?q==="switches"?bt.map(k=>io.get(k.start)??0):q==="thrash"?bt.map(k=>ao.get(k.start)??0):q==="idle"?bt.map(k=>{const A=k.productive+k.neutral+k.frivolity+k.draining+k.idle;return A>0?k.idle/A:0}):bt.map(k=>{const A=k.productive+k.neutral+k.frivolity+k.draining;return A>0?k.productive/A:0}):[],[q,bt,io,ao]),ho=d.useMemo(()=>{if(!a)return null;const k=a.totalsByCategory.idle??0,A=a.totalSeconds+k;return A>0?k/A:0},[a]),ch=d.useMemo(()=>{if(!bt.length)return 0;let k=0,A=0;for(const ee of bt)ee.dominant==="productive"?(A+=1,A>k&&(k=A)):A=0;return k},[bt]),ys=g?Math.max(0,y-g):null,uh=72*60*60*1e3,pr=ys?Math.min(1,ys/uh):0,dh=Math.round(20+30*pr),hh=Math.round(48+18*pr),fh=ys?`hsl(${dh} 70% ${hh}%)`:"rgba(200, 149, 108, 0.7)",mr=d.useMemo(()=>a?Math.round(a.deepWorkSeconds/60):null,[a]),fo=d.useMemo(()=>Gp(y,Fl),[y]),vr=d.useMemo(()=>a?a.timeline?.length?a.timeline.reduce((k,A)=>{const ee=Date.parse(A.start);return!Number.isFinite(ee)||ee<fo?k:k+(A.productive??0)},0):a.totalsByCategory.productive??0:0,[a,fo]),Al=Number.isFinite(r)&&(r??0)>0?r:Number.isFinite(Ie)&&Ie>0?Ie:2,gr=Al*3600,zl=gr>0?vr/gr:0,ph=Math.max(0,Math.min(1,zl)),mh=Math.round(zl*100),Ol=52,po=2*Math.PI*Ol,vh=po*(1-ph),mo=zl>=1,gh=Math.max(0,gr-vr),vo=d.useMemo(()=>{const k=new Map;return $e.forEach(A=>k.set(A.id,A)),k},[$e]),go=(Je?.pinnedTrophies?.length?Je.pinnedTrophies:$e.filter(k=>k.pinned).map(k=>k.id)).map(k=>vo.get(k)).filter(k=>!!k).slice(0,3),bn=$e.filter(k=>k.progress.state==="locked").sort((k,A)=>A.progress.ratio-k.progress.ratio)[0]??null;return s.jsxs("section",{className:"panel",children:[s.jsxs("header",{className:"panel-header dashboard-header",children:[s.jsx("div",{className:"dashboard-hero-left",children:s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Attention control"}),s.jsx("h1",{children:"Your day at a glance"}),s.jsxs("div",{className:"pill-row pill-row-tight topbar-actions",children:[s.jsxs("div",{className:"pill-group",children:[s.jsxs("span",{className:"pill ghost",children:["Wallet ",t.balance," f-coins"]}),s.jsx("button",{type:"button",className:"pomodoro-trigger",onClick:()=>ve(!0),children:"Locking in?"})]}),s.jsx("span",{className:"pill ghost",children:mr==null?"Deep work ":`Deep work ${mr} min`})]}),P.length>0&&s.jsxs("div",{className:"dashboard-device-switch",children:[s.jsx("span",{className:"subtle",children:"Viewing"}),s.jsxs("select",{value:C??"",onChange:k=>D(k.target.value),children:[P.length>1&&s.jsx("option",{value:"all",children:"All devices"}),P.map(k=>s.jsxs("option",{value:k.id,children:[k.name,k.isCurrent?" (this device)":""]},k.id))]})]})]})}),s.jsx("div",{className:"card dashboard-time",children:s.jsx(em,{activities:l,summary:a})})]}),s.jsx("div",{className:"dashboard-controls",children:s.jsx("div",{className:"dashboard-tabs",role:"tablist","aria-label":"Dashboard scenes",children:$c.map(k=>s.jsxs("button",{type:"button",role:"tab",className:Se===k.id?"active":"","aria-selected":Se===k.id,onClick:()=>he(k.id),children:[s.jsx("span",{className:"dashboard-tab-label",children:k.label}),s.jsx("span",{className:"dashboard-tab-hint",children:k.hint})]},k.id))})}),fe&&s.jsxs("div",{className:"pomodoro-flyout",children:[s.jsxs("div",{className:"pomodoro-flyout-bar",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Deep work"}),s.jsx("strong",{children:"Pomodoro control"})]}),s.jsx("button",{type:"button",className:"ghost",onClick:()=>ve(!1),children:"Close"})]}),s.jsx(Xp,{api:e})]}),s.jsxs("div",{className:"dashboard-scenes",children:[Se==="focus"&&s.jsxs("div",{className:"dashboard-focus-grid",children:[s.jsxs("div",{className:`card productivity-ring ${mo?"complete":""}`,children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Daily productivity"}),s.jsx("h2",{children:"Close your ring"})]}),s.jsxs("span",{className:"pill ghost",children:[Fc(Al)," goal"]})]}),s.jsxs("div",{className:"productivity-ring-body",children:[s.jsxs("div",{className:"productivity-ring-graphic",role:"img","aria-label":`Productivity ring ${Rr(vr)} of ${Fc(Al)}`,children:[s.jsx("div",{className:"productivity-ring-glow"}),s.jsxs("svg",{viewBox:"0 0 120 120","aria-hidden":!0,children:[s.jsx("circle",{className:"productivity-ring-track",cx:"60",cy:"60",r:Ol,strokeWidth:"10"}),s.jsx("circle",{className:"productivity-ring-progress",cx:"60",cy:"60",r:Ol,strokeWidth:"10",strokeDasharray:po,strokeDashoffset:vh})]}),s.jsxs("div",{className:"productivity-ring-center",children:[s.jsx("strong",{children:Rr(vr)}),s.jsx("span",{children:"productive"})]})]}),s.jsxs("div",{className:"productivity-ring-meta",children:[s.jsx("strong",{children:c?"--":`${mh}%`}),s.jsx("span",{className:"subtle",children:c?"Collecting signal...":mo?"You've closed your circle.":`${Rr(gh)} to go`}),s.jsxs("span",{className:"subtle",children:["Today - ",Rr(gr)," target"]})]})]})]}),s.jsxs("div",{className:`card dashboard-streak ${pr>=1?"streak-max":""}`,style:{"--streak-color":fh,"--streak-progress":`${Math.round(pr*100)}%`},children:[s.jsxs("div",{className:"streak-header",children:[s.jsx("span",{className:"eyebrow",children:"Recovery timer"}),s.jsx("span",{className:`pill inline ${tn}`,children:tn})]}),s.jsx("h2",{children:"Time since last frivolity"}),s.jsx("div",{className:"streak-time",children:R?ys?Rc(ys):"No frivolity logged":"Loading..."}),s.jsxs("div",{className:"streak-meta",children:[s.jsx("span",{className:"subtle",children:g?`Last spend ${new Date(g).toLocaleString()}`:"No paid sessions recorded yet."}),s.jsxs("div",{className:"streak-meta-row",children:[s.jsx("span",{className:"pill ghost",children:"Goal: 3 days"}),s.jsxs("span",{className:"pill ghost",children:[h??0," frivolity uses (24h)"]})]})]}),s.jsx("div",{className:"streak-bar","aria-hidden":!0,children:s.jsx("span",{})})]}),s.jsxs("div",{className:"card dashboard-focus-metrics",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Focus deck"}),s.jsx("h2",{children:"Session highlights"})]}),s.jsx("span",{className:"pill ghost",children:a?`${a.windowHours}h window`:"Rolling day"})]}),s.jsxs("div",{className:"overview-grid",children:[s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Active time"}),s.jsxs("strong",{children:[kn.toFixed(1),"h"]}),s.jsxs("span",{className:"subtle",children:["last ",a?.windowHours??24,"h"]})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Productivity"}),s.jsxs("strong",{children:[x?.productivityScore??"--","%"]}),s.jsxs("span",{className:"subtle",children:["last ",x?.periodDays??7,"d"]})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Deep work"}),s.jsx("strong",{children:mr==null?"--":`${mr}m`}),s.jsx("span",{className:"subtle",children:"today"})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Frivolity"}),s.jsx("strong",{children:h??"--"}),s.jsx("span",{className:"subtle",children:"last 24h"})]})]}),s.jsxs("div",{className:"dashboard-focus-meta",children:[s.jsxs("div",{children:[s.jsx("span",{className:"metric-label",children:"Active context"}),s.jsx("strong",{children:en})]}),s.jsx("span",{className:`pill inline ${tn}`,children:tn})]})]})]}),Se==="signals"&&s.jsxs("div",{className:"dashboard-signals-grid",children:[s.jsxs("div",{className:"dashboard-signals-main",children:[s.jsxs("div",{className:"card flow-card dashboard-flow",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Attention stability"}),s.jsx("h2",{children:"Flow signals"})]}),s.jsx("span",{className:"pill ghost",children:"Last 24h"})]}),s.jsxs("div",{className:"flow-metrics",children:[s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Context switches"}),s.jsx("strong",{children:oo==null?"--":`${oo.toFixed(1)}/h`}),s.jsx("span",{className:"subtle",children:"avg across window"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Thrash rate"}),s.jsx("strong",{children:co==null?"--":`${co.toFixed(1)}/h`}),s.jsx("span",{className:"subtle",children:"rapid hops"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Idle ratio"}),s.jsx("strong",{children:ho==null?"--":`${Math.round(ho*100)}%`}),s.jsx("span",{className:"subtle",children:"passive time"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Longest run"}),s.jsxs("strong",{children:[ch,"h"]}),s.jsx("span",{className:"subtle",children:"productive streak"})]})]}),s.jsxs("div",{className:"flow-toggle",children:[s.jsx("button",{type:"button",className:`pill ghost ${q==="productivity"?"active":""}`,onClick:()=>ge("productivity"),children:"Productivity"}),s.jsx("button",{type:"button",className:`pill ghost ${q==="switches"?"active":""}`,onClick:()=>ge("switches"),children:"Switches"}),s.jsx("button",{type:"button",className:`pill ghost ${q==="thrash"?"active":""}`,onClick:()=>ge("thrash"),children:"Thrash"}),s.jsx("button",{type:"button",className:`pill ghost ${q==="idle"?"active":""}`,onClick:()=>ge("idle"),children:"Idle"})]}),s.jsxs("div",{className:"flow-sparkline",children:[s.jsx("span",{className:"label",children:q==="switches"?"Switches trend":q==="thrash"?"Thrash trend":q==="idle"?"Idle trend":"Productive trend"}),s.jsx("div",{className:"flow-sparkline-track",children:uo.length>1?s.jsx("svg",{viewBox:"0 0 100 40",preserveAspectRatio:"none","aria-hidden":!0,children:s.jsx("path",{d:dm(uo),fill:"none",stroke:"currentColor",strokeWidth:"2"})}):s.jsx("span",{className:"subtle",children:"Collecting signal"})})]})]}),s.jsx("div",{className:"dashboard-insights",children:s.jsx(im,{api:e,overview:x,loading:m,onRefresh:E})})]}),s.jsxs("div",{className:"card dashboard-overview",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Signal deck"}),s.jsx("h2",{children:"Focus telemetry"})]}),s.jsx("span",{className:"pill ghost",children:a?`${a.windowHours}h window`:"Rolling day"})]}),s.jsxs("div",{className:"overview-grid",children:[s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Active time"}),s.jsxs("strong",{children:[kn.toFixed(1),"h"]}),s.jsxs("span",{className:"subtle",children:["last ",a?.windowHours??24,"h"]})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Productivity"}),s.jsxs("strong",{children:[x?.productivityScore??"--","%"]}),s.jsxs("span",{className:"subtle",children:["last ",x?.periodDays??7,"d"]})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Avg session"}),s.jsx("strong",{children:x?Rc(x.avgSessionLength*1e3):"--"}),s.jsxs("span",{className:"subtle",children:[x?.totalSessions??"--"," sessions"]})]}),s.jsxs("div",{className:"overview-metric",children:[s.jsx("span",{className:"label",children:"Peak hour"}),s.jsx("strong",{children:x?Ic(x.peakProductiveHour):"--"}),s.jsxs("span",{className:"subtle",children:["risk ",x?Ic(x.riskHour):"--"]})]})]}),s.jsxs("div",{className:"overview-breakdown",children:[s.jsx("span",{className:"label",children:"Category mix"}),s.jsxs("div",{className:"overview-bars",children:[Ps("Productive","productive",x),Ps("Neutral","neutral",x),Ps("Frivolity","frivolity",x),Ps("Draining","draining",x),Ps("Idle","idle",x)]})]}),s.jsxs("div",{className:"overview-top",children:[s.jsx("span",{className:"label",children:"Top contexts"}),s.jsxs("ul",{className:"overview-list",children:[Q.slice(0,3).map(k=>s.jsxs("li",{children:[s.jsx("strong",{children:k.label}),s.jsxs("span",{className:"subtle",children:[Math.round(k.seconds/60),"m  ",k.source==="url"?"Browser":"App"]})]},k.label)),Q.length===0&&s.jsx("li",{className:"subtle",children:"No streams yet."})]}),x?.topEngagementDomain&&!M(x.topEngagementDomain)&&s.jsxs("div",{className:"overview-highlight",children:[s.jsx("span",{className:"label",children:"Most engaging"}),s.jsx("strong",{children:x.topEngagementDomain}),s.jsx("span",{className:"subtle",children:"highest attention hold this week"})]})]})]})]}),Se==="journey"&&s.jsxs("div",{className:"dashboard-journey-grid",children:[s.jsx("div",{className:"dashboard-orbit",children:s.jsx(Zp,{summary:a,economy:n})}),s.jsxs("div",{className:"dashboard-timeline",children:[s.jsx(tm,{journey:Ee,loading:c,isRemote:Ot}),s.jsx(rm,{journey:Ee,loading:c,isRemote:Ot})]})]}),Se==="social"&&s.jsxs("div",{className:"dashboard-social-grid",children:[s.jsxs("div",{className:"card friends-strip",children:[s.jsxs("div",{className:"friends-strip-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Friends"}),s.jsx("h2",{children:"In the zone"})]}),s.jsx("span",{className:"pill ghost",children:"Last 24h"})]}),K?J.length===0?s.jsxs("div",{className:"friends-empty",children:[s.jsx("strong",{children:"No friends yet"}),s.jsx("span",{className:"subtle",children:"Add a handle in the Friends tab."})]}):s.jsx("div",{className:"friends-strip-row",children:J.map(k=>{const A=O[k.userId],ee=A?.categoryBreakdown??null,de=A?.totalActiveSeconds??0,Me=de>0?ee.productive/de*100:0,_t=de>0?ee.neutral/de*100:0,Ht=de>0?ee.frivolity/de*100:0,$t=(k.pinnedTrophies??[]).map(nn=>vo.get(nn)).filter(nn=>!!nn);return s.jsxs("button",{type:"button",className:"friends-chip",onClick:()=>Jt(k),children:[s.jsxs("div",{className:"friends-chip-header",children:[s.jsxs("div",{children:[s.jsx("strong",{children:k.displayName??k.handle??"Friend"}),s.jsxs("span",{className:"subtle",children:["@",k.handle??"no-handle"]})]}),s.jsx("span",{className:"pill ghost",children:A?`${A.productivityScore}%`:"--"})]}),s.jsxs("div",{className:"friends-chip-activity",children:[s.jsxs("span",{children:[A?um(A.totalActiveSeconds):"--"," active"]}),s.jsx("span",{className:"subtle",children:A?`Updated ${new Date(A.updatedAt).toLocaleTimeString()}`:"No data yet"})]}),s.jsxs("div",{className:"friends-chip-bar",children:[s.jsx("span",{className:"cat-productive",style:{width:`${Me}%`}}),s.jsx("span",{className:"cat-neutral",style:{width:`${_t}%`}}),s.jsx("span",{className:"cat-frivolity",style:{width:`${Ht}%`}})]}),T?s.jsx("div",{className:"head-to-head",children:O[k.userId]?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"head-to-head-row",children:[s.jsx("span",{children:"You"}),s.jsx("span",{children:k.displayName??k.handle??"Friend"})]}),s.jsxs("div",{className:"head-to-head-bar fancy",children:[s.jsx("span",{className:"head-to-head-left",style:{width:`${Hc(fr,O[k.userId])}%`,background:H?.color??"var(--accent)"}}),s.jsx("span",{className:"head-to-head-right",style:{width:`${100-Hc(fr,O[k.userId])}%`,background:k.color??"rgba(255, 255, 255, 0.3)"}}),s.jsx("div",{className:"head-to-head-glow"})]}),s.jsxs("div",{className:"head-to-head-row subtle",children:[s.jsxs("span",{children:[Ac(fr?.categoryBreakdown.productive??0)," productive"]}),s.jsxs("span",{children:[Ac(O[k.userId]?.categoryBreakdown.productive??0)," productive"]})]}),s.jsxs("div",{className:"head-to-head-row subtle",children:[s.jsxs("span",{children:[zc(fr?.emergencySessions)," emergency"]}),s.jsxs("span",{children:[zc(O[k.userId]?.emergencySessions)," emergency"]})]})]}):s.jsx("p",{className:"subtle",style:{marginTop:6},children:"Waiting for shared activity data."})}):s.jsx("p",{className:"subtle",style:{marginTop:10},children:"Competitive view is off."}),$t.length>0&&s.jsx("div",{className:"friends-trophies",children:$t.slice(0,3).map(nn=>s.jsxs("span",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:nn.emoji}),nn.name]},nn.id))})]},k.id)})}):s.jsxs("div",{className:"friends-empty",children:[s.jsx("strong",{children:"Syncing friends"}),s.jsx("span",{className:"subtle",children:"Connect the desktop app to pull stats."})]})]}),$e.length>0&&s.jsxs("div",{className:"card trophy-strip",children:[s.jsxs("div",{className:"trophy-strip-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Trophies"}),s.jsx("h2",{children:"Case highlights"})]}),s.jsx("span",{className:"pill ghost",children:"Profile view"})]}),s.jsx("div",{className:"trophy-strip-row",children:go.length===0?s.jsxs("div",{className:"friends-empty",children:[s.jsx("strong",{children:"No pinned trophies"}),s.jsx("span",{className:"subtle",children:"Pin trophies in your Profile page."})]}):go.map(k=>s.jsxs("div",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:k.emoji}),s.jsx("span",{children:k.name})]},k.id))}),bn&&s.jsxs("div",{className:"trophy-next",children:[s.jsx("span",{className:"label",children:"Next up"}),s.jsxs("div",{className:"trophy-next-body",children:[s.jsx("span",{className:"emoji",children:bn.emoji}),s.jsxs("div",{children:[s.jsx("strong",{children:bn.name}),s.jsx("span",{className:"subtle",children:bn.progress.label??`${bn.progress.current}/${bn.progress.target}`})]})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("span",{style:{width:`${Math.round(bn.progress.ratio*100)}%`}})})]}),W&&s.jsxs("div",{className:"trophy-toast",children:[s.jsx("span",{className:"emoji",children:W.emoji}),s.jsxs("div",{children:[s.jsx("strong",{children:W.name}),s.jsx("span",{className:"subtle",children:"New trophy earned"})]})]})]})]})]}),s.jsx(ah,{open:me,friend:te,summary:te?O[te.userId]??null:null,timeline:U,publicLibraryItems:se,trophies:$e,onClose:()=>_e(!1)})]})}function Rc(e){const t=Math.max(0,Math.floor(e/6e4)),n=Math.floor(t/(60*24)),r=Math.floor(t%(60*24)/60),l=t%60;return n>0?`${n}d ${r}h ${l}m`:`${r}h ${l}m`}function Ic(e){const t=e>=12?"PM":"AM";return`${e%12||12}${t}`}function um(e){const t=e/3600;return t>=10?`${t.toFixed(0)}h`:`${t.toFixed(1)}h`}function Rr(e){const t=Math.max(0,Math.round(e/60)),n=Math.floor(t/60),r=t%60;return`${n}h ${r}m`}function Fc(e){return Number.isFinite(e)?e%1===0?`${e.toFixed(0)}h`:`${e.toFixed(1)}h`:"0h"}function Ac(e){return`${Math.round(e/60)}m`}function zc(e){return typeof e!="number"?"":String(e)}function Oc(e){const t=new Date(e);return t.setMinutes(0,0,0),t.toISOString()}function dm(e){if(e.length<2)return"";const t=Math.max(...e),n=Math.min(...e),r=Math.max(.001,t-n);return e.map((l,i)=>{const a=i/(e.length-1)*100,o=36-(l-n)/r*32;return`${i===0?"M":"L"}${a.toFixed(2)} ${o.toFixed(2)}`}).join(" ")}function hm(e){return{userId:"me",updatedAt:new Date().toISOString(),periodHours:e.windowHours,totalActiveSeconds:e.totalSeconds,deepWorkSeconds:e.deepWorkSeconds,categoryBreakdown:{productive:e.totalsByCategory.productive??0,neutral:e.totalsByCategory.neutral??0,frivolity:e.totalsByCategory.frivolity??0,draining:e.totalsByCategory.draining??0,idle:e.totalsByCategory.idle??0},productivityScore:e.totalSeconds>0?Math.round(e.totalsByCategory.productive/e.totalSeconds*100):0}}function Hc(e,t){const n=e?.categoryBreakdown.productive??0,r=t?.categoryBreakdown.productive??0,l=n+r;return l===0?50:Math.round(n/l*100)}function Ps(e,t,n){const r=n?.categoryBreakdown??{productive:0,neutral:0,frivolity:0,draining:0,idle:0},l=r.productive+r.neutral+r.frivolity+r.draining+r.idle,i=r[t]??0,a=l>0?Math.round(i/l*100):0;return s.jsxs("div",{className:"overview-bar",children:[s.jsxs("div",{className:"overview-bar-label",children:[s.jsx("span",{children:e}),s.jsxs("span",{className:"subtle",children:[a,"%"]})]}),s.jsx("div",{className:"overview-bar-track",children:s.jsx("span",{className:`overview-bar-fill cat-${t}`,style:{width:`${a}%`}})})]},t)}function Bc(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function yt(e){const t=e.trim().toLowerCase();if(!t)return null;if(t.startsWith("http://")||t.startsWith("https://"))try{return new URL(t).hostname.replace(/^www\./,"")}catch{return null}return t.split("/")[0].replace(/^www\./,"")}function Ir(e){const t=new Set,n=[];for(const r of e){const l=yt(r);!l||t.has(l)||(t.add(l),n.push(l))}return n}function fm({api:e,variant:t="page"}){const[n,r]=d.useState(null),[l,i]=d.useState(!0),[a,o]=d.useState(!1),[c,p]=d.useState(!1),[x,j]=d.useState(null),[m,w]=d.useState(""),[g,N]=d.useState("frivolous"),R=d.useCallback(async()=>{try{const v=await e.settings.categorisation();r(v)}catch(v){console.error("Failed to load categorisation",v),j("Could not load domain lists.")}finally{i(!1)}},[e.settings]);d.useEffect(()=>{R()},[R]);const f=d.useMemo(()=>n?{productive:n.productive.length,neutral:n.neutral.length,frivolity:n.frivolity.length,draining:n.draining?.length??0}:{productive:0,neutral:0,frivolity:0,draining:0},[n]),h=async v=>{o(!0),j(null);try{await e.settings.updateCategorisation(v),r(v),p(!0),window.setTimeout(()=>p(!1),1500)}catch(C){j(C.message||"Failed to save")}finally{o(!1)}},u=async(v,C)=>{if(!n)return;const D=yt(v);if(!D){j("Please enter a valid domain.");return}const $=Ir(n.productive.filter(O=>yt(O)!==D)),Y=Ir(n.neutral.filter(O=>yt(O)!==D)),J=Ir(n.frivolity.filter(O=>yt(O)!==D)),_=Ir((n.draining??[]).filter(O=>yt(O)!==D));C==="productive"&&$.unshift(D),C==="neutral"&&Y.unshift(D),C==="frivolous"&&J.unshift(D),C==="draining"&&_.unshift(D),await h({productive:$,neutral:Y,frivolity:J,draining:_})},y=async v=>{if(!n)return;const C=yt(v);C&&await h({productive:n.productive.filter(D=>yt(D)!==C),neutral:n.neutral.filter(D=>yt(D)!==C),frivolity:n.frivolity.filter(D=>yt(D)!==C),draining:n.draining?.filter(D=>yt(D)!==C)??[]})},S=async()=>{j(null);const v=yt(m);if(!v){j("Enter a domain like twitter.com");return}w(""),await u(v,g)};if(l)return s.jsx("div",{className:"panel",children:"Loading domains"});if(!n)return s.jsx("div",{className:"panel",children:"Could not load domains."});const P=t==="settings"?"store-page settings-domains":"page store-page";return s.jsxs("section",{className:P,children:[t==="page"?s.jsxs("header",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Domains"}),s.jsxs("p",{className:"subtle",children:["Keep this simple: ",s.jsx("strong",{children:"productive"}),", ",s.jsx("strong",{children:"neutral"}),", ",s.jsx("strong",{children:"draining"}),", or ",s.jsx("strong",{children:"frivolous"}),". Idle is inferred automatically."]})]}),s.jsxs("div",{className:"pill-row",children:[s.jsxs("span",{className:"pill ghost",children:[f.productive," productive"]}),s.jsxs("span",{className:"pill ghost",children:[f.neutral," neutral"]}),s.jsxs("span",{className:"pill ghost",children:[f.frivolity," frivolous"]}),s.jsxs("span",{className:"pill ghost",children:[f.draining," draining"]})]})]}):s.jsxs("div",{className:"settings-section-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Domains"}),s.jsxs("p",{className:"subtle",children:["Keep this simple: ",s.jsx("strong",{children:"productive"}),", ",s.jsx("strong",{children:"neutral"}),", ",s.jsx("strong",{children:"draining"}),", or ",s.jsx("strong",{children:"frivolous"}),". Idle is inferred automatically."]})]}),s.jsxs("div",{className:"pill-row",children:[s.jsxs("span",{className:"pill ghost",children:[f.productive," productive"]}),s.jsxs("span",{className:"pill ghost",children:[f.neutral," neutral"]}),s.jsxs("span",{className:"pill ghost",children:[f.frivolity," frivolous"]}),s.jsxs("span",{className:"pill ghost",children:[f.draining," draining"]})]})]}),x&&s.jsx("p",{className:"error-text",children:x}),c&&s.jsx("p",{className:"subtle",children:"Saved."}),s.jsxs("div",{className:"card",children:[s.jsx("h3",{children:"Quick classify"}),s.jsxs("div",{className:"settings-grid",style:{gridTemplateColumns:"1.2fr 1fr auto",alignItems:"end"},children:[s.jsxs("label",{children:["Domain",s.jsx("input",{value:m,onChange:v=>w(v.target.value),placeholder:"twitter.com",disabled:a})]}),s.jsxs("label",{children:["Category",s.jsxs("select",{value:g,onChange:v=>N(v.target.value),disabled:a,children:[s.jsx("option",{value:"productive",children:"productive"}),s.jsx("option",{value:"neutral",children:"neutral"}),s.jsx("option",{value:"frivolous",children:"frivolous"}),s.jsx("option",{value:"draining",children:"draining"})]})]}),s.jsx("button",{className:"primary",type:"button",disabled:a,onClick:S,children:"Add"})]}),s.jsx("p",{className:"subtle",style:{marginTop:10},children:"Tip: you can also label domains from the browser extension popup."})]}),s.jsxs("div",{className:"store-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))"},children:[s.jsx(Fr,{title:"Productive",subtitle:"Earns f-coins.",items:n.productive,onRemove:y,onMove:v=>u(v,"productive"),disabled:a}),s.jsx(Fr,{title:"Neutral",subtitle:"Safe by default (earning depends on your clock-in settings).",items:n.neutral,onRemove:y,onMove:v=>u(v,"neutral"),disabled:a}),s.jsx(Fr,{title:"Frivolous",subtitle:"Paywall applies here.",items:n.frivolity,onRemove:y,onMove:v=>u(v,"frivolous"),disabled:a}),s.jsx(Fr,{title:"Draining",subtitle:"Passively costs coins (no paywall).",items:n.draining??[],onRemove:y,onMove:v=>u(v,"draining"),disabled:a})]})]})}function Fr(e){const{title:t,subtitle:n,items:r,disabled:l,onRemove:i}=e;return s.jsxs("div",{className:"card store-item",children:[s.jsxs("div",{className:"store-item-headline",children:[s.jsxs("div",{children:[s.jsx("p",{className:"store-item-domain",children:t}),s.jsxs("h3",{className:"store-item-title",children:[r.length," domains"]})]}),s.jsxs("div",{className:"store-item-price-pill",children:[s.jsx("strong",{children:r.length}),s.jsx("span",{children:"items"})]})]}),s.jsx("p",{className:"subtle",style:{marginTop:6},children:n}),r.length===0?s.jsx("div",{className:"empty-state",style:{padding:0},children:s.jsx("p",{className:"subtle",children:"None yet."})}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,marginTop:8},children:[r.slice(0,12).map(a=>s.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"space-between",alignItems:"center"},children:[s.jsx("code",{style:{fontSize:12,color:"var(--fg-muted)"},children:a}),s.jsx("button",{className:"ghost danger",disabled:l,onClick:()=>i(a),children:"Remove"})]},a)),r.length>12&&s.jsxs("p",{className:"subtle",style:{margin:0},children:["Showing 12 of ",r.length,". Use search/edit tools in a future iteration."]})]})]})}function pm({values:e,onChange:t,color:n,disabled:r=!1}){const[l,i]=d.useState(!1),a=d.useRef(null),o=c=>{if(r||!a.current)return;const p=a.current.getBoundingClientRect(),x="touches"in c?c.touches[0].clientX:c.clientX,j="touches"in c?c.touches[0].clientY:c.clientY,m=x-p.left,w=j-p.top,g=p.width,N=p.height,R=g/24,f=Math.floor(m/R);if(f>=0&&f<24){const u=1-w/N,y=Math.max(0,Math.min(3,u*3)),S=[...e];S[f]=Number(y.toFixed(1)),t(S)}};return s.jsxs("div",{className:"curve-editor",style:{userSelect:"none",opacity:r?.5:1},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"12px",color:"var(--text-subtle)"},children:[s.jsx("span",{children:"00:00"}),s.jsx("span",{children:"06:00"}),s.jsx("span",{children:"12:00"}),s.jsx("span",{children:"18:00"}),s.jsx("span",{children:"23:59"})]}),s.jsxs("svg",{ref:a,width:"100%",height:"200",style:{background:"rgba(0,0,0,0.05)",borderRadius:"8px",cursor:r?"not-allowed":"crosshair"},onMouseDown:c=>{r||(i(!0),o(c))},onMouseMove:c=>{!r&&l&&o(c)},onMouseUp:()=>i(!1),onMouseLeave:()=>i(!1),onTouchStart:c=>{r||(i(!0),o(c))},onTouchMove:c=>{!r&&l&&o(c)},onTouchEnd:()=>i(!1),children:[[.5,1,1.5,2,2.5].map(c=>s.jsx("line",{x1:"0",y1:200-c/3*200,x2:"100%",y2:200-c/3*200,stroke:"rgba(0,0,0,0.1)",strokeDasharray:"4 4"},c)),e.map((c,p)=>{const x=c/3*200;return s.jsx("rect",{x:`${p/24*100}%`,y:200-x,width:`${100/24}%`,height:x,fill:n,stroke:"#fff",strokeWidth:"1",opacity:"0.8"},p)})]}),s.jsx("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"12px"},children:r?"Active session detected  edits locked until it ends.":"Click and drag to adjust hourly multipliers (0x - 3x)"})]})}function mm({api:e}){const[t,n]=d.useState([]),[r,l]=d.useState(null),[i,a]=d.useState("productive"),[o,c]=d.useState(!1),[p,x]=d.useState({}),[j,m]=d.useState(null),[w,g]=d.useState(null),[N,R]=d.useState(null),[f,h]=d.useState(!1),[u,y]=d.useState(null),[S,P]=d.useState(!0),[v,C]=d.useState(!1),[D,$]=d.useState(!1),[Y,J]=d.useState(""),[_,O]=d.useState(10),[Z,K]=d.useState(8),[X,b]=d.useState(!1);d.useEffect(()=>{I(),e.settings.economyExchangeRate().then(T=>{typeof T=="number"&&Number.isFinite(T)&&R(T)}).catch(()=>{}),e.settings.dailyWalletResetEnabled().then(P).catch(()=>{})},[]),d.useEffect(()=>{const T=()=>e.paywall.sessions().then(Ne=>{const Se={};Ne.forEach(he=>{Se[he.domain]=he}),x(Se)}).catch(()=>{});T();const ie=e.events.on("paywall:session-started",T),fe=e.events.on("paywall:session-ended",T),ve=e.events.on("paywall:session-paused",T),Ie=e.events.on("paywall:session-resumed",T);return()=>{ie(),fe(),ve(),Ie()}},[e]);async function I(){const[T,ie,fe]=await Promise.all([e.market.list(),e.settings.categorisation(),e.paywall.sessions()]),ve=[],Ie=new Map(T.map(he=>[he.domain,he])),Ne=(he,vt)=>Ie.get(he)||{domain:he,ratePerMin:vt,packs:[],hourlyModifiers:Array(24).fill(1)};ie.productive.forEach(he=>{ve.push({id:he,type:"productive",rate:Ne(he,5)})}),ie.frivolity.forEach(he=>{ve.push({id:he,type:"frivolity",rate:Ne(he,3)})}),T.forEach(he=>{ve.find(vt=>vt.id===he.domain)||ve.push({id:he.domain,type:"neutral",rate:he})}),n(ve);const Se={};fe.forEach(he=>{Se[he.domain]=he}),x(Se)}const H=t.filter(T=>i==="productive"?T.type==="productive":T.type==="frivolity"||T.type==="neutral");d.useEffect(()=>{!D&&H.length>0&&(!r||!H.find(T=>T.id===r))?l(H[0].id):H.length===0&&!D&&l(null)},[i,t,D]),d.useEffect(()=>{m(null)},[r]),d.useEffect(()=>{if(!u)return;const T=setTimeout(()=>y(null),2400);return()=>clearTimeout(T)},[u]);const z=t.find(T=>T.id===r),oe=!!(z?p[z.id]:void 0);d.useEffect(()=>{if(!w)return;const T=setTimeout(()=>g(null),2e3);return()=>clearTimeout(T)},[w]);const U=T=>{!z||oe||re(z.id,{...z.rate,ratePerMin:T})},ne=T=>{!z||oe||re(z.id,{...z.rate,hourlyModifiers:T})},se=async T=>{if(!v){C(!0);try{await e.settings.updateDailyWalletResetEnabled(T),P(T),y(T?"Daily coin reset enabled  wallet starts at 0 each day.":"Daily coin reset disabled.")}catch(ie){m(ie.message)}finally{C(!1)}}},re=(T,ie)=>{n(fe=>fe.map(ve=>ve.id===T?{...ve,rate:ie}:ve))},me=async()=>{if(z){if(oe){m("Active session detected  end it before changing this rate.");return}c(!0),m(null),g(null);try{await e.market.upsert(z.rate),g("Saved to market"),await I(),l(z.id)}catch(T){m(T.message)}finally{c(!1)}}},_e=async T=>{if(T.preventDefault(),!Y.trim())return;const ie=Y.trim();if(t.find(ve=>ve.id===ie)){m("Profile already exists");return}const fe={domain:ie,ratePerMin:3,packs:[],hourlyModifiers:Array(24).fill(1)};await e.market.upsert(fe),await I(),J(""),$(!1),l(ie),a("frivolity")},$e=d.useMemo(()=>i==="productive"?"Earn profiles":"Spend profiles",[i]),Ce=d.useMemo(()=>i==="productive"?"Tune how productive apps reward you over the day.":"Shape how costly domains evolve over the day.",[i]),Je=d.useMemo(()=>{if(!z)return[];const T=z.rate.hourlyModifiers,ie=Math.max(...T),fe=Math.min(...T);return[{label:"Base rate",value:`${z.rate.ratePerMin} f-coins/min`},{label:"Peak multiplier",value:`${ie.toFixed(1)}x`},{label:"Off-peak",value:`${fe.toFixed(1)}x`}]},[z]),F=z?.type==="productive";function W(T){const ie=T.filter(Ie=>typeof Ie=="number"&&Number.isFinite(Ie));if(!ie.length)return null;const fe=[...ie].sort((Ie,Ne)=>Ie-Ne),ve=Math.floor(fe.length/2);return fe.length%2===0?(fe[ve-1]+fe[ve])/2:fe[ve]}function ae(T){const ie=Number(T);return Number.isFinite(ie)?Math.round(ie*100)/100:0}const q=d.useMemo(()=>W(t.filter(T=>T.type==="productive").map(T=>T.rate.ratePerMin))??5,[t]),ge=d.useMemo(()=>W(t.filter(T=>T.type==="frivolity").map(T=>T.rate.ratePerMin))??3,[t]),Ee=d.useMemo(()=>!ge||ge<=0?0:q/ge,[q,ge]),V=N??Ee,xe=d.useMemo(()=>{const T=typeof V=="number"&&Number.isFinite(V)?V:1;return!ge||ge<=0||!q||q<=0||T<=0?1:q/(ge*T)},[V,q,ge]),ye=async()=>{if(f)return;const T=typeof V=="number"&&Number.isFinite(V)?V:null;if(!(!T||T<=0)){h(!0),m(null);try{const ie=t.filter(Ne=>Ne.type==="frivolity"),fe=ie.filter(Ne=>!!p[Ne.id]).map(Ne=>Ne.id),ve=ie.filter(Ne=>!p[Ne.id]);if(!ve.length){y("All spend profiles are locked by active sessions.");return}await e.settings.updateEconomyExchangeRate(T);let Ie=0;for(const Ne of ve){const Se={...Ne.rate,ratePerMin:ae(Ne.rate.ratePerMin*xe),packs:Ne.rate.packs.map(he=>({...he,price:Math.max(1,Math.round(he.price*xe))}))};await e.market.upsert(Se),Ie+=1}await I(),y(fe.length?`Scaled ${Ie} spend profiles. Skipped ${fe.length} locked by active sessions.`:`Scaled ${Ie} spend profiles.`)}catch(ie){m(ie.message)}finally{h(!1)}}};return s.jsxs("section",{className:"panel tuner-panel",children:[s.jsxs("header",{className:"panel-header tuner-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Economy"}),s.jsx("h1",{children:$e}),s.jsx("p",{className:"subtle",children:Ce})]}),s.jsxs("div",{className:"toggle-wrap",children:[s.jsx("span",{className:"subtle",children:"Productive"}),s.jsxs("label",{className:"ios-switch",children:[s.jsx("input",{type:"checkbox",checked:i==="frivolity",onChange:T=>a(T.target.checked?"frivolity":"productive")}),s.jsx("span",{className:"slider"})]}),s.jsx("span",{className:"subtle",children:"Frivolous"})]})]}),w&&s.jsx("div",{className:"inline-note",style:{maxWidth:"420px"},children:w}),u&&s.jsx("div",{className:"inline-note",style:{maxWidth:"520px"},children:u}),s.jsxs("section",{className:"card",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,flexWrap:"wrap"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0},children:"Daily coin reset"}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Start each day at 0 f-coins so frivolity must be re-earned today."})]}),s.jsxs("label",{className:"settings-inline",style:{margin:0},children:[s.jsx("input",{type:"checkbox",checked:S,onChange:T=>se(T.target.checked),disabled:v}),s.jsx("span",{className:"subtle",children:S?"Enabled":"Disabled"})]})]}),s.jsxs("section",{className:"card economy-exchange-card",children:[s.jsxs("div",{className:"economy-exchange-header",children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0},children:"Exchange rate"}),s.jsx("p",{className:"subtle",style:{marginBottom:0},children:"Make the system feel intuitive: how much frivolity time 1 minute of productive time buys."})]}),s.jsx("button",{className:"primary",onClick:ye,disabled:f||!V||V<=0,children:f?"Applying":"Apply to spend profiles"})]}),s.jsxs("div",{className:"economy-exchange-grid",children:[s.jsxs("div",{className:"economy-exchange-metric",children:[s.jsx("span",{className:"subtle",children:"Current (typical)"}),s.jsxs("strong",{children:["1 min work  ",Ee?Ee.toFixed(2):""," min frivolity"]})]}),s.jsxs("div",{className:"economy-exchange-metric",children:[s.jsx("span",{className:"subtle",children:"Target"}),s.jsxs("strong",{children:["1 min work  ",V?V.toFixed(2):""," min frivolity"]})]}),s.jsxs("div",{className:"economy-exchange-metric",children:[s.jsx("span",{className:"subtle",children:"Effect"}),s.jsxs("strong",{children:[xe?`${xe.toFixed(2)}`:""," spend costs"]})]})]}),s.jsxs("div",{className:"economy-exchange-controls",children:[s.jsxs("div",{className:"economy-exchange-presets",children:[s.jsx("button",{type:"button",className:"ghost",onClick:()=>R(.5),disabled:f,children:"0.5"}),s.jsx("button",{type:"button",className:"ghost",onClick:()=>R(1),disabled:f,children:"1 (1:1)"}),s.jsx("button",{type:"button",className:"ghost",onClick:()=>R(2),disabled:f,children:"2"}),s.jsx("button",{type:"button",className:"ghost",onClick:()=>R(Ee),disabled:f||!Ee,children:"Reset"})]}),s.jsxs("label",{style:{display:"grid",gap:8,margin:0},children:[s.jsx("span",{className:"subtle",children:"Minutes of frivolity per minute of work"}),s.jsx("input",{type:"range",min:.25,max:4,step:.05,value:V||1,onChange:T=>R(Number(T.target.value)),disabled:f})]})]}),s.jsxs("p",{className:"subtle",style:{marginBottom:0},children:["This scales all ",s.jsx("strong",{children:"spend"})," profiles (frivolity domains) while keeping your individual profile shapes and pack options. Use Advanced below if you want domain-specific tuning."]})]}),s.jsxs("details",{className:"card economy-advanced",open:!1,children:[s.jsxs("summary",{className:"economy-advanced-summary",children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[s.jsx("strong",{children:"Advanced: per-domain tuning"}),s.jsx("span",{className:"subtle",children:"Power-user controls for rates, curves, and packs."})]}),s.jsx("span",{className:"economy-advanced-toggle","aria-hidden":"true"})]}),s.jsx("div",{className:"economy-advanced-body",children:s.jsxs("div",{className:"tuner-layout",children:[s.jsxs("aside",{className:"tuner-list",children:[s.jsx("div",{style:{padding:"0 4px 8px 4px",borderBottom:"1px solid rgba(255,255,255,0.05)",marginBottom:"8px"},children:D?s.jsxs("form",{onSubmit:_e,style:{display:"flex",gap:"6px"},children:[s.jsx("input",{autoFocus:!0,placeholder:"domain.com",value:Y,onChange:T=>J(T.target.value),style:{flex:1,minWidth:0,padding:"6px 8px",fontSize:"13px",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white"}}),s.jsx("button",{type:"submit",className:"primary",style:{padding:"6px 10px",fontSize:"13px"},children:"Add"}),s.jsx("button",{type:"button",className:"ghost",style:{padding:"6px",fontSize:"13px"},onClick:()=>$(!1),children:""})]}):s.jsx("button",{className:"ghost",style:{width:"100%",textAlign:"center",fontSize:"13px"},onClick:()=>$(!0),children:"+ Add Profile"})}),H.map(T=>s.jsxs("button",{className:`tuner-list-item ${r===T.id?"active":""}`,onClick:()=>l(T.id),children:[s.jsx("div",{className:"tuner-list-title",children:T.id}),s.jsxs("div",{className:"tuner-list-sub",children:[T.rate.ratePerMin," f-coins/min  ",T.type]})]},T.id)),H.length===0&&s.jsx("div",{className:"subtle",style:{padding:"12px"},children:"No items in this category."})]}),s.jsx("div",{className:"tuner-editor",children:z?s.jsxs("div",{className:"tuner-grid",children:[s.jsxs("div",{className:"card tuner-primary",children:[s.jsxs("div",{className:"tuner-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:z.id}),s.jsx("p",{className:"subtle",children:z.type==="productive"?"Earn profile":"Spend profile"})]}),s.jsx("button",{className:"primary",onClick:me,disabled:o||oe,children:oe?"Locked by active session":o?"Saving...":"Save changes"}),s.jsx("button",{className:"ghost danger",disabled:oe,onClick:async()=>{z&&confirm(`Delete profile for ${z.id}?`)&&(await e.market.delete(z.id),await I(),l(null))},children:"Delete"})]}),oe&&s.jsx("div",{className:"inline-note danger",style:{marginBottom:"8px"},children:"Active session running for this domain  end it to adjust the exchange rate."}),j&&s.jsx("div",{className:"inline-note warning",style:{marginBottom:"8px"},children:j}),Je.length>0&&s.jsx("div",{className:"tuner-metrics",children:Je.map(T=>s.jsxs("div",{className:"metric-card",children:[s.jsx("span",{className:"metric-label",children:T.label}),s.jsx("strong",{className:"metric-value",children:T.value})]},T.label))}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Base rate (per minute)"}),s.jsx("input",{type:"number",value:z.rate.ratePerMin,onChange:T=>U(Number(T.target.value)),step:"0.1",min:"0.1",max:"100",disabled:oe}),s.jsx("p",{className:"subtle",children:z.type==="productive"?"f-coins earned per minute.":"f-coins spent per minute when metered."})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Time multiplier curve"}),s.jsx("p",{className:"subtle",children:"Adjust how the value changes throughout the day. 1x is standard."}),s.jsx(pm,{values:z.rate.hourlyModifiers,onChange:ne,color:z.type==="productive"?"var(--cat-productive)":"var(--cat-frivolity)",disabled:oe})]})]}),s.jsxs("div",{className:"card tuner-secondary",children:[s.jsx("div",{className:"tuner-header",children:s.jsxs("div",{children:[s.jsx("h3",{children:F?"Earnings preview":"Packs preview"}),s.jsx("p",{className:"subtle",children:F?"How this profiles rate and curve would surface in payout views.":"Show what users see when buying time."})]})}),s.jsxs("div",{className:"packs-preview",children:[z.rate.packs.length===0&&s.jsx("p",{className:"subtle",children:F?"No packs defined  optional for earn profiles.":"No packs defined  consider adding 10/30/60 minute options."}),z.rate.packs.map((T,ie)=>s.jsxs("div",{className:"pack-card",children:[s.jsxs("div",{children:[s.jsxs("strong",{children:[T.minutes," minute session"]}),s.jsxs("p",{className:"subtle",children:[T.price," f-coins  ",(T.price/T.minutes*60).toFixed(1)," f-coins/hour"]})]}),s.jsx("button",{className:"ghost danger",disabled:oe,onClick:()=>{const fe=[...z.rate.packs];fe.splice(ie,1),re(z.id,{...z.rate,packs:fe})},children:"Remove"})]},T.minutes)),!F&&s.jsx("div",{style:{marginTop:"8px"},children:X?s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[s.jsx("input",{type:"number",placeholder:"Minutes",value:_,onChange:T=>O(Number(T.target.value)),min:"5",max:"120",style:{width:"80px"}}),s.jsx("input",{type:"number",placeholder:"Price",value:Z,onChange:T=>K(Number(T.target.value)),min:"1",max:"500",style:{width:"80px"}}),s.jsx("button",{className:"primary",disabled:oe,onClick:()=>{const T=[...z.rate.packs,{minutes:_,price:Z}];re(z.id,{...z.rate,packs:T}),b(!1),O(10),K(8)},children:"Add"}),s.jsx("button",{className:"ghost",onClick:()=>b(!1),children:"Cancel"})]}):s.jsx("button",{className:"ghost",disabled:oe,onClick:()=>b(!0),children:"+ Add pack"})})]})]})]}):s.jsx("div",{className:"empty-state",children:"Select an item to tune"})})]})})]})]})}const Ms=[{id:"sync",label:"Sync & Profile",description:"Devices, cloud sync, and identity."},{id:"activity",label:"Activity",description:"Idle thresholds and continuity rules."},{id:"paywall",label:"Paywall & Rituals",description:"Emergency access, peek, and journaling."},{id:"integrations",label:"Integrations",description:"Bring in external libraries."},{id:"domains",label:"Domains",description:"Productive vs neutral vs frivolous."},{id:"economy",label:"Economy",description:"Tune earn + spend profiles."},{id:"system",label:"System",description:"Reset data and permissions."}];function vm({api:e,theme:t,onThemeChange:n}){const[r,l]=d.useState(!1),[i,a]=d.useState(!1),[o,c]=d.useState(null),[p,x]=d.useState("sync"),[j,m]=d.useState(15),[w,g]=d.useState(15),[N,R]=d.useState("balanced"),[f,h]=d.useState(300),[u,y]=d.useState(""),[S,P]=d.useState(10),[v,C]=d.useState(!0),[D,$]=d.useState(!1),[Y,J]=d.useState(120),[_,O]=d.useState(""),[Z,K]=d.useState(2),[X,b]=d.useState(null),[I,H]=d.useState([]),[z,te]=d.useState(""),[oe,U]=d.useState(""),[ne,se]=d.useState("#7cf4d4"),[re,me]=d.useState(!1),[_e,$e]=d.useState({mode:"recent",collectionId:null,includeSubcollections:!0}),[Ce,Je]=d.useState([]),[F,W]=d.useState(!1),[ae,q]=d.useState("trophies"),[ge,Ee]=d.useState(!1),[V,xe]=d.useState(null),[ye,T]=d.useState(!1),[ie,fe]=d.useState([]),[ve,Ie]=d.useState(!1),[Ne,Se]=d.useState(null);d.useEffect(()=>{if(!V)return;const M=window.setTimeout(()=>xe(null),5e3);return()=>window.clearTimeout(M)},[V]),d.useEffect(()=>{e.settings.idleThreshold().then(m),e.settings.frivolousIdleThreshold().then(g),e.settings.emergencyPolicy().then(R),e.settings.emergencyReminderInterval().then(h),e.settings.journalConfig().then(M=>{y(M.url??""),P(M.minutes??10)}).catch(()=>{}),e.settings.peekConfig().then(M=>{C(M.enabled),$(M.allowOnNewPages)}).catch(()=>{}),e.settings.continuityWindowSeconds().then(J).catch(()=>{}),e.settings.productivityGoalHours().then(K).catch(()=>{}),e.settings.excludedKeywords().then(M=>{O((M??[]).join(`
`))}).catch(()=>{}),e.settings.cameraModeEnabled().then(T).catch(()=>{}),e.integrations.zotero.config().then($e).catch(()=>{})},[e.settings,e.integrations.zotero]);const he=async()=>{Ie(!0),Se(null);try{const M=await e.camera.listPhotos(120);fe(M)}catch(M){console.error("Failed to load camera photos",M),Se("Failed to load camera photos.")}finally{Ie(!1)}};d.useEffect(()=>{he()},[]);const vt=async()=>{if(!navigator.mediaDevices?.getUserMedia)throw new Error("Camera capture is not supported in this environment.");let M=null;try{M=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}finally{M?.getTracks().forEach(Q=>Q.stop())}},E=async M=>{if(Se(null),M)try{await vt()}catch(Q){console.error("Camera permission request failed",Q),Se("Camera access is blocked. Enable TimeWellSpent in macOS System Settings  Privacy & Security  Camera, then try again."),T(!1);return}T(M)},G=async()=>{try{const M=await e.sync.status();if(b(M),te(M.device?.name??""),M.configured&&M.authenticated){const Q=await e.friends.profile();U(Q?.handle??""),se(Q?.color??"#7cf4d4");const ze=await e.sync.listDevices();H(ze)}else H([])}catch(M){console.error("Failed to load sync status",M)}};d.useEffect(()=>{G()},[]);const je=d.useMemo(()=>_e.collectionId==null?null:Ce.find(M=>M.id===_e.collectionId)??null,[Ce,_e.collectionId]);async function qe(){W(!0);try{const M=await e.integrations.zotero.collections();Je(M)}catch(M){console.error("Failed to load Zotero collections",M),c("Failed to load Zotero collections. Is Zotero installed and opened at least once?")}finally{W(!1)}}async function ct(M){M?.preventDefault(),l(!0),a(!1),c(null);try{await e.settings.updateIdleThreshold(j),await e.settings.updateFrivolousIdleThreshold(w);const Q=_.split(/[\n,]+/).map(ze=>ze.trim().toLowerCase()).filter(Boolean);await e.settings.updateExcludedKeywords(Q),O(Q.join(`
`)),await e.settings.updateEmergencyPolicy(N),await e.settings.updateEmergencyReminderInterval(f),await e.settings.updateJournalConfig({url:u.trim()?u.trim():null,minutes:S}),await e.settings.updatePeekConfig({enabled:v,allowOnNewPages:D}),await e.settings.updateContinuityWindowSeconds(Y),await e.settings.updateProductivityGoalHours(Z),await e.settings.updateCameraModeEnabled(ye),await e.integrations.zotero.updateConfig(_e),a(!0),window.setTimeout(()=>a(!1),2e3)}catch(Q){c(Q.message||"Failed to save settings")}finally{l(!1)}}async function Jt(){if(ge)return;xe(null);const M={trophies:"This will clear all earned trophies, pinned trophies, and personal bests.",wallet:"This will zero your bank balance and erase wallet transactions.",all:"This will clear trophies, activity history, wallet, library, and sync state. This cannot be undone."};if(window.confirm(`${M[ae]}

Continue?`)&&!(ae==="all"&&!window.confirm("Final check: erase all local/cloud stats now?"))){Ee(!0),c(null);try{await e.system.reset(ae),xe({trophies:"Trophy case reset locally and in sync.",wallet:"Bank reset locally and in sync.",all:"All stats reset locally and in sync."}[ae]),await G()}catch(Q){c(Q.message||"Failed to reset")}finally{Ee(!1)}}}const qt=async M=>{try{await e.camera.revealPhoto(M)}catch(Q){console.error("Failed to reveal camera photo",Q),Se("Failed to reveal camera photo.")}},Ot=async M=>{if(window.confirm("Delete this photo?"))try{await e.camera.deletePhoto(M),fe(Q=>Q.filter(ze=>ze.id!==M))}catch(Q){console.error("Failed to delete camera photo",Q),Se("Failed to delete camera photo.")}},en=Ms.find(M=>M.id===p)??Ms[0],tn=Math.max(0,Ms.findIndex(M=>M.id===p))+1,kn=p!=="domains"&&p!=="economy";return s.jsxs("section",{className:"panel",children:[s.jsx("header",{className:"panel-header",children:s.jsxs("div",{children:[s.jsx("h1",{children:"Settings"}),s.jsx("p",{className:"subtle",children:"Tune policies, domains, economy, and sync."})]})}),o&&s.jsx("p",{className:"error-text",children:o}),s.jsxs("div",{className:"settings-layout",children:[s.jsx("nav",{className:"settings-nav","aria-label":"Settings sections",children:Ms.map(M=>s.jsxs("button",{type:"button",className:p===M.id?"active":"",onClick:()=>x(M.id),"aria-current":p===M.id?"page":void 0,children:[s.jsx("span",{className:"settings-nav-label",children:M.label}),s.jsx("span",{className:"settings-nav-desc",children:M.description})]},M.id))}),s.jsxs("div",{className:"settings-pane",children:[kn&&s.jsxs("div",{className:"settings-pane-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:en.label}),s.jsx("p",{className:"subtle",children:en.description})]}),s.jsxs("span",{className:"pill ghost",children:["Section ",tn," of ",Ms.length]})]}),p==="sync"&&s.jsx("div",{className:"settings-pane-body",children:s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Cloud sync"}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Keep wallet, library, and summaries aligned across devices."})]}),s.jsx("button",{type:"button",className:"ghost",onClick:G,disabled:re,children:"Refresh"})]}),!X?.configured&&s.jsx("p",{className:"subtle",children:"Supabase not configured. Add `SUPABASE_URL` and `SUPABASE_ANON_KEY`, then restart the app."}),X?.configured&&!X.authenticated&&s.jsxs("div",{className:"settings-actions",children:[s.jsx("button",{type:"button",className:"primary",onClick:async()=>{me(!0),await e.sync.signIn("google"),me(!1)},disabled:re,children:"Connect with Google"}),s.jsx("button",{type:"button",className:"secondary",onClick:async()=>{me(!0),await e.sync.signIn("github"),me(!1)},disabled:re,children:"Connect with GitHub"})]}),X?.configured&&X.authenticated&&s.jsxs("div",{className:"settings-stack",children:[s.jsxs("div",{className:"settings-pills",children:[s.jsx("span",{className:"pill ghost",children:X.user?.email??X.user?.id}),s.jsxs("span",{className:"pill ghost",children:["Device ",X.device?.id?.slice(0,8)]}),X.lastSyncAt&&s.jsxs("span",{className:"pill ghost",children:["Last sync ",new Date(X.lastSyncAt).toLocaleString()]})]}),s.jsxs("div",{className:"settings-row",children:[s.jsxs("label",{children:["Device name",s.jsx("input",{type:"text",value:z,onChange:M=>te(M.target.value),placeholder:"My MacBook"})]}),s.jsxs("label",{children:["Handle",s.jsx("input",{type:"text",value:oe,onChange:M=>U(M.target.value),placeholder:"your_handle"})]}),s.jsxs("label",{children:["Accent color",s.jsx("input",{type:"color",value:ne,onChange:M=>se(M.target.value)})]})]}),s.jsxs("div",{className:"settings-actions",children:[s.jsx("button",{type:"button",className:"primary",onClick:async()=>{me(!0),c(null);try{await e.sync.setDeviceName(z),await e.friends.updateProfile({handle:oe.trim()||void 0,color:ne}),await e.sync.syncNow(),await G()}catch(M){c(M.message||"Failed to sync now")}finally{me(!1)}},disabled:re,children:"Sync now"}),s.jsx("button",{type:"button",className:"secondary",onClick:async()=>{me(!0),await e.sync.signOut(),await G(),me(!1)},disabled:re,children:"Sign out"})]}),I.length>0&&s.jsx("div",{className:"devices-list",children:I.map(M=>s.jsxs("div",{className:`device-row ${M.isCurrent?"current":""}`,children:[s.jsxs("div",{children:[s.jsx("strong",{children:M.name}),s.jsx("span",{className:"subtle",children:M.platform})]}),s.jsx("span",{className:"subtle",children:M.lastSeenAt?`Seen ${new Date(M.lastSeenAt).toLocaleString()}`:"Pending"})]},M.id))})]})]})}),p==="activity"&&s.jsxs("form",{className:"settings-pane-form",onSubmit:ct,children:[s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Activity detection"}),s.jsx("p",{className:"subtle",children:"Tune idle detection."})]}),s.jsxs("div",{className:"settings-row",children:[s.jsxs("label",{children:["Idle threshold (seconds)",s.jsx("input",{type:"number",min:"5",max:"300",value:j,onChange:M=>m(Number(M.target.value))})]}),s.jsxs("label",{children:["Frivolous idle (seconds)",s.jsx("input",{type:"number",min:"5",max:"300",value:w,onChange:M=>g(Number(M.target.value))})]}),s.jsxs("label",{children:["Continuity window (seconds)",s.jsx("input",{type:"number",min:"0",max:"900",value:Y,onChange:M=>J(Number(M.target.value))})]})]}),s.jsx("div",{className:"settings-row",children:s.jsxs("label",{children:["Daily productivity goal (hours)",s.jsx("input",{type:"number",min:"0.5",max:"12",step:"0.1",value:Z,onChange:M=>K(Number(M.target.value))})]})}),s.jsxs("label",{children:["Keywords to exclude",s.jsx("textarea",{rows:3,value:_,onChange:M=>O(M.target.value),placeholder:"One keyword per line"})]}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Lower values mark passive browsing as idle sooner."}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Excluded keywords stay neutral and are hidden from stream trackers."}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Continuity keeps short research hops in the same productive run."}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Daily productivity goal powers the dashboard ring."})]}),s.jsx("div",{className:"settings-actions",children:s.jsx("button",{className:"primary",type:"submit",disabled:r,children:r?"Saving":i?"Saved!":"Save changes"})})]}),p==="paywall"&&s.jsxs("form",{className:"settings-pane-form",onSubmit:ct,children:[s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Paywall controls"}),s.jsx("p",{className:"subtle",children:"Emergency + peek behavior."})]}),s.jsxs("div",{className:"settings-row",children:[s.jsxs("label",{children:["Emergency policy",s.jsxs("select",{value:N,onChange:M=>R(M.target.value),children:[s.jsx("option",{value:"off",children:"Off"}),s.jsx("option",{value:"gentle",children:"Gentle"}),s.jsx("option",{value:"balanced",children:"Balanced"}),s.jsx("option",{value:"strict",children:"Strict"})]})]}),s.jsxs("label",{children:["Reminder interval (seconds)",s.jsx("input",{type:"number",min:"30",max:"3600",value:f,onChange:M=>h(Number(M.target.value))})]})]}),s.jsxs("details",{className:"settings-details",children:[s.jsx("summary",{children:"Policy details"}),s.jsxs("div",{className:"subtle",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Off"}),": no emergency access."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Gentle"}),": 5m, URL-locked, unlimited/day."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Balanced"}),": 3m, 2/day, 30m cooldown."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Strict"}),": 2m, 1/day, 60m cooldown."]})]})]}),s.jsxs("div",{className:"settings-inline",children:[s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:v,onChange:M=>C(M.target.checked)}),s.jsx("span",{className:"subtle",children:"Enable peek"})]}),s.jsxs("label",{style:{opacity:v?1:.6},children:[s.jsx("input",{type:"checkbox",checked:D,onChange:M=>$(M.target.checked),disabled:!v}),s.jsx("span",{className:"subtle",children:"Allow peek on new pages"})]})]})]}),s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Camera mode"}),s.jsx("p",{className:"subtle",children:"Captures a still every minute during frivolity. Stored locally on this Mac. macOS will prompt for camera access when enabling."})]}),s.jsxs("div",{className:"settings-inline",children:[s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:ye,onChange:M=>{E(M.target.checked)}}),s.jsx("span",{className:"subtle",children:"Enable camera mode"})]}),s.jsx("button",{type:"button",className:"ghost",onClick:he,disabled:ve,children:ve?"Refreshing":"Refresh gallery"}),s.jsxs("span",{className:"subtle",children:[ie.length," photos"]})]}),Ne&&s.jsx("p",{className:"error-text",children:Ne}),ie.length===0?s.jsx("p",{className:"subtle",style:{marginTop:12},children:"No photos yet."}):s.jsx("div",{className:"camera-gallery-grid",children:ie.map(M=>s.jsxs("div",{className:"camera-card",children:[s.jsx("img",{className:"camera-photo",src:M.fileUrl,alt:"Camera capture",loading:"lazy"}),s.jsxs("div",{className:"camera-meta",children:[s.jsx("strong",{children:M.subject??"Frivolity"}),s.jsx("span",{className:"subtle",children:new Date(M.capturedAt).toLocaleString()})]}),s.jsxs("div",{className:"camera-actions",children:[s.jsx("button",{type:"button",className:"ghost",onClick:()=>qt(M.id),children:"Reveal"}),s.jsx("button",{type:"button",className:"danger",onClick:()=>Ot(M.id),children:"Delete"})]})]},M.id))})]}),s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Journaling"}),s.jsx("p",{className:"subtle",children:"Quick launch for reset prompts."})]}),s.jsxs("label",{children:["Journal URL",s.jsx("input",{type:"text",placeholder:"https://app.tana.inc/",value:u,onChange:M=>y(M.target.value)})]}),s.jsxs("label",{style:{maxWidth:260},children:["Duration (minutes)",s.jsx("input",{type:"number",min:"1",max:"180",value:S,onChange:M=>P(Number(M.target.value))})]})]}),s.jsx("div",{className:"settings-actions",children:s.jsx("button",{className:"primary",type:"submit",disabled:r,children:r?"Saving":i?"Saved!":"Save changes"})})]}),p==="integrations"&&s.jsxs("form",{className:"settings-pane-form",onSubmit:ct,children:[s.jsxs("div",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Integrations"}),s.jsx("p",{className:"subtle",children:"Curate Try this instead."})]}),s.jsxs("label",{children:["Zotero source",s.jsxs("select",{value:_e.mode,onChange:M=>{const Q=M.target.value;$e(ze=>({...ze,mode:Q==="collection"?"collection":"recent"}))},children:[s.jsx("option",{value:"recent",children:"Recent items"}),s.jsx("option",{value:"collection",children:"Specific collection"})]})]}),_e.mode==="collection"&&s.jsxs("div",{className:"settings-stack",children:[s.jsxs("div",{className:"settings-actions",children:[s.jsx("button",{type:"button",className:"ghost",onClick:qe,disabled:F,children:F?"Loading":"Refresh collections"}),s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"checkbox",checked:_e.includeSubcollections,onChange:M=>$e(Q=>({...Q,includeSubcollections:M.target.checked}))}),s.jsx("span",{className:"subtle",children:"Include subcollections"})]})]}),s.jsxs("select",{value:_e.collectionId??"",onChange:M=>{const Q=M.target.value,ze=Q?Number(Q):null;$e(bt=>({...bt,collectionId:ze&&Number.isFinite(ze)?ze:null}))},children:[s.jsx("option",{value:"",children:"Select a collection"}),Ce.map(M=>s.jsx("option",{value:M.id,children:M.path},M.id))]}),s.jsx("p",{className:"subtle",style:{margin:0},children:je?`Selected: ${je.path}`:"No collection selected."})]})]}),s.jsx("div",{className:"settings-actions",children:s.jsx("button",{className:"primary",type:"submit",disabled:r,children:r?"Saving":i?"Saved!":"Save changes"})})]}),p==="domains"&&s.jsx(fm,{api:e,variant:"settings"}),p==="economy"&&s.jsx(mm,{api:e}),p==="system"&&s.jsxs("div",{className:"settings-pane-body",children:[s.jsxs("section",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Theme"}),s.jsx("p",{className:"subtle",children:"Choose your vibe."})]}),s.jsxs("div",{className:"settings-stack",children:[s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"radio",name:"theme",value:"lavender",checked:t==="lavender",onChange:()=>n("lavender")}),s.jsx("span",{children:"Lavender (default)"})]}),s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"radio",name:"theme",value:"olive",checked:t==="olive",onChange:()=>n("olive")}),s.jsx("span",{children:"Olive Garden Feast"})]})]})]}),V&&s.jsx("div",{className:`settings-banner ${ae==="all"?"danger":"success"}`,children:s.jsxs("div",{children:[s.jsx("strong",{children:V}),s.jsx("div",{className:"subtle",children:"You may need to refresh to see empty states."})]})}),s.jsxs("section",{className:"card settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Reset data"}),s.jsx("p",{className:"subtle",children:"Start fresh. Choose what to clear."})]}),s.jsxs("div",{className:"settings-stack",children:[s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"radio",name:"reset-scope",value:"trophies",checked:ae==="trophies",onChange:()=>q("trophies")}),s.jsx("span",{className:"subtle",children:"Reset trophy case only"})]}),s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"radio",name:"reset-scope",value:"wallet",checked:ae==="wallet",onChange:()=>q("wallet")}),s.jsx("span",{className:"subtle",children:"Reset bank only (wallet balance and transactions)"})]}),s.jsxs("label",{className:"settings-inline",children:[s.jsx("input",{type:"radio",name:"reset-scope",value:"all",checked:ae==="all",onChange:()=>q("all")}),s.jsx("span",{className:"subtle",children:"Reset everything (wallet, history, trophies, library)"})]}),s.jsx("p",{className:"subtle",style:{margin:0},children:"This also removes the selected data from cloud sync if you are signed in."}),s.jsx("button",{type:"button",className:"secondary",onClick:Jt,disabled:ge,children:ge?"Resetting":"Reset now"})]})]}),s.jsxs("section",{className:"card",children:[s.jsx("h2",{children:"Accessibility permissions"}),s.jsxs("ol",{className:"instructions",children:[s.jsx("li",{children:"Open System Settings  Privacy & Security  Accessibility."}),s.jsx("li",{children:"Click the lock to make changes and authenticate."}),s.jsx("li",{children:"Find TimeWellSpent in the list and toggle it on."}),s.jsx("li",{children:"Repeat under Automation to allow browser control."})]}),s.jsxs("p",{className:"subtle",children:["You can paste ",s.jsx("code",{children:"x-apple.systempreferences:com.apple.preference.security?Privacy_Accessibility"})," into Spotlight to jump there quickly."]})]})]})]})]})]})}function gm({api:e}){const[t,n]=d.useState("7d"),[r,l]=d.useState(null),[i,a]=d.useState([]),[o,c]=d.useState([]),[p,x]=d.useState([]),[j,m]=d.useState(!0),[w,g]=d.useState([]),N=d.useMemo(()=>{switch(t){case"24h":return 1;case"7d":return 7;case"30d":return 30}},[t]),R=d.useCallback(async()=>{m(!0);const[v,C,D,$]=await Promise.all([e.analytics.overview(N),e.analytics.timeOfDay(N),e.analytics.patterns(N),e.analytics.trends(N<=1?"hour":"day")]);l(v),a(C),c(D),x($),m(!1)},[e,N]);d.useEffect(()=>{R()},[R]),d.useEffect(()=>{e.settings.excludedKeywords().then(g).catch(()=>{})},[e]);const f=v=>{const C=v>=12?"PM":"AM";return`${v%12||12}${C}`},h=d.useMemo(()=>Math.max(...i.map(v=>v.productive+v.neutral+v.frivolity+v.draining+v.idle),1),[i]),u=d.useMemo(()=>o.filter(v=>v.toContext.category==="frivolity").slice(0,6),[o]),y=d.useCallback(v=>{if(!w.length)return!1;const C=v.toLowerCase();return w.some(D=>D&&C.includes(D))},[w]),S=d.useCallback(v=>v?y(v)?"Hidden":v:null,[y]),P=d.useCallback(v=>{if(!w.length)return v;let C=v;for(const D of w){if(!D)continue;const $=D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");C=C.replace(new RegExp($,"gi"),"[hidden]")}return C},[w]);return s.jsxs("section",{className:"panel analytics-panel",children:[s.jsxs("header",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Behavioral intelligence"}),s.jsx("h1",{children:"Analytics"})]}),s.jsxs("div",{className:"time-range-selector",children:[s.jsx("button",{className:t==="24h"?"active":"",onClick:()=>n("24h"),children:"24h"}),s.jsx("button",{className:t==="7d"?"active":"",onClick:()=>n("7d"),children:"7d"}),s.jsx("button",{className:t==="30d"?"active":"",onClick:()=>n("30d"),children:"30d"})]})]}),j?s.jsxs("div",{className:"panel-body analytics-loading",children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("p",{children:"Analyzing behavioral data..."})]}):s.jsxs("div",{className:"panel-body analytics-grid",children:[s.jsxs("div",{className:"analytics-overview",children:[s.jsxs("div",{className:"overview-card primary",children:[s.jsxs("div",{className:"overview-value",children:[r?.productivityScore??0,"%"]}),s.jsx("div",{className:"overview-label",children:"Productivity Score"}),s.jsxs("div",{className:`overview-trend trend-${r?.focusTrend??"stable"}`,children:[r?.focusTrend==="improving"&&" Improving",r?.focusTrend==="declining"&&" Declining",r?.focusTrend==="stable"&&" Stable"]})]}),s.jsxs("div",{className:"overview-card glow",children:[s.jsxs("div",{className:"overview-value",children:[r?Math.round(r.deepWorkSeconds/3600*10)/10:0,"h"]}),s.jsx("div",{className:"overview-label",children:"Deep Work"})]}),s.jsxs("div",{className:"overview-card",children:[s.jsxs("div",{className:"overview-value",children:[r?.totalActiveHours??0,"h"]}),s.jsx("div",{className:"overview-label",children:"Active Time"})]}),s.jsxs("div",{className:"overview-card",children:[s.jsx("div",{className:"overview-value",children:r?.totalSessions??0}),s.jsx("div",{className:"overview-label",children:"Sessions"})]}),s.jsxs("div",{className:"overview-card accent",children:[s.jsx("div",{className:"overview-value",children:f(r?.peakProductiveHour??9)}),s.jsx("div",{className:"overview-label",children:"Peak Focus Hour"})]}),s.jsxs("div",{className:"overview-card danger",children:[s.jsx("div",{className:"overview-value",children:f(r?.riskHour??15)}),s.jsx("div",{className:"overview-label",children:"Risk Hour"})]})]}),s.jsxs("div",{className:"card insights-card",children:[s.jsx("h2",{children:" AI Insights"}),s.jsxs("ul",{className:"insights-list",children:[(r?.insights??[]).map((v,C)=>s.jsx("li",{children:P(v)},C)),(r?.insights??[]).length===0&&s.jsx("li",{className:"subtle",children:"Keep using the app to generate insights..."})]})]}),s.jsxs("div",{className:"card heatmap-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:"Time of Day Activity"}),s.jsx("span",{className:"subtle",children:"24-hour pattern"})]}),s.jsx("div",{className:"time-heatmap",children:i.map(v=>{const C=v.productive+v.neutral+v.frivolity+v.draining+v.idle,D=C>0?Math.max(8,Math.round(C/h*100)):4,$=C>0?v.productive/C*100:0,Y=C>0?v.neutral/C*100:0,J=C>0?v.frivolity/C*100:0,_=C>0?v.draining/C*100:0,O=v.dominantCategory;return s.jsxs("div",{className:`heatmap-col ${O}`,title:`${f(v.hour)}: ${Math.round(C/60)}m total`,children:[s.jsxs("div",{className:"heatmap-bar",style:{height:`${D}%`},children:[s.jsx("span",{className:"bar-segment productive",style:{height:`${$}%`}}),s.jsx("span",{className:"bar-segment neutral",style:{height:`${Y}%`}}),s.jsx("span",{className:"bar-segment frivolity",style:{height:`${J}%`}}),s.jsx("span",{className:"bar-segment draining",style:{height:`${_}%`}})]}),s.jsx("span",{className:"heatmap-label",children:Yp(v.hour,Fl)%6===0?f(v.hour):""})]},v.hour)})}),s.jsxs("div",{className:"heatmap-legend",children:[s.jsxs("span",{children:[s.jsx("span",{className:"dot productive"})," Productive"]}),s.jsxs("span",{children:[s.jsx("span",{className:"dot neutral"})," Neutral"]}),s.jsxs("span",{children:[s.jsx("span",{className:"dot frivolity"})," Frivolity"]}),s.jsxs("span",{children:[s.jsx("span",{className:"dot draining"})," Draining"]}),s.jsxs("span",{children:[s.jsx("span",{className:"dot deepwork"})," Deep work"]})]})]}),s.jsxs("div",{className:"card breakdown-card",children:[s.jsx("h2",{children:"Category Breakdown"}),s.jsx("div",{className:"breakdown-bars",children:r&&["productive","deepWork","neutral","frivolity","draining","idle"].map(v=>{const C=Object.values(r.categoryBreakdown).reduce((J,_)=>J+_,0),D=v==="deepWork"?r.deepWorkSeconds:r.categoryBreakdown[v]??0,$=C>0?Math.round(D/C*100):0,Y=Math.round(D/3600*10)/10;return s.jsxs("div",{className:"breakdown-row",children:[s.jsx("span",{className:"breakdown-label",children:v==="deepWork"?"deep work":v}),s.jsx("div",{className:"breakdown-bar-track",children:s.jsx("div",{className:`breakdown-bar-fill ${v}`,style:{width:`${$}%`}})}),s.jsxs("span",{className:"breakdown-value",children:[Y,"h"]}),s.jsxs("span",{className:"breakdown-percent",children:[$,"%"]})]},v)})})]}),s.jsxs("div",{className:"card trends-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:"Activity Trends"}),s.jsx("span",{className:"subtle",children:"Quality over time"})]}),s.jsx("div",{className:"trends-chart",children:p.map((v,C)=>{const D=v.draining??0,$=v.productive+v.neutral+v.frivolity+D,Y=Math.max(...p.map(H=>H.productive+H.neutral+H.frivolity+(H.draining??0)),1),J=Math.max(4,Math.round($/Y*100)),_=$>0?v.deepWork/$*100:0,O=$>0?D/$*100:0,Z=$>0?v.frivolity/$*100:0,K=$>0?v.neutral/$*100:0,X=O,b=O+Z,I=O+Z+K;return s.jsxs("div",{className:"trend-bar",title:`${v.label}: ${Math.round($/60)}m active, ${v.qualityScore}% quality`,children:[s.jsx("div",{className:"trend-bar-fill",style:{height:`${J}%`,background:`linear-gradient(to top, 
                          var(--cat-draining) ${X||0}%, 
                          var(--cat-frivolity) ${b||0}%, 
                          var(--cat-neutral) ${I||50}%, 
                          var(--cat-productive) 100%)`},children:_>0&&s.jsx("span",{className:"trend-deepwork-overlay",style:{height:`${_}%`}})}),s.jsx("span",{className:"trend-label",children:v.label})]},C)})})]}),s.jsxs("div",{className:"card patterns-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:" What Leads to Frivolity"}),s.jsx("span",{className:"subtle",children:"Transition patterns"})]}),s.jsxs("ul",{className:"patterns-list",children:[u.map((v,C)=>s.jsxs("li",{className:"pattern-row",children:[s.jsxs("div",{className:"pattern-from",children:[s.jsx("span",{className:`category-chip category-${v.fromContext.category??"neutral"}`,children:v.fromContext.category??"neutral"}),s.jsx("span",{className:"pattern-domain",children:S(v.fromContext.domain)??"Any"})]}),s.jsx("span",{className:"pattern-arrow",children:""}),s.jsxs("div",{className:"pattern-to",children:[s.jsx("span",{className:"category-chip category-frivolity",children:"frivolity"}),s.jsx("span",{className:"pattern-domain",children:S(v.toContext.domain)??"Any"})]}),s.jsxs("div",{className:"pattern-stats",children:[s.jsxs("span",{className:"pattern-frequency",children:[v.frequency,""]}),s.jsxs("span",{className:"pattern-time",children:[Math.round(v.avgTimeBefore/60),"m avg"]})]})]},C)),u.length===0&&s.jsx("li",{className:"subtle",children:"No significant patterns detected yet"})]})]}),r?.topEngagementDomain&&s.jsxs("div",{className:"card top-domain-card",children:[s.jsx("h2",{children:" Top Engagement"}),s.jsx("div",{className:"top-domain-name",children:S(r.topEngagementDomain)}),s.jsx("p",{className:"subtle",children:"Most time spent domain this period"})]})]})]})}const ym=(e,t,n)=>Math.min(Math.max(e,t),n);function xm({open:e,state:t,wallet:n,api:r,marketRates:l,onWallet:i,onClose:a}){const[o,c]=d.useState(!1),[p,x]=d.useState(null),[j,m]=d.useState(15),w=d.useMemo(()=>{if(t)return l.find(b=>b.domain===t.domain)},[l,t?.domain]),g=d.useMemo(()=>{const b=w?.packs.map(te=>te.minutes)??[],I=b.length?Math.min(...b):10,H=b.length?Math.max(...b):30,z=Math.max(H,I+15,45);return{min:Math.max(5,I),max:z,step:5}},[w]);if(d.useEffect(()=>{if(!e||!t)return;const b=w?.packs?.[0]?.minutes??g.min;m(ym(b,g.min,g.max))},[e,w,g.max,g.min,t?.domain]),d.useEffect(()=>{e&&x(null)},[e,t?.domain]),!e||!t)return null;async function N(){if(t){c(!0),x(null);try{await r.paywall.startMetered(t.domain);const b=await r.wallet.get();i(b),a()}catch(b){console.error(b),x(b.message)}finally{c(!1)}}}async function R(b){if(t){c(!0),x(null);try{await r.paywall.buyPack(t.domain,b);const I=await r.wallet.get();i(I),a()}catch(I){console.error(I),x(I.message)}finally{c(!1)}}}const f=t.reason==="blocked",h=t.reason==="insufficient-funds",u=w?.ratePerMin??t.ratePerMin??0,y=w?.packs.find(b=>b.minutes===j),S=y?y.price:Math.max(1,Math.round(j*u)),P=n.balance>0?Math.min(1,S/n.balance):1,v=Math.max(0,n.balance-S),C=72,D=2*Math.PI*C,$=D*(1-P),Y=n.balance>=S,J=Math.round((g.min+g.max)/2),_=n.balance>0?Math.min(1,u*15/n.balance):1,O=Math.min(1,j/(24*60)),Z=P*100,K=Math.round(O*100),X=[{label:"Quick peek",minutes:Math.max(5,Math.round(j*.4))},{label:"This choice",minutes:j},{label:"Deep dive",minutes:Math.min(120,Math.round(j*1.6))}].map(b=>({...b,cost:Math.max(1,Math.round(b.minutes*u))}));return s.jsx("div",{className:"paywall-overlay",children:s.jsxs("div",{className:"paywall-modal",children:[s.jsxs("header",{className:"paywall-modal-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:t.domain}),s.jsx("p",{className:"subtle",children:f?"Access blocked  unlock by spending f-coins.":"Spend f-coins to access this site."})]}),s.jsx("button",{className:"close-button",onClick:a,"aria-label":"Close paywall",children:""})]}),s.jsxs("div",{className:"wallet-inline",children:[s.jsx("span",{children:"Balance"}),s.jsxs("strong",{children:[n.balance," f-coins"]})]}),f&&!p&&s.jsx("p",{className:"warning",children:"Start a metered session or buy a time pack to access this site."}),h&&!p&&s.jsx("p",{className:"warning",children:"Session paused  add more coins or choose a smaller pack."}),s.jsxs("section",{className:"spend-lab",children:[s.jsxs("div",{className:"budget-visual",children:[s.jsxs("div",{className:"budget-circle",role:"img","aria-label":`Spending ${S} coins for ${j} minutes`,children:[s.jsxs("svg",{viewBox:"0 0 200 200",width:"200",height:"200",children:[s.jsx("circle",{className:"budget-track",cx:"100",cy:"100",r:C,strokeWidth:"14"}),s.jsx("circle",{className:"budget-fill",cx:"100",cy:"100",r:C,strokeWidth:"14",strokeDasharray:D,strokeDashoffset:$})]}),s.jsxs("div",{className:"budget-figures",children:[s.jsxs("strong",{children:[S," f-coins"]}),s.jsxs("span",{children:[j," minute session"]}),s.jsxs("small",{className:"subtle",children:[Z.toFixed(0),"% of balance"]})]})]}),s.jsxs("div",{className:"impact-bars",children:[s.jsxs("div",{children:[s.jsx("div",{className:"impact-label",children:"Wallet impact"}),s.jsx("div",{className:"impact-meter",children:s.jsx("span",{style:{width:`${Z}%`}})}),s.jsxs("small",{className:"subtle",children:["Leaves ",v," f-coins"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"impact-label",children:"Day share"}),s.jsx("div",{className:"impact-meter day",children:s.jsx("span",{style:{width:`${K}%`}})}),s.jsxs("small",{className:"subtle",children:[K,"% of your day if you stay that long"]})]})]})]}),s.jsxs("div",{className:"budget-controls",children:[s.jsx("div",{className:"eyebrow",children:"Session length"}),s.jsx("p",{className:"subtle",children:"Choose how long you want to access this site."}),s.jsx("input",{id:"focus-budget",type:"range",min:g.min,max:g.max,step:g.step,value:j,onChange:b=>m(Number(b.target.value))}),s.jsxs("div",{className:"budget-scale",children:[s.jsxs("span",{children:[g.min," min"]}),s.jsxs("span",{children:[J," min"]}),s.jsxs("span",{children:[g.max,"+ min"]})]}),s.jsx("div",{className:"projection-grid",children:X.map(b=>s.jsxs("div",{className:"projection-card",children:[s.jsxs("div",{className:"projection-minutes",children:[b.minutes,"m"]}),s.jsx("div",{className:"projection-label",children:b.label}),s.jsxs("div",{className:"projection-cost",children:[b.cost," coins"]}),s.jsx("div",{className:"projection-bar",children:s.jsx("span",{style:{width:`${Math.min(100,b.cost/Math.max(n.balance,b.cost)*100)}%`}})})]},b.label))}),s.jsxs("button",{className:"primary",disabled:o||!Y,onClick:()=>R(j),children:["Unlock for ",S," f-coins"]}),!Y&&s.jsxs("p",{className:"warning subtle",children:["Need ",S-n.balance," more f-coins."]})]})]}),s.jsxs("section",{className:"paywall-section",children:[s.jsx("div",{className:"eyebrow",children:"Other unlocks"}),s.jsxs("div",{className:"option-grid",children:[s.jsxs("button",{className:"option-card",disabled:o,onClick:N,children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Pay as you go"}),s.jsx("p",{className:"subtle",children:"Only pay while the tab is active."})]}),s.jsx("div",{className:"option-meter",children:s.jsx("span",{style:{width:`${_*100}%`}})}),s.jsxs("small",{className:"chip",children:[u," f-coins/min"]})]}),w?.packs.map(b=>{const I=n.balance>0?Math.min(1,b.price/n.balance):1;return s.jsxs("button",{className:"option-card",disabled:o||n.balance<b.price,onClick:()=>R(b.minutes),children:[s.jsxs("div",{children:[s.jsxs("strong",{children:[b.minutes," minute session"]}),s.jsx("p",{className:"subtle",children:"Fixed time  pause anytime."})]}),s.jsx("div",{className:"option-meter",children:s.jsx("span",{style:{width:`${I*100}%`}})}),s.jsxs("small",{className:"chip",children:[b.price," f-coins"]})]},b.minutes)})]})]}),typeof t.remainingSeconds=="number"&&t.remainingSeconds>0&&s.jsxs("p",{className:"subtle",children:["Remaining: ",Math.round(t.remainingSeconds/60)," min"]})]})})}const Un=[{value:"replace",label:"Replace",hint:"Shown in Try this instead when you hit a paywall."},{value:"productive",label:"Productive",hint:"Counts as productive time and appears in your productive shelf."},{value:"allow",label:"Allow",hint:"Good stuff you want nearby. Optional one-time unlock pricing."},{value:"temptation",label:"Temptation",hint:"Things you enjoy, but want contained and intentional."}];function jm(e){return Un.find(t=>t.value===e)?.label??e}function wm(e){return e==="replace"||e==="productive"?"productive":e==="temptation"?"frivolity":"neutral"}function Nm(e){let t=e.trim();if(!t)return null;!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`https://${t}`);try{return new URL(t),t}catch{return null}}function Uc(e){const t=Number(e);return!Number.isFinite(t)||!Number.isInteger(t)||t<1?null:t}function pi(e){return new Date(e).toLocaleDateString()}function Sm(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function km(e){return new Date(`${e}T00:00:00`).toLocaleDateString([],{month:"short",day:"numeric"})}function bm(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function Cm(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function Em(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}function ua(e){try{return new URL(e).hostname.replace(/^www\./,"")}catch{return e}}function Pm(e){const t=ua(e);return`https://www.google.com/s2/favicons?domain=${encodeURIComponent(t)}&sz=64`}function Mm(e){return`https://image.thum.io/get/width/640/${encodeURIComponent(e)}`}function Tm({api:e}){const[t,n]=d.useState([]),[r,l]=d.useState(!0),[i,a]=d.useState("replace"),[o,c]=d.useState(!1),[p,x]=d.useState("library"),[j,m]=d.useState(()=>bm(new Date)),[w,g]=d.useState([]),[N,R]=d.useState([]),[f,h]=d.useState(!1),[u,y]=d.useState(null),[S,P]=d.useState(!1),[v,C]=d.useState(""),[D,$]=d.useState("replace"),[Y,J]=d.useState(!1),[_,O]=d.useState(12),[Z,K]=d.useState(""),[X,b]=d.useState(""),[I,H]=d.useState(!1),[z,te]=d.useState(null),[oe,U]=d.useState(null),[ne,se]=d.useState("replace"),[re,me]=d.useState(!1),[_e,$e]=d.useState(12),[Ce,Je]=d.useState(""),[F,W]=d.useState(""),[ae,q]=d.useState(!1),[ge,Ee]=d.useState(null),[V,xe]=d.useState(!1),ye=d.useCallback(async()=>{try{const E=await e.library.list();n(E),oe&&!E.some(G=>G.id===oe)&&U(null)}catch(E){console.error("Failed to load library items:",E)}finally{l(!1)}},[e.library,oe]),T=d.useCallback(async E=>{h(!0),y(null);try{const[G,je]=await Promise.all([e.history.list(E),e.history.days(30)]);g(G),R(je)}catch(G){console.error("Failed to load consumption history:",G),y(G.message||"Failed to load history")}finally{h(!1)}},[e.history]);d.useEffect(()=>{ye()},[ye]),d.useEffect(()=>{p==="history"&&T(j)},[j,T,p]),d.useEffect(()=>{const E=e.events.on("library:changed",()=>ye());return()=>E()},[e,ye]),d.useEffect(()=>{p==="history"&&P(!1)},[p]);const ie=d.useMemo(()=>{let E=i==="all"?t:t.filter(G=>G.purpose===i);return o&&(E=E.filter(G=>typeof G.price=="number")),E},[i,t,o]),fe=()=>{C(""),$("replace"),J(!1),O(12),K(""),b(""),H(!1),te(null)},ve=async E=>{E.preventDefault(),te(null);const G=Nm(v);if(!G)return te("Enter a valid URL (e.g. https://example.com).");let je=null;if(D==="allow"&&Y){const qe=Uc(_);if(!qe)return te("Unlock price must be a whole number of at least 1.");je=qe}xe(!0);try{await e.library.add({kind:"url",url:G,title:Z.trim()||void 0,note:X.trim()||void 0,purpose:D,price:je,isPublic:I}),P(!1),fe(),await ye()}catch(qe){te(qe.message||"Failed to add item")}finally{xe(!1)}},Ie=E=>{U(E.id),se(E.purpose),me(typeof E.price=="number"),$e(typeof E.price=="number"?E.price:12),Je(E.title??""),W(E.note??""),q(!!E.isPublic),Ee(null)},Ne=()=>{U(null),Ee(null)},Se=async E=>{if(E.preventDefault(),!oe)return;Ee(null);let G=null;if(ne==="allow"&&re){const je=Uc(_e);if(!je)return Ee("Unlock price must be a whole number of at least 1.");G=je}xe(!0);try{const je=Ce.trim(),qe=F.trim();await e.library.update(oe,{title:je||null,note:qe||null,purpose:ne,price:G,isPublic:ae}),U(null),await ye()}catch(je){Ee(je.message||"Failed to update item")}finally{xe(!1)}},he=async E=>{if(confirm("Remove this item from your library?"))try{await e.library.remove(E),await ye()}catch(G){console.error("Failed to remove library item:",G)}},vt=async E=>{xe(!0);try{const G=E.consumedAt?null:new Date().toISOString();await e.library.update(E.id,{consumedAt:G}),await ye()}catch(G){console.error("Failed to update consumed status:",G)}finally{xe(!1)}};return r?s.jsx("div",{className:"panel",children:"Loading library..."}):s.jsxs("section",{className:"page store-page",children:[s.jsxs("header",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Library"}),s.jsx("p",{className:"subtle",children:p==="history"?"Review what you consumed by day  productive items and frivolous sessions.":"A calm, curated pool of what I meant to do. Replace is what the paywall offers you first."}),s.jsxs("div",{className:"library-tabs",children:[s.jsx("button",{type:"button",className:`library-tab ${p==="library"?"active":""}`,onClick:()=>x("library"),children:"Library"}),s.jsx("button",{type:"button",className:`library-tab ${p==="history"?"active":""}`,onClick:()=>x("history"),children:"History"})]})]}),p==="library"&&s.jsx("button",{className:"primary",onClick:()=>P(!0),children:"+ Add Link"})]}),p==="library"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"settings-grid",style:{gridTemplateColumns:"1fr auto",gap:14},children:[s.jsxs("label",{children:["View",s.jsxs("select",{value:i,onChange:E=>a(E.target.value),disabled:V,children:[s.jsx("option",{value:"replace",children:"Replace"}),s.jsx("option",{value:"productive",children:"Productive"}),s.jsx("option",{value:"allow",children:"Allow"}),s.jsx("option",{value:"temptation",children:"Temptation"}),s.jsx("option",{value:"all",children:"All"})]})]}),s.jsxs("label",{style:{display:"flex",gap:10,alignItems:"center",marginTop:22},children:[s.jsx("input",{type:"checkbox",checked:o,onChange:E=>c(E.target.checked),disabled:V}),s.jsx("span",{className:"subtle",children:"Priced only"})]})]}),s.jsx("p",{className:"subtle",style:{marginTop:8},children:i==="all"?"All library items.":Un.find(E=>E.value===i)?.hint})]}),S&&s.jsxs("div",{className:"card add-item-form",children:[s.jsx("h3",{children:"Add to Library"}),s.jsxs("form",{onSubmit:ve,children:[z&&s.jsx("p",{className:"error-text",children:z}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"URL"}),s.jsx("input",{type:"text",placeholder:"https://",value:v,onChange:E=>C(E.target.value),disabled:V})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Purpose"}),s.jsx("select",{value:D,onChange:E=>{const G=E.target.value;$(G),G!=="allow"&&J(!1)},disabled:V,children:Un.map(E=>s.jsx("option",{value:E.value,children:E.label},E.value))}),s.jsx("p",{className:"subtle",style:{marginTop:8},children:Un.find(E=>E.value===D)?.hint})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:Y,disabled:V||D!=="allow",onChange:E=>J(E.target.checked)}),"One-time unlock price (optional)"]}),s.jsx("input",{type:"number",min:1,max:500,step:1,value:_,disabled:V||D!=="allow"||!Y,onChange:E=>{const G=Number.parseInt(E.target.value,10);O(Number.isNaN(G)?1:G)}}),s.jsxs("p",{className:"subtle",style:{marginTop:8},children:["Pricing only applies to ",s.jsx("strong",{children:"Allow"})," items. It appears under Proceed anyway when you land on that exact URL."]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Title (optional)"}),s.jsx("input",{type:"text",value:Z,onChange:E=>K(E.target.value),disabled:V})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Note (optional)"}),s.jsx("textarea",{value:X,onChange:E=>b(E.target.value),disabled:V})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsxs("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:I,disabled:V,onChange:E=>H(E.target.checked)}),"Share with friends (public)"]}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Only friends will see this in their feeds."})]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{type:"button",className:"ghost",onClick:()=>{P(!1),fe()},disabled:V,children:"Cancel"}),s.jsx("button",{type:"submit",className:"primary",disabled:V,children:"Add"})]})]})]}),ie.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"No items here yet."}),s.jsx("p",{className:"subtle",children:"Tip: right-click a page or link and Save to TimeWellSpent."})]}):s.jsx("div",{className:"library-grid",children:ie.map(E=>{const G=E.title||E.domain||E.app||"Saved item",je=E.note||(E.url?ua(E.url):E.app||E.domain||""),qe=E.url?ua(E.url):"",ct=E.url?Pm(E.url):null,Jt=E.url?Mm(E.url):null,qt=E.domain??E.app??G,en={"--cover-hue":`${Em(qt)%360}`},tn=G.trim().charAt(0).toUpperCase()||"T",kn=oe===E.id,M=E.consumedAt?"Unmark done":"Mark done";return s.jsxs("article",{className:`card library-card ${E.consumedAt?"is-done":""}`,children:[s.jsxs("div",{className:`library-thumb ${E.kind==="app"?"app":""}`,style:en,children:[Jt&&E.kind==="url"&&s.jsx("img",{src:Jt,alt:"",loading:"lazy",onError:Q=>{Q.currentTarget.style.display="none"}}),s.jsxs("div",{className:"library-thumb-fallback",children:[s.jsx("span",{children:tn}),E.kind==="app"&&s.jsx("small",{children:"App"})]}),ct?s.jsx("img",{className:"library-favicon",src:ct,alt:"",loading:"lazy"}):s.jsx("div",{className:"library-favicon library-favicon-placeholder","aria-hidden":"true"}),E.consumedAt&&s.jsx("div",{className:"library-done-badge",title:"Completed",children:""})]}),s.jsxs("div",{className:"library-body",children:[s.jsxs("div",{className:"library-title-row",children:[s.jsxs("div",{children:[s.jsx("h3",{children:G}),s.jsx("p",{className:"subtle",children:je})]}),s.jsx("span",{className:`pill ${wm(E.purpose)}`,children:jm(E.purpose)})]}),s.jsxs("div",{className:"library-meta",children:[s.jsx("span",{children:qe||E.app||"Saved item"}),typeof E.price=="number"&&s.jsxs("span",{children:[E.price," f-coins unlock"]}),E.isPublic&&s.jsx("span",{children:"Public to friends"}),E.kind==="app"&&s.jsx("span",{children:"Desktop app"})]}),s.jsxs("div",{className:"library-dates",children:[s.jsxs("span",{children:["Added ",pi(E.createdAt)]}),E.consumedAt?s.jsxs("span",{children:["Done ",pi(E.consumedAt)]}):E.lastUsedAt?s.jsxs("span",{children:["Last used ",pi(E.lastUsedAt)]}):s.jsx("span",{children:"Not used yet"})]}),s.jsxs("div",{className:"library-actions",children:[E.url?s.jsx("a",{href:E.url,target:"_blank",rel:"noopener noreferrer",className:"icon-button",title:"Open link","aria-label":"Open link",children:s.jsx(Wc,{})}):s.jsx("button",{className:"icon-button",type:"button",disabled:!0,title:"Open link","aria-label":"Open link",children:s.jsx(Wc,{})}),s.jsx("button",{className:"icon-button",type:"button",onClick:()=>vt(E),disabled:V,title:M,"aria-label":M,children:s.jsx(Dm,{})}),kn?s.jsx("button",{className:"icon-button",onClick:Ne,disabled:V,title:"Cancel edit","aria-label":"Cancel edit",children:"X"}):s.jsx("button",{className:"icon-button",onClick:()=>Ie(E),disabled:V,title:"Edit","aria-label":"Edit",children:s.jsx(Lm,{})}),s.jsx("button",{className:"icon-button danger",onClick:()=>he(E.id),disabled:V,title:"Remove","aria-label":"Remove",children:s.jsx(_m,{})})]}),kn&&s.jsxs("form",{className:"library-edit",onSubmit:Se,children:[ge&&s.jsx("p",{className:"error-text",children:ge}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsx("label",{children:"Purpose"}),s.jsx("select",{value:ne,onChange:Q=>{const ze=Q.target.value;se(ze),ze!=="allow"&&me(!1)},disabled:V,children:Un.map(Q=>s.jsx("option",{value:Q.value,children:Q.label},Q.value))}),s.jsx("p",{className:"subtle",style:{margin:0},children:Un.find(Q=>Q.value===ne)?.hint})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsxs("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:re,disabled:V||ne!=="allow",onChange:Q=>me(Q.target.checked)}),"One-time unlock price (optional)"]}),s.jsx("input",{type:"number",min:1,max:500,step:1,value:_e,disabled:V||ne!=="allow"||!re,onChange:Q=>{const ze=Number.parseInt(Q.target.value,10);$e(Number.isNaN(ze)?1:ze)}})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsx("label",{children:"Title"}),s.jsx("input",{type:"text",value:Ce,onChange:Q=>Je(Q.target.value),disabled:V})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsx("label",{children:"Note"}),s.jsx("textarea",{value:F,onChange:Q=>W(Q.target.value),disabled:V})]}),s.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[s.jsxs("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:ae,disabled:V||E.kind==="app",onChange:Q=>q(Q.target.checked)}),"Share with friends (public)"]}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Only friends will see this in their feeds."})]}),s.jsx("div",{className:"form-actions",style:{justifyContent:"flex-end"},children:s.jsx("button",{type:"submit",className:"primary",disabled:V,children:"Save"})})]})]})]},E.id)})})]}),p==="history"&&s.jsxs("div",{className:"card history-card",children:[s.jsxs("div",{className:"history-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Consumption log"}),s.jsx("p",{className:"subtle",children:"Productive items and frivolous sessions you opened each day."})]}),s.jsxs("label",{className:"history-picker",children:["Day",s.jsx("input",{type:"date",value:j,onChange:E=>m(E.target.value)})]})]}),N.length>0&&s.jsx("div",{className:"history-days",children:N.map(E=>s.jsxs("button",{type:"button",className:`history-day ${E.day===j?"active":""}`,onClick:()=>m(E.day),children:[s.jsx("span",{children:km(E.day)}),s.jsx("span",{className:"history-day-count",children:E.count})]},E.day))}),f?s.jsx("div",{className:"subtle",children:"Loading history"}):u?s.jsx("div",{className:"error-text",children:u}):w.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"No entries for this day yet."}),s.jsx("p",{className:"subtle",children:"Mark items as consumed or open a session to see them here."})]}):s.jsx("ul",{className:"history-list",children:w.map(E=>{const G=E.kind==="frivolous-session",je=typeof E.meta?.purpose=="string"?E.meta.purpose:null,ct=G?"pill frivolity":`pill ${je==="temptation"?"frivolity":je==="productive"||je==="replace"?"productive":"neutral"}`,Jt=E.title??E.domain??"Untitled",qt=G?`Mode ${E.meta?.mode??"session"}`:E.url??E.domain??"Library item",Ot=typeof E.meta?.mode=="string"?E.meta.mode:null,en=G?Ot==="store"?"Store unlock":"Frivolous session":je?`${Cm(je)} item`:"Library item";return s.jsxs("li",{className:"history-item",children:[s.jsx("div",{className:"history-time",children:Sm(E.occurredAt)}),s.jsxs("div",{className:"history-main",children:[s.jsx("strong",{children:Jt}),s.jsx("span",{className:"subtle",children:qt})]}),s.jsxs("div",{className:"history-actions",children:[s.jsx("span",{className:ct,children:en}),E.url&&s.jsx("a",{className:"ghost",href:E.url,target:"_blank",rel:"noopener noreferrer",children:"Open"})]})]},E.id)})})]})]})}function Wc(){return s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M14 4h6v6M10 14l10-10M20 14v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h4"})})}function Dm(){return s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M5 13l4 4L19 7"})})}function Lm(){return s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M4 20h4l10-10-4-4L4 16v4zM14 6l4 4"})})}function _m(){return s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M6 7h12M9 7V5h6v2M8 7l1 12h6l1-12"})})}function mi(e){return e.trim().replace(/^@/,"").toLowerCase()}function Ts(e){const t=e/3600;return t>=10?`${t.toFixed(0)}h`:`${t.toFixed(1)}h`}function Ar(e){return`${Math.max(0,Math.min(100,Math.round(e)))}%`}function vi(e){return`${Math.round(e/60)}m`}function Vc(e){return typeof e!="number"?"":String(e)}function Qc(e,t){const n=e?.categoryBreakdown.productive??0,r=t?.categoryBreakdown.productive??0,l=n+r;return l===0?50:Math.round(n/l*100)}function $m({api:e}){const[t,n]=d.useState(null),[r,l]=d.useState([]),[i,a]=d.useState({incoming:[],outgoing:[]}),[o,c]=d.useState({}),[p,x]=d.useState(null),[j,m]=d.useState(null),[w,g]=d.useState(null),[N,R]=d.useState(null),[f,h]=d.useState([]),[u,y]=d.useState(!1),[S,P]=d.useState([]),[v,C]=d.useState(""),[D,$]=d.useState(""),[Y,J]=d.useState(null),[_,O]=d.useState(!1),[Z,K]=d.useState(null),[X,b]=d.useState(!1),[I,H]=d.useState(!1);async function z(){K(null);try{const F=await e.sync.status(),W=F.configured&&F.authenticated;if(b(W),!W)return;const[ae,q,ge,Ee,V,xe,ye]=await Promise.all([e.friends.profile(),e.friends.list(),e.friends.requests(),e.friends.summaries(24),e.friends.meSummary(24),e.trophies.list(),e.settings.competitiveOptIn()]);n(ae),m(ae),C(ae?.handle??""),l(q),a(ge),c(Ee),x(V),P(xe),H(ye)}catch(F){console.error(F),K(F.message)}}d.useEffect(()=>{z()},[]);const te=d.useMemo(()=>r.map(F=>{const W=o[F.userId],ae=W?.categoryBreakdown??null,q=W?.totalActiveSeconds??0,ge=ae?.draining??0,Ee=q>0?ae.productive/q*100:0,V=q>0?ae.neutral/q*100:0,xe=q>0?ae.frivolity/q*100:0,ye=q>0?ge/q*100:0;return{friend:F,summary:W,totals:ae,productivePct:Ee,neutralPct:V,frivolityPct:xe,drainingPct:ye}}),[r,o]),oe=d.useMemo(()=>{const F=new Map;return S.forEach(W=>F.set(W.id,W)),F},[S]);async function U(){K(null),O(!0);try{const F=await e.friends.updateProfile({handle:mi(v)});n(F),C(F.handle??"")}catch(F){K(F.message)}finally{O(!1)}}async function ne(){J(null);const F=mi(D);if(F)try{const W=await e.friends.findByHandle(F);J(W)}catch{J(null)}}async function se(){K(null),O(!0);try{await e.friends.request(mi(D)),$(""),J(null),await z()}catch(F){K(F.message)}finally{O(!1)}}async function re(F){O(!0),K(null);try{await e.friends.accept(F),await z()}catch(W){K(W.message)}finally{O(!1)}}async function me(F){O(!0),K(null);try{await e.friends.decline(F),await z()}catch(W){K(W.message)}finally{O(!1)}}async function _e(F){O(!0),K(null);try{await e.friends.cancel(F),await z()}catch(W){K(W.message)}finally{O(!1)}}async function $e(F){if(confirm("Remove this friend?")){O(!0),K(null);try{await e.friends.remove(F),await z()}catch(W){K(W.message)}finally{O(!1)}}}async function Ce(F){g(F),R(null),h([]),y(!0);try{const[W,ae]=await Promise.all([e.friends.timeline(F.userId,24),e.friends.publicLibrary(F.userId,168)]);R(W),h(ae??[])}catch(W){console.error("Failed to load friend detail",W)}}async function Je(F){H(F);try{await e.settings.updateCompetitiveOptIn(F)}catch(W){K(W.message||"Failed to update preference"),H(!F)}}return X?s.jsxs("section",{className:"page store-page",children:[s.jsxs("header",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Friends"}),s.jsx("p",{className:"subtle",children:"A low-key feed of daily focus  aggregates only (no URLs)."})]}),s.jsx("div",{style:{display:"flex",gap:10},children:s.jsx("button",{className:"ghost",disabled:_,onClick:z,children:"Refresh"})})]}),Z&&s.jsx("p",{className:"error-text",children:Z}),s.jsxs("div",{className:"card settings-section",style:{marginBottom:16},children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("h3",{children:"Competitive view"}),s.jsx("p",{className:"subtle",style:{margin:0},children:"Opt in to show winners/losers and head-to-head bars."})]}),s.jsx("div",{className:"settings-row",children:s.jsxs("label",{className:"settings-inline",style:{alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:I,onChange:F=>Je(F.target.checked)}),s.jsx("span",{className:"subtle",children:I?"Enabled":"Disabled"})]})})]}),s.jsxs("div",{className:"card",style:{marginBottom:16},children:[s.jsx("h3",{children:"Your handle"}),s.jsxs("div",{className:"settings-grid",style:{gridTemplateColumns:"1fr auto",alignItems:"end"},children:[s.jsxs("label",{children:["Handle",s.jsx("input",{value:v,onChange:F=>C(F.target.value),placeholder:"e.g. timewell"})]}),s.jsx("button",{className:"primary",disabled:_,onClick:U,children:"Update"})]}),s.jsx("p",{className:"subtle",style:{marginTop:8},children:"Handles are lowercase letters, numbers, and underscores (3-20)."})]}),s.jsxs("div",{className:"card",style:{marginBottom:16},children:[s.jsx("h3",{children:"Add friend"}),s.jsxs("div",{className:"settings-grid",style:{gridTemplateColumns:"1fr auto",alignItems:"end"},children:[s.jsxs("label",{children:["Friend handle",s.jsx("input",{value:D,onChange:F=>$(F.target.value),onBlur:ne,placeholder:"@friend"})]}),s.jsx("button",{className:"primary",disabled:_||!D.trim(),onClick:se,children:"Send request"})]}),Y&&s.jsxs("p",{className:"subtle",style:{marginTop:8},children:["Found ",Y.displayName??Y.handle??"friend","."]})]}),(i.incoming.length>0||i.outgoing.length>0)&&s.jsxs("div",{className:"card",style:{marginBottom:16},children:[s.jsx("h3",{children:"Requests"}),i.incoming.map(F=>s.jsxs("div",{className:"device-row",style:{marginBottom:8},children:[s.jsxs("div",{children:[s.jsx("strong",{children:F.displayName??F.handle??"Friend"}),s.jsx("span",{className:"subtle",children:"Incoming"})]}),s.jsxs("div",{className:"settings-actions",children:[s.jsx("button",{className:"primary",disabled:_,onClick:()=>re(F.id),children:"Accept"}),s.jsx("button",{className:"ghost",disabled:_,onClick:()=>me(F.id),children:"Decline"})]})]},F.id)),i.outgoing.map(F=>s.jsxs("div",{className:"device-row",style:{marginBottom:8},children:[s.jsxs("div",{children:[s.jsx("strong",{children:F.displayName??F.handle??"Friend"}),s.jsx("span",{className:"subtle",children:"Pending"})]}),s.jsx("div",{className:"settings-actions",children:s.jsx("button",{className:"ghost",disabled:_,onClick:()=>_e(F.id),children:"Cancel"})})]},F.id))]}),s.jsx("div",{className:"store-grid",children:r.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"No friends yet."}),s.jsx("p",{className:"subtle",children:"Add a handle to start a tiny, supportive feed."})]}):te.map(({friend:F,summary:W,totals:ae,productivePct:q,neutralPct:ge,frivolityPct:Ee,drainingPct:V})=>{const xe=(F.pinnedTrophies??[]).map(ye=>oe.get(ye)).filter(ye=>!!ye);return s.jsxs("div",{className:"card store-item",children:[s.jsxs("div",{className:"store-item-headline",children:[s.jsxs("div",{children:[s.jsx("p",{className:"store-item-domain",children:F.displayName??F.handle??"Friend"}),s.jsx("h3",{className:"store-item-title",children:W?`${W.productivityScore}% productive`:"No data yet"})]}),s.jsxs("div",{className:"store-item-price-pill",children:[s.jsx("strong",{children:W?Ts(W.totalActiveSeconds):""}),s.jsx("span",{children:"active"})]}),W&&s.jsxs("div",{className:"pill deepwork",style:{marginLeft:"auto"},children:[vi(W.deepWorkSeconds)," deep work"]})]}),I?s.jsx("div",{className:"head-to-head",children:W?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"head-to-head-row",children:[s.jsx("span",{children:"You"}),s.jsx("span",{children:W?F.displayName??F.handle??"Friend":"Friend"})]}),s.jsxs("div",{className:"head-to-head-bar fancy",children:[s.jsx("span",{className:"head-to-head-left",style:{width:`${Qc(p,W)}%`,background:j?.color??"var(--accent)"}}),s.jsx("span",{className:"head-to-head-right",style:{width:`${100-Qc(p,W)}%`,background:F.color??"rgba(255, 255, 255, 0.3)"}}),s.jsx("div",{className:"head-to-head-glow"})]}),s.jsxs("div",{className:"head-to-head-row subtle",children:[s.jsxs("span",{children:[vi(p?.categoryBreakdown.productive??0)," productive"]}),s.jsxs("span",{children:[vi(W?.categoryBreakdown.productive??0)," productive"]})]}),s.jsxs("div",{className:"head-to-head-row subtle",children:[s.jsxs("span",{children:[Vc(p?.emergencySessions)," emergency"]}),s.jsxs("span",{children:[Vc(W?.emergencySessions)," emergency"]})]})]}):s.jsx("p",{className:"subtle",style:{marginTop:6},children:"Waiting for shared activity data."})}):s.jsx("p",{className:"subtle",style:{marginTop:10},children:"Competitive view is off."}),xe.length>0&&s.jsx("div",{className:"friends-trophies",children:xe.slice(0,3).map(ye=>s.jsxs("span",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:ye.emoji}),ye.name]},ye.id))}),W&&ae&&s.jsxs("div",{style:{marginTop:10},children:[s.jsxs("div",{className:"subtle",style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Productive"}),s.jsxs("span",{children:[Ts(ae.productive)," (",Ar(q),")"]})]}),s.jsx("div",{className:"impact-meter",style:{marginTop:6},children:s.jsx("span",{style:{width:`${q}%`,background:"var(--cat-productive)"}})}),s.jsxs("div",{className:"subtle",style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[s.jsx("span",{children:"Neutral"}),s.jsxs("span",{children:[Ts(ae.neutral)," (",Ar(ge),")"]})]}),s.jsx("div",{className:"impact-meter day",style:{marginTop:6},children:s.jsx("span",{style:{width:`${ge}%`,background:"var(--cat-neutral)"}})}),s.jsxs("div",{className:"subtle",style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[s.jsx("span",{children:"Frivolity"}),s.jsxs("span",{children:[Ts(ae.frivolity)," (",Ar(Ee),")"]})]}),s.jsx("div",{className:"impact-meter",style:{marginTop:6},children:s.jsx("span",{style:{width:`${Ee}%`,background:"var(--cat-frivolity)"}})}),s.jsxs("div",{className:"subtle",style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[s.jsx("span",{children:"Draining"}),s.jsxs("span",{children:[Ts(ae.draining??0)," (",Ar(V),")"]})]}),s.jsx("div",{className:"impact-meter",style:{marginTop:6},children:s.jsx("span",{style:{width:`${V}%`,background:"var(--cat-draining)"}})})]}),s.jsxs("div",{className:"store-item-meta",children:[s.jsxs("span",{children:["Last update ",W?new Date(W.updatedAt).toLocaleString():""]}),s.jsxs("span",{children:["@",F.handle??"no-handle"]})]}),s.jsxs("div",{className:"store-item-actions",children:[s.jsx("button",{className:"ghost",disabled:_,onClick:()=>Ce(F),children:"Details"}),s.jsx("button",{className:"ghost danger",disabled:_,onClick:()=>$e(F.id),children:"Remove"})]})]},F.id)})}),s.jsx(ah,{open:u,friend:w,summary:w?o[w.userId]??null:null,timeline:N,publicLibraryItems:f,trophies:S,onClose:()=>y(!1)})]}):s.jsxs("section",{className:"page store-page",children:[s.jsx("header",{className:"page-header",children:s.jsxs("div",{children:[s.jsx("h1",{children:"Friends"}),s.jsx("p",{className:"subtle",children:"Add a friend by handle once you are signed in."})]})}),s.jsxs("div",{className:"card",children:[s.jsx("h3",{children:"Connect Sync"}),s.jsx("p",{className:"subtle",children:"Friends require Supabase auth. Go to Settings  Cloud sync and connect."})]})]})}const Rm={attention:"Attention Control",recovery:"Recovery & Resilience",streaks:"Anti-Frivolity Streaks",economy:"Economy & Discipline",library:"Library & Intentionality",time:"Time-of-Day",stability:"Stability & Dynamics",fun:"Fun Flavor",social:"Social & Friends",secret:"Secret"},Kc=6;function Im(e){return`${Math.round(e)}m`}function Fm(e){return e>=10?`${e.toFixed(0)}h`:`${e.toFixed(1)}h`}function Am({api:e}){const[t,n]=d.useState(null),[r,l]=d.useState([]),[i,a]=d.useState(!1),[o,c]=d.useState(!1),p=async()=>{const[u,y]=await Promise.all([e.trophies.profile(),e.trophies.list()]);n(u),l(y)};d.useEffect(()=>{p()},[]);const x=d.useMemo(()=>t?.pinnedTrophies?.length?t.pinnedTrophies:r.filter(u=>u.pinned).map(u=>u.id),[t,r]),j=d.useMemo(()=>{const u=new Map;return r.forEach(y=>u.set(y.id,y)),u},[r]),m=x.map(u=>j.get(u)).filter(u=>!!u),w=d.useMemo(()=>r.filter(u=>u.progress.state==="locked").sort((u,y)=>y.progress.ratio-u.progress.ratio).slice(0,4),[r]),g=d.useMemo(()=>{const u=new Map;return r.forEach(y=>{const S=y.category;u.has(S)||u.set(S,[]),u.get(S).push(y)}),u},[r]),N=async u=>{if(!o){c(!0);try{const y=x.includes(u)?x.filter(P=>P!==u):[...x,u].slice(0,Kc),S=await e.trophies.pin(y);n(P=>P&&{...P,pinnedTrophies:S}),l(P=>P.map(v=>({...v,pinned:S.includes(v.id)})))}finally{c(!1)}}},R=t?.profile?.displayName??t?.profile?.handle??"You",f=t?.profile?.handle?`@${t.profile.handle}`:"Not synced yet",h=t?.profile?.color??"var(--accent)";return s.jsxs("section",{className:"panel",children:[s.jsxs("header",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Profile"}),s.jsx("h1",{children:"Trophy case"}),s.jsx("p",{className:"subtle",children:"Your public card, progression, and achievements."})]}),s.jsx("button",{type:"button",className:`pill ghost ${i?"active":""}`,onClick:()=>a(u=>!u),children:i?"Hide preview":"Public preview"})]}),s.jsxs("div",{className:"profile-grid",children:[s.jsxs("div",{className:"card profile-card",children:[s.jsxs("div",{className:"profile-card-header",children:[s.jsx("div",{className:"profile-avatar",style:{background:h},children:R.trim().slice(0,2).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h2",{children:R}),s.jsx("span",{className:"subtle",children:f})]})]}),s.jsxs("div",{className:"profile-stats",children:[s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Weekly productive"}),s.jsx("strong",{children:t?Im(t.stats.weeklyProductiveMinutes):"--"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Best run"}),s.jsx("strong",{children:t?Fm(t.stats.bestRunMinutes/60):"--"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Recovery median"}),s.jsx("strong",{children:t?.stats.recoveryMedianMinutes!=null?`${Math.round(t.stats.recoveryMedianMinutes)}m`:"--"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"label",children:"Frivolity streak"}),s.jsx("strong",{children:t?`${t.stats.currentFrivolityStreakHours}h`:"--"})]})]}),s.jsxs("div",{className:"profile-pinned",children:[s.jsxs("div",{className:"profile-pinned-header",children:[s.jsx("span",{className:"label",children:"Pinned trophies"}),s.jsxs("span",{className:"subtle",children:[m.length,"/",Kc]})]}),m.length===0?s.jsx("p",{className:"subtle",style:{margin:0},children:"Pin a few trophies so friends can see them."}):s.jsx("div",{className:"profile-badges",children:m.map(u=>s.jsxs("div",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:u.emoji}),s.jsx("span",{children:u.name})]},u.id))})]})]}),s.jsxs("div",{className:"card profile-next",children:[s.jsx("div",{className:"card-header-row",children:s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Next up"}),s.jsx("h2",{children:"Close to unlocking"})]})}),w.length===0?s.jsx("p",{className:"subtle",children:"No tracked trophies yet. Keep logging activity."}):s.jsx("div",{className:"next-list",children:w.map(u=>s.jsxs("div",{className:"next-item",children:[s.jsxs("div",{className:"next-item-header",children:[s.jsx("span",{className:"emoji",children:u.emoji}),s.jsxs("div",{children:[s.jsx("strong",{children:u.name}),s.jsx("span",{className:"subtle",children:u.description})]})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("span",{style:{width:`${Math.round(u.progress.ratio*100)}%`}})}),s.jsx("span",{className:"subtle",children:u.progress.label??`${u.progress.current}/${u.progress.target}`})]},u.id))}),t?.earnedToday?.length?s.jsxs("div",{className:"earned-today",children:[s.jsx("span",{className:"label",children:"Earned today"}),s.jsx("div",{className:"profile-badges",children:t.earnedToday.map(u=>{const y=j.get(u);return y?s.jsxs("div",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:y.emoji}),s.jsx("span",{children:y.name})]},u):null})})]}):null]})]}),i&&s.jsxs("div",{className:"card profile-preview",children:[s.jsx("div",{className:"card-header-row",children:s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Public preview"}),s.jsx("h2",{children:"What friends see"})]})}),s.jsxs("div",{className:"profile-preview-card",children:[s.jsx("div",{className:"profile-avatar",style:{background:h},children:R.trim().slice(0,2).toUpperCase()}),s.jsxs("div",{children:[s.jsx("strong",{children:R}),s.jsx("span",{className:"subtle",children:f})]}),s.jsx("div",{className:"profile-preview-badges",children:m.length===0?s.jsx("span",{className:"subtle",children:"No pinned trophies yet."}):m.map(u=>s.jsxs("span",{className:"trophy-badge",children:[s.jsx("span",{className:"emoji",children:u.emoji}),u.name]},u.id))})]})]}),s.jsxs("div",{className:"card trophy-case",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Trophy case"}),s.jsx("h2",{children:"Full collection"})]}),s.jsx("span",{className:"subtle",children:"Pin trophies to feature them on your card."})]}),Array.from(g.entries()).map(([u,y])=>s.jsxs("div",{className:"trophy-group",children:[s.jsx("h3",{children:Rm[u]}),s.jsx("div",{className:"trophy-grid",children:y.map(S=>{const P=!S.earnedAt,v=S.secret&&P;return s.jsxs("div",{className:`trophy-card ${P?"locked":"earned"}`,children:[s.jsxs("div",{className:"trophy-card-header",children:[s.jsx("span",{className:"emoji",children:v?"":S.emoji}),s.jsx("button",{type:"button",className:`pill ghost ${S.pinned?"active":""}`,onClick:()=>N(S.id),disabled:o||!S.earnedAt,title:S.earnedAt?"Pin to profile":"Earn to pin",children:S.pinned?"Pinned":"Pin"})]}),s.jsx("strong",{children:v?"Classified":S.name}),s.jsx("p",{className:"subtle",children:v?"Keep going to reveal this trophy.":S.description}),S.progress.state==="untracked"?s.jsx("span",{className:"subtle",children:S.progress.label}):s.jsx("div",{className:"progress-bar",children:s.jsx("span",{style:{width:`${Math.round(S.progress.ratio*100)}%`}})}),S.earnedAt&&s.jsxs("span",{className:"subtle",children:["Earned ",new Date(S.earnedAt).toLocaleDateString()]})]},S.id)})})]},u))]})]})}const oh=window.twsp;async function zm(e){let t=null;try{t=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720}},audio:!1});const n=document.createElement("video");n.srcObject=t,n.playsInline=!0,await n.play(),n.readyState<2&&await new Promise(m=>{n.onloadedmetadata=()=>m()});const r=n.videoWidth||640,l=n.videoHeight||480,a=Math.min(1,640/r),o=Math.round(r*a),c=Math.round(l*a),p=document.createElement("canvas");p.width=o,p.height=c;const x=p.getContext("2d");if(!x)throw new Error("Unable to capture camera frame");x.drawImage(n,0,0,o,c);const j=p.toDataURL("image/jpeg",.82);await oh.camera.storePhoto({dataUrl:j,subject:e.subject??null,domain:e.domain??null})}finally{t&&t.getTracks().forEach(n=>n.stop())}}function Om(){const e=d.useRef(!1);return d.useEffect(()=>{const t=oh.events.on("camera:capture",async n=>{if(!e.current){e.current=!0;try{await zm(n??{})}catch(r){console.warn("Camera capture failed",r)}finally{e.current=!1}}});return()=>{t()}},[]),null}const Hm=["Hello beautiful.","Good morning, bright mind.","Hey superstar.","Hello again, steady heart.","Welcome back, focus machine."],Bm=["Set the tone. The day follows.","Small levers, huge outcomes.","One clear choice beats a thousand edits.","Pick your rules before the feed does.","Today is made in small agreements."];function Um(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}function Yc(e,t){if(!e.length)return"";const n=Um(t)%e.length;return e[n]}function Wm({open:e,dayKey:t,initial:n,saving:r,error:l,onSave:i,onSkip:a}){const[o,c]=d.useState(n.goalHours),[p,x]=d.useState(n.idleThreshold),[j,m]=d.useState(n.continuityWindowSeconds),[w,g]=d.useState(n.emergencyPolicy),[N,R]=d.useState(n.note);d.useEffect(()=>{e&&(c(n.goalHours),x(n.idleThreshold),m(n.continuityWindowSeconds),g(n.emergencyPolicy),R(n.note))},[e,n]);const f=d.useMemo(()=>Yc(Hm,t),[t]),h=d.useMemo(()=>Yc(Bm,t+"tag"),[t]);return e?s.jsx("div",{className:"daily-onboarding-overlay",role:"dialog","aria-modal":"true",children:s.jsxs("div",{className:"daily-onboarding-card",children:[s.jsxs("div",{className:"daily-onboarding-header",children:[s.jsxs("div",{className:"daily-onboarding-hero",children:[s.jsx("div",{className:"daily-onboarding-orb","aria-hidden":!0}),s.jsxs("div",{children:[s.jsx("p",{className:"eyebrow",children:"Daily landing"}),s.jsx("h2",{children:f}),s.jsx("p",{className:"subtle",children:h})]})]}),s.jsxs("div",{className:"daily-onboarding-meta",children:[s.jsx("span",{className:"pill ghost",children:"Morning tuning"}),s.jsx("span",{className:"pill ghost",children:"One screen"})]})]}),s.jsxs("div",{className:"daily-onboarding-panels",children:[s.jsxs("div",{className:"daily-onboarding-panel",children:[s.jsx("h3",{children:"Set your day"}),s.jsxs("div",{className:"daily-onboarding-grid",children:[s.jsxs("label",{children:["Productivity goal (hours)",s.jsx("input",{type:"number",min:"0.5",max:"12",step:"0.1",value:o,onChange:u=>c(Number(u.target.value))})]}),s.jsxs("label",{children:["Idle threshold (seconds)",s.jsx("input",{type:"number",min:"5",max:"300",value:p,onChange:u=>x(Number(u.target.value))})]}),s.jsxs("label",{children:["Continuity window (seconds)",s.jsx("input",{type:"number",min:"0",max:"900",value:j,onChange:u=>m(Number(u.target.value))})]}),s.jsxs("label",{children:["Emergency policy",s.jsxs("select",{value:w,onChange:u=>g(u.target.value),children:[s.jsx("option",{value:"off",children:"Off"}),s.jsx("option",{value:"gentle",children:"Gentle"}),s.jsx("option",{value:"balanced",children:"Balanced"}),s.jsx("option",{value:"strict",children:"Strict"})]})]})]})]}),s.jsxs("div",{className:"daily-onboarding-panel",children:[s.jsx("h3",{children:"Note for end-of-day you"}),s.jsx("label",{className:"daily-onboarding-note",children:s.jsx("textarea",{rows:4,value:N,onChange:u=>R(u.target.value),placeholder:"Write something kind, firm, or honest. We'll bring it back later."})})]})]}),l&&s.jsx("p",{className:"error-text",children:l}),s.jsxs("div",{className:"daily-onboarding-actions",children:[s.jsx("button",{type:"button",className:"ghost",onClick:()=>a({note:N}),disabled:r,children:"Not now"}),s.jsx("button",{type:"button",className:"primary",onClick:()=>i({goalHours:o,idleThreshold:p,continuityWindowSeconds:j,emergencyPolicy:w,note:N}),disabled:r,children:r?"Saving...":"Set my day"})]})]})}):null}function Vm({open:e,note:t,onClose:n}){return e?s.jsx("div",{className:"daily-onboarding-overlay",role:"dialog","aria-modal":"true",children:s.jsxs("div",{className:"daily-onboarding-card daily-note-card",children:[s.jsxs("div",{className:"daily-onboarding-header",children:[s.jsx("p",{className:"eyebrow",children:"End-of-day note"}),s.jsx("h2",{children:"For you, from you."})]}),s.jsx("div",{className:"daily-note-body",children:s.jsx("p",{children:t})}),s.jsx("div",{className:"daily-onboarding-actions",children:s.jsx("button",{type:"button",className:"primary",onClick:n,children:"Got it"})})]})}):null}const ce=window.twsp,Qm=["dashboard","library","analytics","settings","friends","profile"],Km=e=>Qm.includes(e),Ym=4,Gm=17;function Ds(e){const t=new Date(e);t.getHours()<Ym&&t.setDate(t.getDate()-1);const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${l}`}function Xm(){const[e,t]=d.useState("dashboard"),[n,r]=d.useState({balance:0}),[l,i]=d.useState([]),[a,o]=d.useState(null),[c,p]=d.useState(()=>{try{return localStorage.getItem("tws-theme")==="olive"?"olive":"lavender"}catch{return"lavender"}}),[x,j]=d.useState({connected:!0,lastSeen:null}),[m,w]=d.useState(null),[g,N]=d.useState(null),[R,f]=d.useState(!1),[h,u]=d.useState(!1),[y,S]=d.useState(null),[P,v]=d.useState(2),[C,D]=d.useState(15),[$,Y]=d.useState(120),[J,_]=d.useState("balanced"),[O,Z]=d.useState(""),[K,X]=d.useState(!1),[b,I]=d.useState(Date.now());d.useEffect(()=>{ce.wallet.get().then(r),ce.market.list().then(i),ce.economy.state().then(o)},[]),d.useEffect(()=>{const U=window.setInterval(()=>I(Date.now()),6e4);return()=>window.clearInterval(U)},[]),d.useEffect(()=>{let U=!0;return(async()=>{const se=Ds(new Date),[re,me,_e,$e,Ce]=await Promise.all([ce.settings.dailyOnboardingState(),ce.settings.productivityGoalHours(),ce.settings.idleThreshold(),ce.settings.continuityWindowSeconds(),ce.settings.emergencyPolicy()]);if(U&&(N(re),v(me),D(_e),Y($e),_(Ce),Z(re.note?.day===se?re.note.message:""),re.completedDay!==se&&re.lastPromptedDay!==se)){const Je=await ce.settings.updateDailyOnboardingState({lastPromptedDay:se});if(!U)return;N(Je),f(!0)}})().catch(()=>{}),()=>{U=!1}},[]),d.useEffect(()=>{if(!g?.note)return;const U=g.note,ne=Ds(new Date(b));if(U.acknowledged||U.day&&U.day>ne)return;const se=new Date(b);if(!(U.day===ne&&se.getHours()<Gm)&&!K&&(X(!0),!U.deliveredAt)){const me={...U,deliveredAt:new Date().toISOString()};ce.settings.updateDailyOnboardingState({note:me}).then(N).catch(()=>{})}},[g,K,b]),d.useEffect(()=>{const U=document.body;U.classList.remove("theme-olive"),c==="olive"&&U.classList.add("theme-olive");try{localStorage.setItem("tws-theme",c)}catch{}},[c]),d.useEffect(()=>{const U=ce.events.on("ui:navigate",ne=>{const se=ne?.view;typeof se=="string"&&Km(se)&&t(se)});return()=>{U()}},[]);const H=d.useRef(x);d.useEffect(()=>{H.current=x},[x]),d.useEffect(()=>{const U=ce.events.on("wallet:update",r),ne=ce.events.on("economy:activity",o),se=ce.events.on("market:update",()=>{ce.market.list().then(i)}),re=ce.events.on("paywall:required",Ce=>{if(H.current.connected&&["Google Chrome","Chrome","Brave Browser","Brave","Microsoft Edge","Edge","Arc","Firefox","Safari"].some(F=>Ce.appName.includes(F))){console.log("Ignoring desktop paywall for browser activity (extension active):",Ce);return}w({...Ce,reason:"blocked"})}),me=ce.events.on("paywall:session-started",()=>{w(null)}),_e=ce.events.on("extension:status",Ce=>{j(Ce)}),$e=ce.events.on("paywall:session-ended",Ce=>{Ce.reason==="insufficient-funds"&&w({domain:Ce.domain,appName:"",reason:Ce.reason})});return()=>{U(),ne(),se(),re(),me(),$e(),_e()}},[]);const z=async U=>{if(h)return;u(!0),S(null);const ne=Ds(new Date);try{await ce.settings.updateProductivityGoalHours(U.goalHours),await ce.settings.updateIdleThreshold(U.idleThreshold),await ce.settings.updateContinuityWindowSeconds(U.continuityWindowSeconds),await ce.settings.updateEmergencyPolicy(U.emergencyPolicy),v(U.goalHours),D(U.idleThreshold),Y(U.continuityWindowSeconds),_(U.emergencyPolicy);const se=U.note.trim(),re={completedDay:ne,lastPromptedDay:ne,lastSkippedDay:null,note:se?{day:ne,message:se,deliveredAt:null,acknowledged:!1}:null},me=await ce.settings.updateDailyOnboardingState(re);N(me),f(!1)}catch{S("Failed to save your settings. Try again.")}finally{u(!1)}},te=async U=>{if(h)return;u(!0),S(null);const ne=Ds(new Date);try{const se=U.note.trim(),re={lastPromptedDay:ne,lastSkippedDay:ne,note:se?{day:ne,message:se,deliveredAt:null,acknowledged:!1}:null},me=await ce.settings.updateDailyOnboardingState(re);N(me),f(!1)}catch{S("Failed to save your note. Try again.")}finally{u(!1)}},oe=async()=>{if(!g?.note){X(!1);return}const U={...g.note,acknowledged:!0};try{const ne=await ce.settings.updateDailyOnboardingState({note:U});N(ne)}catch{}finally{X(!1)}};return s.jsxs("div",{className:"app-shell",children:[s.jsx(Om,{}),!x.connected&&s.jsxs("div",{className:"extension-banner",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Browser extension offline"}),s.jsx("span",{className:"subtle",children:" Install or enable the TimeWellSpent extension to enforce in-browser paywalls."})]}),s.jsx("button",{className:"primary",onClick:()=>window.open("https://chromewebstore.google.com","_blank","noopener"),children:"Get extension"})]}),s.jsxs("div",{className:"window-chrome",children:[s.jsxs("div",{className:"window-chrome-title","aria-hidden":!0,children:[s.jsx("div",{className:"title-dot"}),s.jsx("span",{children:"TimeWellSpent"})]}),s.jsx("div",{className:"window-chrome-meta",children:s.jsxs("span",{className:"pill ghost big",children:[n?.balance??0," f-coins"]})})]}),s.jsxs("aside",{className:"sidebar",children:[s.jsxs("div",{className:"brand",children:[s.jsx("div",{className:"logo",children:""}),s.jsx("span",{children:"TimeWellSpent"})]}),s.jsxs("nav",{className:"nav-menu",children:[s.jsx("button",{className:e==="dashboard"?"active":"",onClick:()=>t("dashboard"),children:"Dashboard"}),s.jsx("button",{className:e==="library"?"active":"",onClick:()=>t("library"),children:"Library"}),s.jsx("button",{className:e==="settings"?"active":"",onClick:()=>t("settings"),children:"Settings"}),s.jsx("button",{className:e==="analytics"?"active":"",onClick:()=>t("analytics"),children:"Analytics"}),s.jsx("button",{className:e==="friends"?"active":"",onClick:()=>t("friends"),children:"Friends"}),s.jsx("button",{className:e==="profile"?"active":"",onClick:()=>t("profile"),children:"Profile"})]}),s.jsxs("div",{className:"wallet-summary",children:[s.jsxs("div",{className:"balance",children:[s.jsx("span",{className:"coin",children:""}),s.jsx("span",{className:"amount",children:n?.balance??0})]}),s.jsx("div",{className:"rate",children:a?.activeCategory==="productive"?"+5/min":a?.activeCategory==="neutral"?"+3/min":"0/min"})]})]}),s.jsxs("main",{className:"content",children:[e==="dashboard"&&s.jsx(cm,{api:ce,wallet:n,economy:a,productivityGoalHoursOverride:P}),e==="analytics"&&s.jsx(gm,{api:ce}),e==="settings"&&s.jsx(vm,{api:ce,theme:c,onThemeChange:U=>p(U)}),e==="library"&&s.jsx(Tm,{api:ce}),e==="friends"&&s.jsx($m,{api:ce}),e==="profile"&&s.jsx(Am,{api:ce})]}),s.jsx(Wm,{open:R,dayKey:Ds(new Date),saving:h,error:y,initial:{goalHours:P,idleThreshold:C,continuityWindowSeconds:$,emergencyPolicy:J,note:O},onSave:z,onSkip:te}),s.jsx(Vm,{open:K,note:g?.note?.message??"",onClose:oe}),m&&s.jsx(xm,{open:!!m,state:{domain:m.domain||m.appName,mode:m.mode??"pack",reason:m.reason},wallet:n,api:ce,marketRates:l,onWallet:r,onClose:()=>w(null)})]})}gi.createRoot(document.getElementById("root")).render(s.jsx(Rh.StrictMode,{children:s.jsx(Xm,{})}));
//# sourceMappingURL=index-BfvyOSWM.js.map
